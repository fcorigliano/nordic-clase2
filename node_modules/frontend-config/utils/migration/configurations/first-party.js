const config = require('first-party-navigation-config');

const firstPartyMapper = value => (value || [])
  .reduce((itemsTempKeys, item) => item.startsWith('firstParty')
    ? itemsTempKeys.concat(`url.${item}`)
    : itemsTempKeys, []);

module.exports = {
  config,
  rules: [{
    platforms: [{
      id: 'ML',
      excludedSites: [
        'CBT',
      ],
    }],
    keys: [{
      key: 'firstParty',
    }, {
      key: 'url.firstPartyHome',
    }, {
      key: 'firstParty.desktopHeaderLinks',
      mapper: firstPartyMapper,
    }, {
      key: 'firstParty.desktopLoggedInHeaderMenuLinks',
      mapper: firstPartyMapper,
    }, {
      key: 'firstParty.desktopLoggedOutHeaderMenuLinks',
      mapper: firstPartyMapper,
    }, {
      key: 'firstParty.desktopFooterLinks',
      mapper: firstPartyMapper,
    }],
  }],
};
