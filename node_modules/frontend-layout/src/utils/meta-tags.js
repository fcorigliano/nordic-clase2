const feConfig = require('frontend-config');

const getMetaTagsConfig = (req, feConfigEnvironment) => (req.platform && req.platform.id && req.platform.siteId
  ? feConfig.get('metaTags', req.platform.id, req.platform.siteId, feConfigEnvironment) || null
  : null);

const mapMetaTagsConfig = (typeMetaTagsConfig) => typeMetaTagsConfig
  .reduce((metaTagsString, typeMetaTagConfig) => {
    const attributesString = Object
      .keys(typeMetaTagConfig)
      .reduce((tempAttributesString, attributeKey) => `${tempAttributesString} ${attributeKey}="${typeMetaTagConfig[attributeKey]}"`, '');

    return `${metaTagsString}<meta${attributesString}/>`;
  }, '');

module.exports = {
  getMetaTagsConfig,
  mapMetaTagsConfig,
};
