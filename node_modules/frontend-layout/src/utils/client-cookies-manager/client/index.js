/* eslint-disable no-undef,no-empty */

const { collectCookieData } = require('./collect');

module.exports = () => {
  try {
    const originalCookie = Object.getOwnPropertyDescriptor(Document.prototype, 'cookie') || Object.getOwnPropertyDescriptor(HTMLDocument.prototype, 'cookie');
    if (originalCookie && originalCookie.configurable) {
      Object.defineProperty(document, 'cookie', {
        configurable: originalCookie.configurable,
        enumerable: originalCookie.enumerable,
        get: () => originalCookie.get.call(document),
        set: (value) => {
          collectCookieData(value);
          return originalCookie.set.call(document, value);
        },
      });
    }
  } catch (e) {}
};
