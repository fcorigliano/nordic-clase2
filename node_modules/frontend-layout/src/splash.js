const React = require('react');
const env = require('frontend-env');
const Script = require('frontend-script');
const PropTypes = require('prop-types');

const Splash = ({
  isMobile, platformId, melilab, cookies, labels,
}) => {
  const isFirstVisit = !cookies.pmsctx && !cookies[`_${platformId.toLowerCase()}_ga`];
  const splashURL = !env.FURY || melilab ? labels.mobileApps.splashTest : labels.mobileApps.splash;

  if (isMobile && !isFirstVisit) {
    return <Script src={splashURL} />;
  }

  return null;
};

Splash.propTypes = {
  isMobile: PropTypes.bool,
  platformId: PropTypes.string.isRequired,
  melilab: PropTypes.string,
  cookies: PropTypes.object.isRequired,
  labels: PropTypes.object.isRequired,
};

Splash.defaultProps = {
  isMobile: false,
  melilab: '',
};

module.exports = Splash;
