const sendEvent = (consentDetail) => {
  try {
    // Custom event based on MDN polyfill https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#polyfill
    const CustomEventWithFallback = (function customEventWithFallback() {
      if (typeof window.CustomEvent === 'function') {
        return window.CustomEvent;
      }

      function CustomEventPolyfill(eventName, params) {
        const evt = document.createEvent('CustomEvent');
        evt.initCustomEvent(eventName, false, false, params.detail);
        return evt;
      }

      return CustomEventPolyfill;
    }());

    // create and dispatch the event
    const customEvent = new CustomEventWithFallback('cookiesConsentChange', { detail: consentDetail });
    document.dispatchEvent(customEvent);
    // eslint-disable-next-line no-empty
  } catch (e) {}
};

module.exports = sendEvent;
