const { renderType } = require('../constants/experiments');
const { getRenderTypeExperimentConfig } = require('./cookies-consent-experiment');

const requestHasCookiesConsentExperience = ({
  req,
}) => {
  const renderTypeExperimentConfig = getRenderTypeExperimentConfig({
    platform: req.platform,
    headers: req.headers,
    cookies: req.cookies,
    req,
  });

  const { variant } = renderTypeExperimentConfig || {};

  return !!variant
    && variant !== renderType.variants.disclaimer
    && variant !== renderType.variants.none;
};

module.exports = {
  requestHasCookiesConsentExperience,
};
