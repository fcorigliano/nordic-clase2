const statsdInternal = require('frontend-statsd/internal');
const dpConfig = require('data-privacy-config');

const { APPLICATION: applicationName } = process.env;

const statsd = (name, tags) => {
  const ddogHTTPCookies = 'nordic.ragnar.http_cookies';
  statsdInternal.histogram(`${ddogHTTPCookies}.${name}`, 1, tags);
};

const getConfig = (req) => (!req.platform
  ? null
  : dpConfig.getValue({
    key: 'httpCookies',
    req,
  }));

module.exports = {
  statsd,
  applicationName,
  getConfig,
};
