# @frontend-cookies-manager/cookies-helpers-middleware

> A middleware that provides helper methods for cookies management.

## Getting Started

### Usage 

This middleware is available by default in [Ragnar](https://github.com/mercadolibre/fury_frontend-ragnar#middlewares) since v2.4.0 or above.

#### userConsentCookieCategory

```
const { middleware } = require('@frontend-cookies-manager/cookies-helpers-middleware');

router.get('/path-to-awesome', middleware, (req, res, next) => {
    ...
    req.meliCookies.userConsentCookieCategory('tracking').then((userConsent) => {
    if (userConsent) {
        // do something awesome with your cookie
    } else {
        // do whatever without setting tracking cookies
    }
});
```

##### Resolve data

```
true | false
```

##### Reject data

```
false
```

#### getCookiesUserPreferences

```
const { middleware } = require('@frontend-cookies-manager/cookies-helpers-middleware');

router.get('/path-to-awesome', middleware, (req, res, next) => {
    ...
    req.meliCookies.getCookiesUserPreferences().then((data) => {
        // do something awesome
    });
});
```

##### Resolve data

There are 3 types of statuses:

- Can be `true` or `false` when a user has already made the decision to accept or reject a category.
- Can be `null` when a category is new, and we do not know the user's decision.

```
{
    categories: {
        foo: null,
        bar: true,
        any: false,
        ...
    },
}
```

In case of error resolves

```
null
```

## Running the tests

Run tests in main package

## Support

If you have any question related to this module please contact us on the [#team-frontendcore](https://meli.slack.com/archives/CS9E8LJ8Z) slack channel or via email [frontendcore@mercadolibre.com](mailto:frontendcore@mercadolibre.com)

## Versioning

Please check [README.md](../../README.md) in the project root. 

## Contributing

In order to contribute to this library, you must read [this guide](https://github.com/mercadolibre/fury_frontend-nordic/blob/master/docs/contributing.md#contributing-guidelines) first.

## Changelog

We keep changes to our codebase [here](../../CHANGELOG.md)

## License

Â© 2021 Mercado Libre
