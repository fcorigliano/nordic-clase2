describe('Consent Banner Commons Has Missing Preferences', () => {
  it('should return show false if there is no user preferences', () => {
    const { userPreferencesRequiresShowingBanner } = require('./user-pref-req-show-banner');

    const result = userPreferencesRequiresShowingBanner(null);

    expect(result).toBeFalsy();
  });

  it('should return show false if there is no user preferences categories hash', () => {
    const { userPreferencesRequiresShowingBanner } = require('./user-pref-req-show-banner');

    const result = userPreferencesRequiresShowingBanner({});

    expect(result).toBeFalsy();
  });

  it('should return show false if there is no user preferences categories', () => {
    const { userPreferencesRequiresShowingBanner } = require('./user-pref-req-show-banner');

    const result = userPreferencesRequiresShowingBanner({
      categories: {},
    });

    expect(result).toBeFalsy();
  });

  it(`should return show false if the user has selected a value for all categories
  (no user preferences categories with null value)`, () => {
    const { userPreferencesRequiresShowingBanner } = require('./user-pref-req-show-banner');

    const result = userPreferencesRequiresShowingBanner({
      categories: {
        someCategory: true,
        someOtherCategory: false,
      },
    });

    expect(result).toBeFalsy();
  });

  it('should return show false if the user has accepted all categories', () => {
    const { userPreferencesRequiresShowingBanner } = require('./user-pref-req-show-banner');

    const result = userPreferencesRequiresShowingBanner({
      categories: {
        someCategory: true,
        someOtherCategory: true,
      },
    });

    expect(result).toBeFalsy();
  });


  it('should return show false if the user has denied all categories', () => {
    const { userPreferencesRequiresShowingBanner } = require('./user-pref-req-show-banner');

    const result = userPreferencesRequiresShowingBanner({
      categories: {
        someCategory: false,
        someOtherCategory: false,
      },
    });

    expect(result).toBeFalsy();
  });

  it(`should return show true when the user visits the site for the first time 
    (all user preferences categories are with null value)`, () => {
    const { userPreferencesRequiresShowingBanner } = require('./user-pref-req-show-banner');

    const result = userPreferencesRequiresShowingBanner({
      categories: {
        someCategory: null,
        someOtherCategory: null,
      },
    });

    expect(result).toBeTruthy();
  });

  it(`should return show false if the user agreed to all previously existing categories and a new one is added
  (all user preferences categories are either true or null values)`, () => {
    const { userPreferencesRequiresShowingBanner } = require('./user-pref-req-show-banner');

    const result = userPreferencesRequiresShowingBanner({
      categories: {
        someCategory: true,
        someOtherCategory: null,
      },
    });

    expect(result).toBeFalsy();
  });

  it(`should return show true if the user refused some category and a new one is added
      (there is at least one user preferences category with false value and at least one with null value)`, () => {
    const { userPreferencesRequiresShowingBanner } = require('./user-pref-req-show-banner');

    const result = userPreferencesRequiresShowingBanner({
      categories: {
        someCategory: false,
        someOtherCategory: true,
        someNewCategory: null,
      },
    });

    expect(result).toBeTruthy();
  });

  it(`should return show true if the user refused all existing category and a new one is added
  (all user preferences are false and there is at least one with null value)`, () => {
    const { userPreferencesRequiresShowingBanner } = require('./user-pref-req-show-banner');

    const result = userPreferencesRequiresShowingBanner({
      categories: {
        someCategory: false,
        someNewCategory: null,
      },
    });

    expect(result).toBeTruthy();
  });
});
