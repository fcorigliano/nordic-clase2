const React = require('react');
const renderer = require('react-test-renderer');

const mockProps = (config = {}) => ({
  show: true,
  bannerText: 'some-banner-text',
  dismissButtonText: 'Dismiss text',
  moreInfo: {
    name: 'More info text',
    link: 'More info link',
  },
  cookieCreationInfo: {
    name: 'cookieName',
    domain: 'cookieDomain',
    sameSite: 'sameSite metadata',
  },
  cssContent: 'some-css-content',

  ...config.show === false && {
    show: false,
  },
});

describe('Cookie Disclaimer', () => {
  beforeEach(() => jest.resetModules());

  it('should match default snapshot', () => {
    const componentProps = mockProps();

    const Component = require('./index');

    const tree = renderer
      .create(<Component {...componentProps} />)
      .toJSON();

    expect(tree).toMatchSnapshot();
  });

  it('should render null if show prop is false', () => {
    const componentProps = mockProps({
      show: false,
    });

    const Component = require('./index');

    const tree = renderer
      .create(<Component {...componentProps} />)
      .toJSON();

    expect(tree).toMatchSnapshot();
  });
});
