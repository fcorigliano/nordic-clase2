import { Callback } from ".";
import { MultipleRequest, Request } from "../models";

export function requestToPromise(request: Request | MultipleRequest): Promise<any> {
    const previousCallback = request.callback;
    let callback: Callback;
    
    const promise = new Promise((resolve, reject) => {
        callback = (result, error) => {
            if (error) {
                reject(error);
                return;
            }
            resolve(result);

            if (previousCallback) {
                previousCallback(result, error);
            }
        };
    });

    request.callback = callback;
    return promise;
}