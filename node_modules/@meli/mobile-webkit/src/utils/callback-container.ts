import { ErrorMessage } from '../models/error/error-message';

export type Callback = (result: any, error: ErrorMessage) => void;

export class CallbackContainer {
    private callbacks: Map<number, Callback> = new Map();
    private callbackGenerator = 0;

    add(callback: Callback): number {
        this.callbackGenerator += 1;
        this.callbacks.set(this.callbackGenerator, callback);
        return this.callbackGenerator;
    }

    hasCallback(id: number): boolean {
        return this.callbacks.has(id);
    }

    getAndRemove(id: number): Callback {
        let callback = this.callbacks.get(id);
        this.callbacks.delete(id);
        return callback;
    }
}