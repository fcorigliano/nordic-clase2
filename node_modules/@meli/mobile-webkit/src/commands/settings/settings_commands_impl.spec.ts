import { MobileWebkit } from "../../mobile-webkit";
import { SettingsCommandsImpl } from "./settings_commands_impl";

describe("SettingsCommandsLegacy", () => {
  let executeNativeSpy: jest.Mock<any, any>;
  let mobileWebKit: MobileWebkit;
  let commands: SettingsCommandsImpl;

  beforeEach(() => {
    executeNativeSpy = jest.fn();
    mobileWebKit = {
      executeNative: executeNativeSpy,
    } as any;
    commands = new SettingsCommandsImpl(mobileWebKit);
  });

  it("setRefreshMode should call executeNative with method refresh_mode", () => {
    // Given

    // When
    commands.setRefreshMode("pull");

    // Then
    expect(executeNativeSpy).toHaveBeenCalledWith({
      method: "refresh_mode",
      args: {
        refresh_mode: "pull",
      },
    });
  });
});
