import { MobileWebkit } from "../../../mobile-webkit";
import { SettingsCommandsLegacy } from "./settings_commands_legacy";

describe("SettingsCommandsLegacy", () => {
  let executeNativeSpy: jest.Mock<any, any>;
  let mobileWebKit: MobileWebkit;
  let commands: SettingsCommandsLegacy;

  beforeEach(() => {
    executeNativeSpy = jest.fn();
    mobileWebKit = {
      executeNative: executeNativeSpy,
    } as any;
    commands = new SettingsCommandsLegacy(mobileWebKit);
  });

  it("setRefreshAction should call executeNative with method refresh_mode", () => {
    // Given

    // When
    commands.setRefreshMode("pull");

    // Then
    expect(executeNativeSpy).toHaveBeenCalledWith({
      method: "refresh_action",
      args: {
        refresh_mode: "pull",
      },
    });
  });
});
