import { ConnectNativeEventArgs, NativeEvent, RequestNativeEventArgs } from "./native-event";
import { NativeEventType } from "./native-event-type";

describe("NativeEvent", ()=>{
    it("should return a connect event with data", ()=>{
        // Given
        const data:ConnectNativeEventArgs = {
            data:1
        };

        // When
        const event = NativeEvent.connect(data);

        // Then
        expect(event.type).toEqual(NativeEventType.connect);
        expect((event as any).data).toEqual(data.data);
        expect(event.detail).toEqual(data);
        
    });
    it("should return a nativeRequest with request information", ()=>{
        // Given
        const data: RequestNativeEventArgs = {
            method: "123",
            args: {
                param:1
            },
            callback: ()=>{}
        };

        // When
        const event = NativeEvent.nativeRequest(data);

        // Then
        expect(event.type).toEqual(NativeEventType.nativeRequest);
        expect(event.detail).toEqual(data);
        expect((event as any).method).toEqual(data.method);
        expect((event as any).args).toEqual(data.args);
        expect((event as any).callback).toEqual(data.callback);
    });
});