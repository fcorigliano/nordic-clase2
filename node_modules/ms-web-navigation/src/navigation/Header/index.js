const React = require('react');
const ParseHTML = require('html-react-parser');
const PropTypes = require('prop-types');
const Script = require('frontend-script');

const Header = (props) => {
  const { hide, widgets, raw } = props;

  if (hide) {
    return null;
  }

  return (
    <>
      { ParseHTML(raw) }
      {widgets
        && widgets.map(widget => (
          <Script key={widget.key} src={widget.src}>
            {widget.code}
          </Script>
        ))}
    </>
  );
};

Header.propTypes = {
  widgets: PropTypes.arrayOf(
    PropTypes.shape({
      key: PropTypes.string,
      src: PropTypes.string,
      code: PropTypes.string,
    }),
  ),
  hide: PropTypes.bool,
  raw: PropTypes.string.isRequired,
};

Header.defaultProps = {
  widgets: [],
  hide: false,
};

module.exports = Header;
