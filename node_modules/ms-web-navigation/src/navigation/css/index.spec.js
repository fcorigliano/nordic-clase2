const React = require('react');
const ShallowRenderer = require('react-test-renderer/shallow');
const Css = require('.');
const {
  INTERNAL,
  PLUS,
} = require('../../constants/navigation-types');

const defaultProps = {
  platformId: 'MS',
  siteId: 'MLA',
  navigationType: PLUS,
  firstRequestInlineStyles: false,
  browser: {
    name: 'chrome',
    major: '80',
  },
  cdn: {
    link: 'https://some-cdn-link.com',
  },
};

describe('Mercado Shops Navigation', () => {
  describe('Css component', () => {
    it('should match snapshot with non-internal and non-plus navigation type', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <Css
          {...defaultProps}
          navigationType="unknown-navigation-type"
        />
      );

      const renderedComponent = renderer.render(component);

      expect(renderedComponent).toMatchSnapshot();
    });

    it('should match snapshot with plus-like navigation type', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <Css
          {...defaultProps}
          navigationType={`${PLUS}-like`}
        />
      );

      const renderedComponent = renderer.render(component);

      expect(renderedComponent).toMatchSnapshot();
    });

    it('should match snapshot with plus navigation type', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <Css
          {...defaultProps}
          navigationType={PLUS}
        />
      );

      const renderedComponent = renderer.render(component);

      expect(renderedComponent).toMatchSnapshot();
    });

    it('should match snapshot with internal navigation type', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <Css
          {...defaultProps}
          navigationType={INTERNAL}
        />
      );

      const renderedComponent = renderer.render(component);

      expect(renderedComponent).toMatchSnapshot();
    });

    it('should match snapshot with ie < 9', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <Css
          {...defaultProps}
          browser={{
            name: 'ie',
            major: '8',
          }}
        />
      );

      const renderedComponent = renderer.render(component);

      expect(renderedComponent).toMatchSnapshot();
    });

    it('should match snapshot with ie equals 9', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <Css
          {...defaultProps}
          browser={{
            name: 'ie',
            major: '9',
          }}
        />
      );

      const renderedComponent = renderer.render(component);

      expect(renderedComponent).toMatchSnapshot();
    });

    it('should match snapshot with firstRequestInlineStyles configuration', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <Css
          {...defaultProps}
          firstRequestInlineStyles
        />
      );

      const renderedComponent = renderer.render(component);

      expect(renderedComponent).toMatchSnapshot();
    });
  });
});
