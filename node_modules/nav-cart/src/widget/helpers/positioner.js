/**
 * Get the current outer dimensions of an element.
 * @param {HTMLElement} el A given HTMLElement.
 * @returns {Object}
 */
function getOuterDimensions(el) {
  const obj = el.getBoundingClientRect();

  return {
    width: (obj.right - obj.left),
    height: (obj.bottom - obj.top),
  };
}

function getRefOuterDimensions(refEl, targetEl) {
  const refData = getOuterDimensions(refEl);

  if (refEl.offsetParent === targetEl.offsetParent) {
    refData.left = refEl.offsetLeft;
    refData.top = refEl.offsetTop;
  }
  return refData;
}

/**
 * Based on Chico UI 2.x.x Positioner Component
 */
function positioner(targetEl, refEl) {
  const targetData = getOuterDimensions(targetEl);
  const refData = getRefOuterDimensions(refEl, targetEl);

  const offsetX = 2;
  const offsetY = 10;

  const top = Math.round(refData.top + refData.height) + offsetY;
  const left = Math.round((refData.left + refData.width) - targetData.width) + offsetX;

  targetEl.style.top = `${top}px`;
  targetEl.style.left = `${left}px`;
}

module.exports = positioner;
