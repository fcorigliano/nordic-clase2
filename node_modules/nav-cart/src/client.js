/* eslint-disable camelcase */
const { NODE_ENV } = process.env;
/**
 * Modules dependencies
 */
const restclient = require('frontend-restclient')({
  timeout: NODE_ENV === 'production' ? 500 : 5000,
  retry: {
    maxRetries: 0,
  },
  logErrors: false,
});

/**
 * Service interface
 */
class CartClient {
  static getConfig(context) {
    return restclient.get('/shopping-cart/config/sites', {
      cache: true,
      context,
    });
  }

  static getInfo(user_id, site_id, context) {
    return restclient.get('/frontend/carts/info/header', {
      params: {
        site_id,
        user_id,
      },
      context,
    });
  }

  static add(site_id, user_id, data, context) {
    return restclient.post('/frontend/carts/items', {
      data,
      params: {
        site_id,
        user_id,
      },
      context,
    });
  }
}

/**
 * Expose Service
 */
module.exports = CartClient;
