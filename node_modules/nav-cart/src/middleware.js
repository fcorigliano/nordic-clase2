const CartService = require('./service');

function fetchLayoutCartInfo(req, res, next) {
  const { user, platform } = req;
  const service = CartService({ user, siteId: platform.siteId });
  service.getInfo().then((response) => {
    res.locals.cartInfo = response.data || {};
    next();
  }).catch(() => {
    req.locals.cartInfo = {};
    next();
  });
}

module.exports = fetchLayoutCartInfo;
