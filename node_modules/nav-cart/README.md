# nav-cart

> Cart widget for frontend-layout

## Installation

```
npm install --save nav-cart
```

## Usage

### Cart & CartService for Node and React

The `Cart` component is the icon that shows header of ML. To use this component, first we need to fetch data to render the cart quantity data. To do that, we should use the `CartService` function to fetch the initial cart info data.

```js
const { CartService } = require("nav-cart");

/**
 * fetch initial cart data
 */
const user = req.user;
const platform = req.platform;
const service = CartService({ user, siteId: platform.siteId });
service
  .getInfo()
  .then((response) => {
    res.locals.cartInfo = response.data || {};
    next();
  })
  .catch(() => {
    req.locals.cartInfo = {};
    next();
  });
```

Then `Cart` component should be added as component on frontend-layout

```js
const { Cart } = require('nav-cart');
...
render() {
  const {cartInfo, device} =  this.props;
      return (
        {cartInfo ? <Cart data={cartInfo} url="https://www.mercadolibre.com.mx/gz/cart" isMobile={device.mobile} /> : null}
      );
}
```

### Widget usage for other languages

```
<script src="https://http2.mlstatic.com/resources/frontend/statics/ml-widgets/nav-cart/v1.1.2/CartWidget.js" type="text/javascript" />
<script type="text/javascript">
  new CartWidget({
    element: document.getElementById('nav-cart'), //
    endpoints: {
      get: 'https://www.mercadolibre.com.mx/gz/cart/info', //url to endpoint to get cart info
      post: 'https://www.mercadolibre.com.mx/gz/cart/api/item',//url to endpoint to add item to cart
    },
    link: 'https://www.mercadolibre.com.mx/gz/cart',//link to cart page
    isMobile: true,
    bus: freya, //Event emitter global
    locale: 'es'
  });
</script>
```

## Develop

1. Install dependencies:

```
npm install
```

2. Build the component:

```
npm run watch
```

3. Build the widget app:

```
npm run watch:widget
```

4. Build the example app:

```
npm run watch:examples
```

5. Run the example app:

```
npm run start-dev
```

6. Navigate to:

```
http://dev.mercadolibre.com.mx:8080/
```

## Deploy

1. Change package.json version -- use `-beta` to test package
2.

## License

Â© 2017 Mercado Libre
