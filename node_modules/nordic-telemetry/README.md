# nordic-telemetry

# Table of Contents

- [Description](#description)
- [Usage](#usage)
- [Analyze the data](#analyze-the-data)
- [Develop](#develop)
- [Contributing](#contributing)
- [Changelog](#changelog)

## Description

Collects telemetry data on general use of features provided by Nordic.

## Usage

### Install

```bash
npm install --save nordic-telemetry
```

### Example

```javascript
/**
 * Module dependencies
 */
const Telemetry = require('nordic-telemetry');

/**
 * Use Lib
 */
 const telemetry = new Telemetry({ envRaw: process.env });
 telemetry.trackEvent('HMR', 'Server');
```

### Methods

#### trackEvent(category, action, [label, value])

This method tracks an event in the [google analytics format](https://developers.google.com/analytics/devguides/collection/gtagjs/events).

**Options:**

- category (String, Required): Event category
- action (String, Required): Event action
- label (String): Event label
- value (Number): Event value

### Safe Mode

If when instantiating UniversalAnalyticsManager the property appName is not passed inside envRaw or if the creation of an instance of UniversalAnalytics fails, Telemetry will return a secure instance of UniversalAnalyticsManager (NoUniversalAnalyticsManager) that maintains the same api but does nothing, to avoid failures in production.

## Analyze the data

The information is tracked in Google Analytics in the project [MercadoLibre Other Sites > Nordic](https://analytics.google.com/analytics/web/#/report-home/a74595852w231434484p217561401).

You can see it on the [Telemetry dashboard](https://datastudio.google.com/u/0/reporting/311a2bce-12f1-46d1-8e28-5f3927ed2827/page/bxS9B?s=gFXK_MyYplQ
)

### Custom Dimensions

We send the following data as custom dimensions

#### AppName

The name of the application.

#### NodeVersion

The node version from which the track was sent.

#### NPMVersion

The npm version from which the track was sent.

## Develop

### Tests

#### Run all tests and generate the coverage report

```npm
npm test
```

#### Run tetsts in watching mode

```npm
npm run test:unit:watch
```

## Contributing

In order to contribute to this library, you must read [this guide](CONTRIBUTING.md) first.

## Changelog

We keep changes to our codebase [here](CHANGELOG.md)
