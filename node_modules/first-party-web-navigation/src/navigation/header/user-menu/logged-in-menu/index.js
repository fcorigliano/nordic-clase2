const React = require('react');
const PropTypes = require('prop-types');
const types = require('../../../types');
const UserMenuWidget = require('../../../widgets/user-menu');

const namespace = 'fp-nav-logged-in-menu';

const LoggedInMenu = (props) => {
  const {
    userName,
    links,
    myAccountText,
  } = props;
  const hasLinks = links && !!links.length;
  return (
    <div className={namespace}>
      <div className={`${namespace}__trigger`}>
        <div className={`${namespace}__trigger-element`}>{userName}</div>
        {hasLinks && <i className={`${namespace}__trigger-element ${namespace}__trigger-element--chevron`} />}
      </div>
      {hasLinks && (
        <>
          <div className={`${namespace}__logged-options`}>
            <span className={`${namespace}__tail`} />
            <div className={`${namespace}__options`}>
              <div className={`${namespace}__option`}>
                <div className={`${namespace}__options-header`}>{myAccountText}</div>
                {
                  links.map(link => (
                    <a className={`${namespace}__options-link`} href={link.link}>{link.name}</a>
                  ))
                }
              </div>
            </div>
          </div>
          <UserMenuWidget />
        </>
      )}
    </div>
  );
};

LoggedInMenu.propTypes = {
  userName: PropTypes.string.isRequired,
  myAccountText: PropTypes.string.isRequired,
  links: PropTypes.arrayOf(PropTypes.shape(types.linkType)),
};

LoggedInMenu.defaultProps = {
  links: [],
};

module.exports = LoggedInMenu;

