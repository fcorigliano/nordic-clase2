{"version":3,"file":"perfill-agent.min.js","sources":["../../src/agent/support.js","../../src/agent/subscriptions.js","../../src/constants/initiatives.js","../../src/constants/commons.js","../../src/constants/web-vitals.js","../../src/constants/page-render.js","../../src/agent/utils/spread.js","../../src/constants/availability.js","../../src/constants/cdn-health.js","../../src/constants/a11y.js","../../src/agent/utils/pick.js","../../src/constants/metrics.js","../../src/agent/builder/web-vitals.js","../../src/agent/builder/page-render.js","../../src/agent/utils/replace-all.js","../../src/agent/config.js","../../src/agent/builder/commons.js","../../src/agent/builder/a11y.js","../../src/agent/builder/availability.js","../../src/agent/builder/cdn-health.js","../../src/agent/builder/index.js","../../src/agent/utils/send.js","../../src/agent/collector.js","../../src/agent/monitors/device-info.js","../../src/agent/monitors/connection-info.js","../../src/agent/utils/number.js","../../src/agent/monitors/navigation-timing.js","../../node_modules/perfume.js/src/config.ts","../../node_modules/perfume.js/src/constants.ts","../../node_modules/perfume.js/src/isSupported.ts","../../node_modules/perfume.js/src/getNetworkInformation.ts","../../node_modules/perfume.js/src/isLowEnd.ts","../../node_modules/perfume.js/src/onVisibilityChange.ts","../../node_modules/perfume.js/src/utils.ts","../../node_modules/perfume.js/src/vitalsScore.ts","../../node_modules/perfume.js/src/reportPerf.ts","../../node_modules/perfume.js/src/getNavigatorInfo.ts","../../node_modules/perfume.js/src/log.ts","../../node_modules/perfume.js/src/metrics.ts","../../node_modules/perfume.js/src/cumulativeLayoutShift.ts","../../node_modules/perfume.js/src/observeInstances.ts","../../node_modules/perfume.js/src/performanceObserver.ts","../../node_modules/perfume.js/src/firstInput.ts","../../node_modules/perfume.js/src/totalBlockingTime.ts","../../node_modules/perfume.js/src/paint.ts","../../node_modules/perfume.js/src/resourceTiming.ts","../../node_modules/perfume.js/src/observe.ts","../../node_modules/perfume.js/src/storageEstimate.ts","../../node_modules/perfume.js/src/perfume.ts","../../node_modules/perfume.js/src/getNavigationTiming.ts","../../node_modules/perfume.js/src/measure.ts","../../src/agent/monitors/perfume.js","../../src/agent/monitors/browser-info.js","../../src/agent/monitors/document-content.js","../../src/agent/initiatives/web-vitals.js","../../src/constants/client-cookies.js","../../src/agent/triggers/client-cookies.js","../../src/agent/initiatives/client-cookies.js","../../src/agent/triggers/page-render.js","../../src/agent/initiatives/page-render.js","../../src/agent/utils/anonymize-dom.js","../../src/agent/monitors/a11y.js","../../src/agent/monitors/window-info.js","../../src/agent/initiatives/a11y.js","../../src/agent/triggers/availability.js","../../src/agent/monitors/availability-resources.js","../../src/agent/monitors/availability-entries.js","../../src/agent/initiatives/availability.js","../../src/agent/triggers/cdn-health.js","../../src/agent/monitors/pixel-info.js","../../src/agent/monitors/duration-info.js","../../src/agent/initiatives/cdn-health.js","../../src/agent/initiatives/traffic-health.js","../../src/agent/initiatives/index.js","../../src/agent/index.js","../../src/constants/agent.js","../../src/index.js"],"sourcesContent":["const isBrowserEnvironment = () => (\n  typeof window !== 'undefined'\n);\n\nconst supportsFetchApi = () => (\n  'fetch' in window\n);\n\nconst supportsNavigatorApi = () => (\n  'navigator' in window\n);\n\nconst supportsSendBeaconApi = () => supportsNavigatorApi() && ('sendBeacon' in window.navigator);\n\nconst supportsPerformanceApi = () => (\n  'performance' in window\n);\n\nconst supportsMatchMediaApi = () => isBrowserEnvironment() && typeof window.matchMedia !== 'undefined';\n\nconst supportsEnvironment = isBrowserEnvironment;\n\nconst supportsBeaconOrFetch = () => supportsSendBeaconApi() || supportsFetchApi();\n\nconst supportsPreloadState = () => isBrowserEnvironment() && '__PRELOADED_STATE__' in window;\n\nconst supportsWeakSet = () => 'WeakSet' in window;\n\nmodule.exports = {\n  supportsEnvironment,\n  supportsNavigatorApi,\n  supportsPerformanceApi,\n  supportsBeaconOrFetch,\n  supportsFetchApi,\n  supportsMatchMediaApi,\n  supportsPreloadState,\n  supportsWeakSet,\n};\n","const initiativeData = {};\nconst initiativeDataSubscribers = {};\n\nconst subscribe = (initiativeKey, callback) => {\n  initiativeDataSubscribers[initiativeKey] = initiativeDataSubscribers[initiativeKey] || [];\n  initiativeDataSubscribers[initiativeKey].push(callback);\n\n  (initiativeData[initiativeKey] || []).map((data) => callback(data));\n  delete initiativeData[initiativeKey];\n};\n\nconst queue = (initiativeKey, data) => {\n  const subscribers = (initiativeDataSubscribers[initiativeKey] || []);\n  subscribers.forEach(subscriber => subscriber(data));\n\n  if (!subscribers.length) {\n    initiativeData[initiativeKey] = initiativeData[initiativeKey] || [];\n    initiativeData[initiativeKey].push(data);\n  }\n};\n\nmodule.exports = {\n  subscribe,\n  queue,\n};\n","module.exports = {\n  CLIENT_COOKIES: 'client-cookies',\n  WEB_VITALS: 'web-vitals',\n  PAGE_RENDER: 'page-render',\n  A11Y: 'a11y',\n  AVAILABILITY: 'availability',\n  CDN_HEALTH: 'cdn-health',\n  TRAFFIC_HEALTH: 'traffic-health',\n};\n","module.exports = {\n  endpoint: 'https://events.mercadolibre.com/v2/perf-metric',\n  deviceInfoMetrics: ['ram-size', 'cpu-cores'],\n  connectionInfoMetrics: ['network-type', 'network-speed', 'user-agent', 'save-data', 'rtt'],\n  clientInfo: ['name', 'version'],\n  tags: ['platform', 'site', 'application', 'device', 'webview', 'scope'],\n  browserInfoMetrics: ['d2id', 'url', 'dark-mode'],\n};\n","module.exports = require('./commons');\n","module.exports = require('./commons');\n","const arrayOperator = (chunks) => chunks.reduce((acc, chunk) => acc.concat(chunk), []);\n\nconst objectOperator = (chunks) => Object.keys(chunks).reduce((acc, key) => {\n  const data = chunks[key];\n  const chunk = typeof data === 'object' && !Array.isArray(data) && data !== null ? data : { [key]: data };\n  return Object.assign(acc, chunk);\n}, {});\n\nmodule.exports = { arrayOperator, objectOperator };\n","const commons = require('./commons');\nconst { objectOperator } = require('../agent/utils/spread');\n\n// https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types\nconst fileSupport = {\n  img: ['apng', 'avif', 'gif', 'jpg', 'jpeg', 'jfif', 'pjpeg', 'pjp', 'png', 'svg', 'webp'],\n  script: ['js'],\n  style: ['css'],\n};\n\n// Expressed to octets/bytes\nconst thresholdEntries = {\n  img: 250000,\n  script: 170000,\n  style: 50000,\n};\n\nmodule.exports = objectOperator([commons, { thresholdEntries, fileSupport }]);\n\n","module.exports = require('./commons');\n","const commons = require('./commons');\nconst { objectOperator } = require('../agent/utils/spread');\n\nmodule.exports = objectOperator([commons, { endpoint: 'https://events.mercadolibre.com/dom' }]);\n","const pick = (source = {}, keys = []) => keys.reduce((acc, key) => {\n  // eslint-disable-next-line no-prototype-builtins\n  if (source.hasOwnProperty(key)) {\n    acc[key] = source[key];\n  }\n  return acc;\n}, {});\n\nmodule.exports = pick;\n","module.exports = {\n  AVAILABILITY_FAILURE: 'failure',\n  AVAILABILITY_TRANSFER_SIZE: 'transfersize',\n  WINDOW_DOM: 'window-dom',\n  D2ID: 'd2id',\n  NETWORK_TYPE: 'network-type',\n  NETWORK_SPEED: 'network-speed',\n  USER_AGENT: 'user-agent',\n  RAM_SIZE: 'ram-size',\n  WINDOW_WIDTH: 'window-width',\n  WINDOW_HEIGHT: 'window-height',\n  LCP: 'lcp',\n  CLS: 'cls',\n  FCP: 'fcp',\n  FID: 'fid',\n  TBT: 'tbt',\n  TBT_FINAL: 'tbtFinal',\n  LCP_FINAL: 'lcpFinal',\n  CLS_FINAL: 'clsFinal',\n  TTFB: 'time-to-first-byte',\n  DNS_LOOKUP_TIME: 'dns-lookup-time',\n  DOWNLOAD_TIME: 'download-time',\n  FETCH_TIME: 'fetch-time',\n  HEADER_SIZE: 'header-size',\n  TOTAL_TIME: 'total-time',\n  WORKER_TIME: 'worker-time',\n  HYDRATE_COMPLETE: 'hydrate-complete',\n  HYDRATE_DURATION: 'hydrate-duration',\n  REDIRECT_COUNT: 'redirect-count',\n  DOM_COMPLETE: 'dom-complete',\n  DOM_INTERACTIVE: 'dom-interactive',\n  DOM_CONTENT_LOADED_END: 'dom-content-loaded-end',\n  DOM_CONTENT_LOADED_START: 'dom-content-loaded-start',\n  DOM_CONTENT_LOADED: 'dom-content-loaded',\n  ONLOAD: 'onload',\n  ONLOAD_END: 'onload-end',\n  ONLOAD_START: 'onload-start',\n  REQUEST_START: 'request-start',\n  RESPONSE_START: 'response-start',\n  RESPONSE_END: 'response-end',\n  RESPONSE_TIME: 'response-time',\n  NAVIGATION_TYPE: 'navigation-type',\n  INITIAL_CONTENT_SIZE: 'initial-content-size',\n  DARK_MODE: 'dark-mode',\n  REDUCED_MOTION: 'reduced-motion',\n  REDUCED_COLOR: 'reduced-contrast',\n  URL: 'url',\n  X_CDN: 'cdn',\n  DURATION_SUM: 'duration-sum',\n  RESOURCE_SIZE: 'resources-size',\n  RESOURCE_FAILURE: 'resources-failure',\n  RESOURCE_SUCCESS: 'resources-success',\n};\n","const pick = require('../utils/pick');\nconst { WEB_VITALS } = require('../../constants/initiatives');\nconst {\n  FCP, LCP, FID, CLS, TBT,\n  DNS_LOOKUP_TIME, DOWNLOAD_TIME, FETCH_TIME,\n  HEADER_SIZE, TTFB, TOTAL_TIME,\n  WORKER_TIME, REDIRECT_COUNT,\n  DOM_COMPLETE, DOM_INTERACTIVE, DOM_CONTENT_LOADED_END, DOM_CONTENT_LOADED_START, DOM_CONTENT_LOADED,\n  ONLOAD_END, ONLOAD_START, ONLOAD,\n  REQUEST_START, RESPONSE_START, RESPONSE_END, RESPONSE_TIME,\n  NAVIGATION_TYPE, INITIAL_CONTENT_SIZE, REDUCED_MOTION, REDUCED_COLOR,\n} = require('../../constants/metrics');\n\nconst metrics = [\n  FCP, LCP, FID, CLS, TBT,\n  DNS_LOOKUP_TIME, DOWNLOAD_TIME, FETCH_TIME,\n  HEADER_SIZE, TTFB, TOTAL_TIME,\n  WORKER_TIME, REDIRECT_COUNT,\n  DOM_COMPLETE, DOM_INTERACTIVE, DOM_CONTENT_LOADED_END, DOM_CONTENT_LOADED_START, DOM_CONTENT_LOADED,\n  ONLOAD_END, ONLOAD_START, ONLOAD,\n  REQUEST_START, RESPONSE_START, RESPONSE_END, RESPONSE_TIME,\n  NAVIGATION_TYPE, INITIAL_CONTENT_SIZE, REDUCED_MOTION, REDUCED_COLOR,\n];\nconst requiredMetrics = [FCP, LCP, CLS];\n\nconst preparePayload = (_, data) => {\n  const webVitalsMetrics = pick(data, metrics);\n\n  if (!Object.keys(webVitalsMetrics).length) {\n    throw new Error('Metrics not found');\n  }\n\n  const webVitalsMetricsKeys = Object.keys(webVitalsMetrics);\n  if (!requiredMetrics.every(metric => webVitalsMetricsKeys.indexOf(metric) !== -1)) {\n    throw new Error('Metrics missing');\n  }\n\n  return {\n    name: WEB_VITALS,\n    data: webVitalsMetrics,\n  };\n};\n\nmodule.exports = preparePayload;\n","const pick = require('../utils/pick');\nconst { PAGE_RENDER } = require('../../constants/initiatives');\nconst { HYDRATE_COMPLETE, HYDRATE_DURATION } = require('../../constants/metrics');\n\nconst metrics = [HYDRATE_COMPLETE, HYDRATE_DURATION];\n\nconst preparePayload = (settings, data) => {\n  const pageRenderMetrics = pick(data, metrics);\n\n  if (!Object.keys(pageRenderMetrics).length) {\n    throw new Error('Metrics not found');\n  }\n\n  return {\n    name: PAGE_RENDER,\n    data: pageRenderMetrics,\n  };\n};\n\nmodule.exports = preparePayload;\n","// eslint-disable-next-line max-len\nconst strReplaceAll = (needles, haystack) => needles.reduce((replacedText, needle) => replacedText.replace(new RegExp(needle.original, 'g'), needle.translated), haystack);\n\nmodule.exports = strReplaceAll;\n","const {\n  WEB_VITALS,\n  PAGE_RENDER,\n  A11Y,\n  AVAILABILITY,\n  CDN_HEALTH,\n} = require('../constants/initiatives');\nconst webVitals = require('../constants/web-vitals');\nconst pageRender = require('../constants/page-render');\nconst a11y = require('../constants/a11y');\nconst availability = require('../constants/availability');\nconst cdnHealth = require('../constants/cdn-health');\nconst commons = require('../constants/commons');\nconst { objectOperator } = require('./utils/spread');\n\nconst config = {\n  [WEB_VITALS]: webVitals,\n  [PAGE_RENDER]: pageRender,\n  [A11Y]: a11y,\n  [AVAILABILITY]: availability,\n  [CDN_HEALTH]: cdnHealth,\n  commons,\n};\n\nconst getConfiguration = (name, initiative = 'commons', defaultValue = null) => (name in config[initiative] ? config[initiative][name] : defaultValue);\n\nconst prepareConfiguration = (args) => {\n  const { platform, site, device, application, initiatives, scope, webview } = args;\n\n  // Check each args\n  if (!Array.isArray(initiatives)) {\n    return null;\n  }\n\n  if (platform && site && device && application && initiatives) {\n    const data = {\n      platform,\n      site,\n      device,\n      application,\n      webview,\n      initiatives: initiatives.map((i) => objectOperator({ i, sent: false })) };\n\n    if (scope) {\n      data.scope = scope;\n    }\n\n    return data;\n  }\n\n  return null;\n};\n\nmodule.exports = { prepareConfiguration, getConfiguration };\n","const pick = require('../utils/pick');\nconst strReplaceAll = require('../utils/replace-all');\nconst { objectOperator } = require('../utils/spread');\nconst { getConfiguration } = require('../config');\n\nconst COMMONS = 'commons';\n\nconst nativeApp = /^([a-zA-Z]+)-(iOS|Android|AndroidNoPS|SmartPOS)?(?:\\/|%2F)((?:\\d+\\.){2}\\d+)/;\nconst androidAlt = [\n  { original: 'SmartPOS', translated: 'Android' },\n  { original: 'AndroidNoPS', translated: 'Android' },\n];\n\n// eslint-disable-next-line no-undef\nconst prepareClientInfo = () => ({ 'client-info': { name: 'perfill-agent', version: '__perfillAgentVersion__' } });\n\nconst prepareTags = (settings, initiative = COMMONS) => ({\n  tags: pick(settings, getConfiguration('tags', initiative, [])),\n});\n\nconst prepareDeviceType = (data, settings) => {\n  const deviceData = pick(settings, ['device', 'webview']);\n  const isWebview = (deviceData.webview && deviceData.device === 'mobile') || false;\n  const ua = data['user-agent'] || '';\n  const deviceParsed = nativeApp.exec(ua);\n  const deviceNative = deviceParsed ? strReplaceAll(androidAlt, deviceParsed[2]).toLowerCase() : null;\n\n  if (deviceData.webview && !deviceNative) {\n    throw new Error('Unknown device native type');\n  }\n\n  const devicePlatform = isWebview ? 'webview' : 'web';\n  const deviceType = isWebview ? deviceNative : deviceData.device;\n\n  return `${devicePlatform}/${deviceType}`;\n};\n\nconst prepareEventTags = (data, settings, initiative = COMMONS) => {\n  const { tags } = prepareTags(settings, initiative);\n\n  return { tags: objectOperator({ tags, device: prepareDeviceType(data, settings) }) };\n};\n\nconst prepareDeviceInfo = (data, initiative = COMMONS) => ({\n  'device-info': pick(data, getConfiguration('deviceInfoMetrics', initiative, [])),\n});\n\nconst prepareConnectionInfo = (data, initiative = COMMONS) => ({\n  'connection-info': pick(data, getConfiguration('connectionInfoMetrics', initiative, [])),\n});\n\nconst prepareBrowserInfo = (data, initiative = COMMONS) => ({\n  'browser-info': pick(data, getConfiguration('browserInfoMetrics', initiative, [])),\n});\n\nmodule.exports = {\n  prepareTags,\n  prepareEventTags,\n  prepareDeviceInfo,\n  prepareClientInfo,\n  prepareConnectionInfo,\n  prepareBrowserInfo,\n};\n","const pick = require('../utils/pick');\nconst { A11Y } = require('../../constants/initiatives');\nconst { WINDOW_DOM, WINDOW_WIDTH, WINDOW_HEIGHT } = require('../../constants/metrics');\nconst { deviceInfoMetrics, connectionInfoMetrics, browserInfoMetrics } = require('../../constants/a11y');\nconst { prepareEventTags, prepareClientInfo } = require('./commons');\nconst { arrayOperator, objectOperator } = require('../utils/spread');\n\nconst metrics = [WINDOW_DOM, WINDOW_WIDTH, WINDOW_HEIGHT];\n\nconst preparePayload = (settings, data) => {\n  const { name, version } = prepareClientInfo()['client-info'];\n  const { tags } = prepareEventTags(data, settings, A11Y);\n\n  const metricsCollected = pick(data, arrayOperator([deviceInfoMetrics, connectionInfoMetrics, browserInfoMetrics, metrics]));\n\n  if (!Object.keys(metricsCollected).length) {\n    throw new Error('Metrics not found');\n  }\n\n  const a11yMetrics = objectOperator({ metricsCollected, tags, client_name: name, client_version: version });\n  const formData = [];\n\n  Object.keys(a11yMetrics).forEach((metric) => {\n    if (metric === 'window-dom') {\n      const blob = new Blob([a11yMetrics['window-dom']], { type: 'text/html' });\n      formData.push(['file', blob, 'dom.html']);\n      return;\n    }\n\n    formData.push([metric.replace('-', '_'), a11yMetrics[metric]]);\n  });\n\n  return {\n    name: A11Y,\n    data: formData,\n  };\n};\n\nmodule.exports = preparePayload;\n","const pick = require('../utils/pick');\nconst { AVAILABILITY } = require('../../constants/initiatives');\nconst { AVAILABILITY_FAILURE, AVAILABILITY_TRANSFER_SIZE } = require('../../constants/metrics');\n\nconst metrics = [AVAILABILITY_FAILURE, AVAILABILITY_TRANSFER_SIZE];\n\nconst preparePayload = (settings, data) => {\n  const collection = pick(data, metrics);\n\n  if (!Object.keys(collection).length) {\n    throw new Error('Metrics not found');\n  }\n\n  return {\n    name: AVAILABILITY,\n    data: {\n      [AVAILABILITY_FAILURE]: collection[AVAILABILITY_FAILURE],\n      [AVAILABILITY_TRANSFER_SIZE]: collection[AVAILABILITY_TRANSFER_SIZE],\n    },\n  };\n};\n\nmodule.exports = preparePayload;\n","const pick = require('../utils/pick');\nconst { objectOperator } = require('../utils/spread');\nconst { CDN_HEALTH } = require('../../constants/initiatives');\nconst {\n  DURATION_SUM, RESOURCE_SIZE, RESOURCE_FAILURE, RESOURCE_SUCCESS, X_CDN, AVAILABILITY_FAILURE,\n} = require('../../constants/metrics');\n\nconst metrics = [X_CDN, RESOURCE_SIZE, DURATION_SUM];\nconst requiredMetrics = [X_CDN];\n\nconst preparePayload = (settings, data) => {\n  const collection = pick(data, metrics);\n\n  if (!Object.keys(collection).length) {\n    throw new Error('Metrics not found');\n  }\n\n  const collectionKeys = Object.keys(collection);\n  if (!requiredMetrics.every(metric => collectionKeys.indexOf(metric) !== -1)) {\n    throw new Error('Metrics missing');\n  }\n\n  const failures = (data[AVAILABILITY_FAILURE] || []).length;\n  const success = collection[RESOURCE_SIZE] - failures;\n\n  return {\n    name: CDN_HEALTH,\n    data: objectOperator({\n      collection,\n      [RESOURCE_FAILURE]: failures,\n      [RESOURCE_SUCCESS]: success,\n    }),\n  };\n};\n\nmodule.exports = preparePayload;\n","const webVitals = require('./web-vitals');\nconst pageRender = require('./page-render');\nconst a11y = require('./a11y');\nconst availability = require('./availability');\nconst cdnHealth = require('./cdn-health');\nconst { WEB_VITALS, PAGE_RENDER, A11Y, AVAILABILITY, CDN_HEALTH } = require('../../constants/initiatives');\nconst { objectOperator } = require('../utils/spread');\nconst {\n  prepareEventTags,\n  prepareDeviceInfo,\n  prepareConnectionInfo,\n  prepareClientInfo,\n  prepareBrowserInfo,\n} = require('./commons');\n\nconst initiativesEnabled = {\n  [WEB_VITALS]: {\n    builder: webVitals,\n  },\n  [PAGE_RENDER]: {\n    builder: pageRender,\n  },\n  [A11Y]: {\n    builder: a11y,\n  },\n  [AVAILABILITY]: {\n    builder: availability,\n  },\n  [CDN_HEALTH]: {\n    builder: cdnHealth,\n  },\n};\n\nconst getInitiative = (initiative) => {\n  if (initiative.id in initiativesEnabled) {\n    return initiativesEnabled[initiative.id];\n  }\n  throw new Error('Initiative not found');\n};\n\nconst prepareInitiativePayload = (initiative, settings, data) => {\n  const { builder } = getInitiative(initiative);\n  return builder(settings, data);\n};\n\nconst prepareEventInfo = (initiative, settings, data) => {\n  try {\n    const initiativePayload = prepareInitiativePayload(initiative, settings, data);\n    const tags = prepareEventTags(data, settings);\n    return { 'event-info': objectOperator({ initiativePayload, tags }) };\n  } catch (e) {\n    return null;\n  }\n};\n\nconst preparePayload = (initiative, settings, data) => {\n  const eventInfo = prepareEventInfo(initiative, settings, data);\n  if (!eventInfo) {\n    return null;\n  }\n\n  const clientInfo = prepareClientInfo();\n  const deviceInfo = prepareDeviceInfo(data);\n  const connectionInfo = prepareConnectionInfo(data);\n  const browserInfo = prepareBrowserInfo(data);\n\n  return objectOperator({ clientInfo, eventInfo, deviceInfo, connectionInfo, browserInfo });\n};\n\nconst prepareFormData = (initiative, settings, data) => {\n  try {\n    const { data: initiativePayload } = prepareInitiativePayload(initiative, settings, data);\n\n    const formData = new FormData();\n    initiativePayload.forEach((field) => {\n      const [name, value, filename] = field;\n      if (filename) {\n        formData.append(name, value, filename);\n      } else {\n        formData.append(name, value);\n      }\n    });\n\n    return formData;\n  } catch (e) {\n    return null;\n  }\n};\n\nmodule.exports = { preparePayload, prepareFormData };\n","const sendWithFetch = (url, payload, keepalive = true) => {\n  window.fetch(url, { method: 'POST', body: payload, keepalive })\n    .then(response => response.text())\n    .catch(error => error);\n};\n\nconst getWithFetch = (url, options = {}) => window.fetch(url, options);\n\nconst beaconWithFetchFallback = (url, payload) => {\n  const payloadString = JSON.stringify(payload);\n  if (!(window.navigator && window.navigator.sendBeacon && window.navigator.sendBeacon(url, payloadString))) {\n    sendWithFetch(url, payloadString);\n  }\n};\n\nmodule.exports = {\n  beaconWithFetchFallback,\n  sendWithFetch,\n  getWithFetch,\n};\n","const { WEB_VITALS, PAGE_RENDER, A11Y, AVAILABILITY, CDN_HEALTH } = require('../constants/initiatives');\nconst { endpoint: webVitalsEndpoint } = require('../constants/web-vitals');\nconst { endpoint: pageRenderEndpoint } = require('../constants/page-render');\nconst { endpoint: availabilityEndpoint } = require('../constants/availability');\nconst { endpoint: cdnHealthEndpoint } = require('../constants/cdn-health');\nconst { endpoint: a11yEndpoint } = require('../constants/a11y');\nconst { preparePayload, prepareFormData } = require('./builder');\nconst { beaconWithFetchFallback, sendWithFetch } = require('./utils/send');\n\nconst metricsCollected = {};\n\nconst endpoints = {\n  [WEB_VITALS]: webVitalsEndpoint,\n  [PAGE_RENDER]: pageRenderEndpoint,\n  [A11Y]: a11yEndpoint,\n  [AVAILABILITY]: availabilityEndpoint,\n  [CDN_HEALTH]: cdnHealthEndpoint,\n};\n\nconst getMetricsCollected = () => metricsCollected;\n\nconst trackMetric = (key, value) => {\n  metricsCollected[key] = value;\n};\n\nconst appendMetric = (key, value) => {\n  (metricsCollected[key] = metricsCollected[key] || []).push(value);\n};\n\nconst sendMetrics = (initiative, settings, data) => {\n  const payload = preparePayload(initiative, settings, data);\n\n  if (!payload) {\n    return false;\n  }\n\n  beaconWithFetchFallback(endpoints[initiative.id], payload);\n  return true;\n};\n\nconst sendFormData = (initiative, settings, data) => {\n  const formData = prepareFormData(initiative, settings, data);\n  if (!formData) {\n    return false;\n  }\n\n  sendWithFetch(endpoints[initiative.id], formData, false);\n  return true;\n};\n\nmodule.exports = { trackMetric, appendMetric, getMetricsCollected, sendMetrics, sendFormData };\n","const { trackMetric } = require('../collector');\nconst { supportsNavigatorApi } = require('../support');\nconst { RAM_SIZE } = require('../../constants/metrics');\n\nconst deviceInformationMonitor = () => {\n  if (supportsNavigatorApi()) {\n    if (window.navigator.deviceMemory) {\n      trackMetric(RAM_SIZE, `${window.navigator.deviceMemory}`);\n    }\n    if (window.navigator.hardwareConcurrency) {\n      trackMetric('cpu-cores', `${window.navigator.hardwareConcurrency}`);\n    }\n  }\n};\n\nmodule.exports = deviceInformationMonitor;\n","const { trackMetric } = require('../collector');\nconst { supportsNavigatorApi } = require('../support');\nconst { NETWORK_SPEED, NETWORK_TYPE, USER_AGENT } = require('../../constants/metrics');\n\nconst connectionInformationMonitor = () => {\n  if (!supportsNavigatorApi()) {\n    return;\n  }\n  const { navigator } = window;\n  if (navigator.connection) {\n    if (navigator.connection.effectiveType) {\n      trackMetric(NETWORK_TYPE, navigator.connection.effectiveType);\n    }\n    if (navigator.connection.downlink) {\n      trackMetric(NETWORK_SPEED, `${navigator.connection.downlink}`);\n    }\n    if ('saveData' in navigator.connection) {\n      trackMetric('save-data', navigator.connection.saveData);\n    }\n    if (navigator.connection.rtt) {\n      trackMetric('rtt', `${navigator.connection.rtt}`);\n    }\n  }\n  if (navigator.userAgent) {\n    trackMetric(USER_AGENT, navigator.userAgent);\n  }\n};\n\nmodule.exports = connectionInformationMonitor;\n","const BIGQUERY_MAX_DECIMALS = 6;\n\nconst toFixedNumber = (value, fractionDigits = BIGQUERY_MAX_DECIMALS) => {\n  if (Number.isNaN(value) || !value || Number.isInteger(value) || typeof value === 'string') {\n    return value;\n  }\n\n  return parseFloat(value.toFixed(fractionDigits));\n};\n\nmodule.exports = { toFixedNumber, BIGQUERY_MAX_DECIMALS };\n","const { trackMetric } = require('../collector');\nconst { supportsPerformanceApi } = require('../support');\nconst { toFixedNumber } = require('../utils/number');\n\nconst {\n  REDIRECT_COUNT,\n  DOM_COMPLETE,\n  DOM_INTERACTIVE,\n  DOM_CONTENT_LOADED_END,\n  DOM_CONTENT_LOADED_START,\n  DOM_CONTENT_LOADED,\n  ONLOAD_END,\n  ONLOAD_START,\n  ONLOAD,\n  REQUEST_START,\n  RESPONSE_START,\n  RESPONSE_END,\n  RESPONSE_TIME,\n  NAVIGATION_TYPE,\n} = require('../../constants/metrics');\n\nconst navigationTimingMonitor = () => {\n  if (!supportsPerformanceApi()) {\n    return;\n  }\n  const [navigationTiming] = window.performance.getEntriesByType('navigation');\n  if (navigationTiming) {\n    const {\n      domComplete,\n      domContentLoadedEventEnd,\n      domContentLoadedEventStart,\n      domInteractive,\n      loadEventEnd,\n      loadEventStart,\n      redirectCount,\n      requestStart,\n      responseStart,\n      responseEnd,\n      type: navigationType,\n    } = navigationTiming;\n\n    if (redirectCount) {\n      trackMetric(REDIRECT_COUNT, redirectCount);\n    }\n    if (domComplete) {\n      trackMetric(DOM_COMPLETE, toFixedNumber(domComplete));\n    }\n    if (domInteractive) {\n      trackMetric(DOM_INTERACTIVE, toFixedNumber(domInteractive));\n    }\n    if (domContentLoadedEventEnd) {\n      trackMetric(DOM_CONTENT_LOADED_END, toFixedNumber(domContentLoadedEventEnd));\n    }\n    if (domContentLoadedEventStart) {\n      trackMetric(DOM_CONTENT_LOADED_START, toFixedNumber(domContentLoadedEventStart));\n    }\n    if (domContentLoadedEventStart && domContentLoadedEventEnd) {\n      trackMetric(DOM_CONTENT_LOADED, toFixedNumber(domContentLoadedEventEnd - domContentLoadedEventStart));\n    }\n    if (loadEventEnd) {\n      trackMetric(ONLOAD_END, toFixedNumber(loadEventEnd));\n    }\n    if (loadEventStart) {\n      trackMetric(ONLOAD_START, toFixedNumber(loadEventStart));\n    }\n    if (loadEventStart && loadEventEnd) {\n      trackMetric(ONLOAD, toFixedNumber(loadEventEnd - loadEventStart));\n    }\n    if (requestStart) {\n      trackMetric(REQUEST_START, toFixedNumber(requestStart));\n    }\n    if (responseStart) {\n      trackMetric(RESPONSE_START, toFixedNumber(responseStart));\n    }\n    if (responseEnd) {\n      trackMetric(RESPONSE_END, toFixedNumber(responseEnd));\n    }\n    if (responseStart && responseEnd) {\n      trackMetric(RESPONSE_TIME, toFixedNumber(responseEnd - responseStart));\n    }\n    if (navigationType) {\n      trackMetric(NAVIGATION_TYPE, navigationType);\n    }\n  }\n};\n\nmodule.exports = navigationTimingMonitor;\n","import { IPerfumeConfig } from './types';\n\nexport const config: IPerfumeConfig = {\n  // Metrics\n  isResourceTiming: false,\n  isElementTiming: false,\n  // Logging\n  maxTime: 30000,\n};\n","// Have private variable outside the class,\n// helps drastically reduce the library size\nexport const W = window;\nexport const C = W.console;\nexport const D = document;\nexport const WN = W.navigator;\nexport const WP = W.performance;\nexport const getDM = () => (WN as any).deviceMemory;\nexport const getHC = () => (WN as any).hardwareConcurrency;\n","import { WP } from './constants';\n\n/**\n * True if the browser supports the Navigation Timing API,\n * User Timing API and the PerformanceObserver Interface.\n * In Safari, the User Timing API (performance.mark()) is not available,\n * so the DevTools timeline will not be annotated with marks.\n * Support: developer.mozilla.org/en-US/docs/Web/API/Performance/mark\n * Support: developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver\n * Support: developer.mozilla.org/en-US/docs/Web/API/Performance/getEntriesByType\n */\nexport const isPerformanceSupported = (): boolean => {\n  return WP && !!WP.getEntriesByType && !!WP.now && !!WP.mark;\n};\n","import { WN } from './constants';\nimport { EffectiveConnectionType, IPerfumeNetworkInformation } from './types';\n\nexport let et: EffectiveConnectionType = '4g';\nexport let sd = false;\n\nexport const getNetworkInformation = (): IPerfumeNetworkInformation => {\n  if ('connection' in WN) {\n    const dataConnection = (WN as any).connection;\n    if (typeof dataConnection !== 'object') {\n      return {};\n    }\n    et = dataConnection.effectiveType;\n    sd = !!dataConnection.saveData;\n    return {\n      downlink: dataConnection.downlink,\n      effectiveType: dataConnection.effectiveType,\n      rtt: dataConnection.rtt,\n      saveData: !!dataConnection.saveData,\n    };\n  }\n  return {};\n};\n","import { getDM, getHC } from './constants';\nimport { EffectiveConnectionType } from './types';\n\nexport const getIsLowEndDevice = (): boolean => {\n  // If number of logical processors available to run threads <= 4\n  if (getHC() && getHC() <= 4) {\n    return true;\n  }\n  // If the approximate amount of RAM client device has <= 4\n  if (getDM() && getDM() <= 4) {\n    return true;\n  }\n  return false;\n};\n\nexport const getIsLowEndExperience = (\n  et: EffectiveConnectionType,\n  sd: boolean,\n): boolean => {\n  // If the effective type of the connection meaning\n  // one of 'slow-2g', '2g', '3g', or '4g' is !== 4g\n  switch (et) {\n    case 'slow-2g':\n      return true;\n      break;\n    case '2g':\n      return true;\n      break;\n    case '3g':\n      return true;\n      break;\n    default:\n      // Data Saver preference\n      return (getIsLowEndDevice() || sd);\n  }\n};\n","import { D } from './constants';\n\nexport const visibility = {\n  isHidden: false,\n};\n\n/**\n * From visibilitychange listener it saves only when\n * the page gets hidden, because it's important to not\n * use the wrong \"hidden\" value when send timing or logging.\n */\nexport const didVisibilityChange = function(cb: Function) {\n  if (D.hidden) {\n    cb();\n    visibility.isHidden = D.hidden;\n  }\n};\n","import { W } from './constants';\n\nexport const roundByFour = (num: number) => {\n  return parseFloat(num.toFixed(4));\n}\n\nexport const convertToKB = (bytes: number): number | null => {\n  if (typeof bytes !== 'number') {\n    return null;\n  }\n  return roundByFour(bytes / Math.pow(1024, 2));\n};\n\n/**\n * PushTask to requestIdleCallback\n */\nexport const pushTask = (cb: any): void => {\n  if ('requestIdleCallback' in W) {\n    (W as any).requestIdleCallback(cb, { timeout: 3000 });\n  } else {\n    cb();\n  }\n};\n","import { IPerfumeData, IVitalsScore } from './types';\n\nconst ttfbScore = [200, 500];\nconst fcpScore = [2000, 4000];\nconst lcpScore = [2500, 4000];\nconst fidcore = [100, 300];\nconst clsScore = [0.1, 0.25];\nconst tbtScore = [200, 600];\nconst ntbtScore = [200, 600];\n\nexport const webVitalsScore: Record<string, number[]> = {\n  ttfb: ttfbScore,\n  fp: fcpScore,\n  fcp: fcpScore,\n  lcp: lcpScore,\n  lcpFinal: lcpScore,\n  fid: fidcore,\n  cls: clsScore,\n  clsFinal: clsScore,\n  tbt: tbtScore,\n  ntbt: ntbtScore,\n};\n\nexport const getVitalsScore = (\n  measureName: string,\n  value: IPerfumeData,\n): IVitalsScore => {\n  if (!webVitalsScore[measureName]) {\n    return null;\n  }\n  if (value <= webVitalsScore[measureName][0]) {\n    return 'good';\n  }\n  return value <= webVitalsScore[measureName][1] ? 'needsImprovement' : 'poor';\n};\n","import { config } from './config';\nimport { getNavigatorInfo } from './getNavigatorInfo';\nimport { visibility } from './onVisibilityChange';\nimport { pushTask } from './utils';\nimport { getVitalsScore } from './vitalsScore';\n\n/**\n * Sends the User timing measure to analyticsTracker\n */\nexport const reportPerf = function(\n  measureName: string,\n  data: any,\n  customProperties?: object,\n): void {\n  pushTask(() => {\n    // Doesn't send timing when page is hidden\n    if (\n      (visibility.isHidden && measureName.indexOf('Final') < 0) ||\n      !config.analyticsTracker\n    ) {\n      return;\n    }\n    // Send metric to custom Analytics service\n    config.analyticsTracker({\n      metricName: measureName,\n      data,\n      eventProperties: customProperties || {},\n      navigatorInformation: getNavigatorInfo(),\n      vitalsScore: getVitalsScore(measureName, data),\n    });\n  });\n};\n","import { getDM, getHC, WN } from './constants';\nimport { et, sd } from './getNetworkInformation';\nimport { getIsLowEndDevice, getIsLowEndExperience } from './isLowEnd';\nimport { INavigatorInfo } from './types';\n\n/**\n * Information coming from window.navigator:\n * 1. Device Memory\n * 2. Hardware Concurency\n * 3. Status of the service worker:\n *     - controlled: a service worker is controlling the page\n *     - supported: the browser supports service worker\n *     - unsupported: the user's browser does not support service worker\n */\nexport const getNavigatorInfo = function(): INavigatorInfo {\n  if (WN) {\n    return {\n      deviceMemory: getDM() || 0,\n      hardwareConcurrency: getHC() || 0,\n      serviceWorkerStatus:\n        'serviceWorker' in WN\n          ? WN.serviceWorker.controller\n            ? 'controlled'\n            : 'supported'\n          : 'unsupported',\n      isLowEndDevice: getIsLowEndDevice(),\n      isLowEndExperience: getIsLowEndExperience(et, sd)\n    };\n  }\n  return {};\n};\n","import { config } from './config';\nimport { reportPerf } from './reportPerf';\nimport { roundByFour } from './utils';\n\nexport const logData = (\n  measureName: string,\n  metric: any,\n  customProperties?: object,\n): void => {\n  Object.keys(metric).forEach(key => {\n    if (typeof metric[key] === 'number') {\n      metric[key] = roundByFour(metric[key]);\n    }\n  });\n  // Sends the metric to an external tracking service\n  reportPerf(measureName, metric, customProperties);\n};\n\n/**\n * Dispatches the metric duration into internal logs\n * and the external time tracking service.\n */\nexport const logMetric = (duration: number, measureName: string, customProperties?: object): void => {\n  const duration2Decimal = roundByFour(duration);\n  if (duration2Decimal <= config.maxTime && duration2Decimal >= 0) {\n    // Sends the metric to an external tracking service\n    reportPerf(measureName, duration2Decimal, customProperties);\n  }\n};\n","import { IMetricMap, IPerfumeDataConsumption } from './types';\n\nexport const metrics: IMetricMap = {};\nexport const cls = {\n  value: 0,\n};\nexport const fcp = {\n  value: 0,\n};\nexport const lcp = {\n  value: 0,\n};\nexport const fcpEntryName = 'first-contentful-paint';\nexport const rt: { value: IPerfumeDataConsumption } = {\n  value: {\n    beacon: 0,\n    css: 0,\n    fetch: 0,\n    img: 0,\n    other: 0,\n    script: 0,\n    total: 0,\n    xmlhttprequest: 0,\n  },\n};\nexport const tbt = {\n  value: 0,\n};\nexport const ntbt = {\n  value: 0,\n};\n\n","import { cls } from './metrics';\nimport { IPerformanceEntry } from './types';\n\n/**\n * Detects new layout shift occurrences and updates the\n * `cumulativeLayoutShiftScore` variable.\n */\nexport const initLayoutShift = (performanceEntries: IPerformanceEntry[]) => {\n  const lastEntry = performanceEntries.pop();\n  // Only count layout shifts without recent user input.\n  if (lastEntry && !lastEntry.hadRecentInput && lastEntry.value) {\n    cls.value += lastEntry.value;\n  }\n};\n","import { IPerfObservers } from './types';\n\nexport const perfObservers: IPerfObservers = {};\n","import { C } from './constants';\nimport { perfObservers } from './observeInstances';\nimport { IPerformanceObserverType } from './types';\n\n/**\n * PerformanceObserver subscribes to performance events as they happen\n * and respond to them asynchronously.\n */\nexport const po = (\n  eventType: IPerformanceObserverType,\n  cb: (performanceEntries: any[]) => void,\n): PerformanceObserver | null => {\n  try {\n    const perfObserver = new PerformanceObserver(entryList => {\n      cb(entryList.getEntries());\n    });\n    // Retrieve buffered events and subscribe to newer events for Paint Timing\n    perfObserver.observe({ type: eventType, buffered: true });\n    return perfObserver;\n  } catch (e) {\n    C.warn('Perfume.js:', e);\n  }\n  return null;\n};\n\nexport const poDisconnect = (observer: any) => {\n  if (perfObservers[observer]) {\n    perfObservers[observer].disconnect();\n  }\n  delete perfObservers[observer];\n}\n","import { logData, logMetric } from './log';\nimport { cls, lcp, rt, tbt } from './metrics';\nimport { perfObservers } from './observeInstances';\nimport { poDisconnect } from './performanceObserver';\nimport { PerformanceEventTiming } from './types';\n\nexport const initFirstInputDelay = (\n  performanceEntries: PerformanceEventTiming[],\n) => {\n  const lastEntry = performanceEntries.pop();\n  if (lastEntry) {\n    // Core Web Vitals FID logic\n    // Measure the delay to begin processing the first input event\n    logMetric(lastEntry.processingStart - lastEntry.startTime, 'fid', {\n      performanceEntry: lastEntry\n    });\n  }\n  // Disconnect this observer since callback is only triggered once\n  poDisconnect(1);\n  logMetric(lcp.value, 'lcp');\n  if (perfObservers[3] && typeof perfObservers[3].takeRecords === 'function') {\n    perfObservers[3].takeRecords();\n  }\n  logMetric(cls.value, 'cls');\n  // TBT has 10 second delay after FID\n  setTimeout(() => {\n    logMetric(tbt.value, 'tbt');\n    logData('dataConsumption', rt.value);\n  }, 10000);\n};\n","import { fcp, tbt, ntbt } from './metrics';\nimport { IPerformanceEntry } from './types';\n\nexport const initTotalBlockingTime = (\n  performanceEntries: IPerformanceEntry[],\n): void => {\n  performanceEntries.forEach(entry => {\n    if (\n      entry.name !== 'self' ||\n      entry.startTime < fcp.value\n    ) {\n      return;\n    }\n    const blockingTime = entry.duration - 50;\n    if (blockingTime > 0) {\n      tbt.value += blockingTime;\n      ntbt.value += blockingTime;\n    }\n  });\n};\n","import { logMetric } from './log';\nimport { fcp, fcpEntryName, lcp } from './metrics';\nimport { perfObservers } from './observeInstances';\nimport { po, poDisconnect } from './performanceObserver';\nimport { initTotalBlockingTime } from './totalBlockingTime';\nimport { IPerformanceEntry } from './types';\n\n/**\n * First Paint is essentially the paint after which\n * the biggest above-the-fold layout change has happened.\n */\nexport const initFirstPaint = (performanceEntries: IPerformanceEntry[]) => {\n  performanceEntries.forEach(entry => {\n    if (entry.name === 'first-paint') {\n      logMetric(entry.startTime, 'fp');\n    } else if (entry.name === fcpEntryName) {\n      fcp.value = entry.startTime;\n      logMetric(fcp.value, 'fcp');\n      perfObservers[4] = po('longtask', initTotalBlockingTime);\n      poDisconnect(0);\n    }\n  });\n};\n\nexport const initLargestContentfulPaint = (\n  performanceEntries: IPerformanceEntry[],\n) => {\n  const lastEntry = performanceEntries.pop();\n  if (lastEntry) {\n    lcp.value = lastEntry.renderTime || lastEntry.loadTime;\n  }\n};\n\nexport const initElementTiming = (\n  performanceEntries: IPerformanceEntry[],\n) => {\n  performanceEntries.forEach(entry => {\n    if (entry.identifier) {\n      logMetric(entry.startTime, entry.identifier);\n    }\n  });\n};\n","import { config } from './config';\nimport { logData } from './log';\nimport { rt } from './metrics';\nimport { IPerformanceEntry } from './types';\n\nexport const initResourceTiming = (performanceEntries: IPerformanceEntry[]) => {\n  performanceEntries.forEach(entry => {\n    if (config.isResourceTiming) {\n      logData('resourceTiming', entry);\n    }\n    if (entry.decodedBodySize && entry.initiatorType) {\n      const bodySize = entry.decodedBodySize / 1000;\n      rt.value[entry.initiatorType] += bodySize;\n      rt.value.total += bodySize;\n    }\n  });\n};\n","import { config } from './config';\nimport { initLayoutShift } from './cumulativeLayoutShift';\nimport { initFirstInputDelay } from './firstInput';\nimport { logMetric } from './log';\nimport { cls, lcp } from './metrics';\nimport { perfObservers } from './observeInstances';\nimport {\n  initElementTiming,\n  initFirstPaint,\n  initLargestContentfulPaint,\n} from './paint';\nimport { po, poDisconnect } from './performanceObserver';\nimport { initResourceTiming } from './resourceTiming';\n\nexport const initPerformanceObserver = (): void => {\n  perfObservers[0] = po('paint', initFirstPaint);\n  // FID needs to be initialized as soon as Perfume is available\n  // DataConsumption resolves after FID is triggered\n  perfObservers[1] = po('first-input', initFirstInputDelay);\n  perfObservers[2] = po('largest-contentful-paint', initLargestContentfulPaint);\n  // Collects KB information related to resources on the page\n  if (config.isResourceTiming) {\n    po('resource', initResourceTiming);\n  }\n  perfObservers[3] = po('layout-shift', initLayoutShift);\n  if (config.isElementTiming) {\n    po('element', initElementTiming);\n  }\n};\n\nexport const disconnectPerfObserversHidden = (): void => {\n  if (perfObservers[2]) {\n    logMetric(lcp.value, `lcpFinal`);\n    poDisconnect(2);\n  }\n  if (perfObservers[3]) {\n    if (typeof perfObservers[3].takeRecords === 'function') {\n      perfObservers[3].takeRecords();\n    }\n    logMetric(cls.value, `clsFinal`);\n    poDisconnect(3);\n  }\n};\n","import { logData } from './log';\nimport { convertToKB } from './utils';\n\n/**\n * The estimate() method of the StorageManager interface asks the Storage Manager\n * for how much storage the app takes up (usage),\n * and how much space is available (quota).\n */\nexport const reportStorageEstimate = (storageInfo: StorageEstimate) => {\n  const estimateUsageDetails =\n    'usageDetails' in storageInfo ? (storageInfo as any).usageDetails : {};\n  logData('storageEstimate', {\n    quota: convertToKB((storageInfo as any).quota),\n    usage: convertToKB((storageInfo as any).usage),\n    caches: convertToKB(estimateUsageDetails.caches),\n    indexedDB: convertToKB(estimateUsageDetails.indexedDB),\n    serviceWorker: convertToKB(estimateUsageDetails.serviceWorkerRegistrations),\n  });\n};\n","/*!\n * Perfume.js v7.0.0 (http://zizzamia.github.io/perfume)\n * Copyright 2022 Leonardo Zizzamia (https://github.com/Zizzamia/perfume.js/graphs/contributors)\n * Licensed under MIT (https://github.com/Zizzamia/perfume.js/blob/master/LICENSE)\n * @license\n */\nimport { config } from './config';\nimport { D, W, WN, WP } from './constants';\nimport { getNavigationTiming } from './getNavigationTiming';\nimport { getNetworkInformation } from './getNetworkInformation';\nimport { isPerformanceSupported } from './isSupported';\nimport { logData, logMetric } from './log';\nimport { performanceMeasure } from './measure';\nimport { metrics, ntbt } from './metrics';\nimport {\n  disconnectPerfObserversHidden,\n  initPerformanceObserver,\n} from './observe';\nimport { didVisibilityChange, visibility } from './onVisibilityChange';\nimport { reportStorageEstimate } from './storageEstimate';\nimport { IPerfumeOptions } from './types';\nimport { roundByFour } from './utils';\n\nlet ntbtTimeoutID = 0;\n\nexport default class Perfume {\n  v = '7.0.0';\n\n  constructor(options: IPerfumeOptions = {}) {\n    // Extend default config with external options\n    config.analyticsTracker = options.analyticsTracker;\n    config.isResourceTiming = !!options.resourceTiming;\n    config.isElementTiming = !!options.elementTiming;\n    config.maxTime = options.maxMeasureTime || config.maxTime;\n\n    // Exit from Perfume when basic Web Performance APIs aren't supported\n    if (!isPerformanceSupported()) {\n      return;\n    }\n    // Checks if use Performance or the EmulatedPerformance instance\n    if ('PerformanceObserver' in W) {\n      initPerformanceObserver();\n    }\n\n    // Init visibilitychange listener\n    if (typeof D.hidden !== 'undefined') {\n      // Opera 12.10 and Firefox 18 and later support\n      D.addEventListener(\n        'visibilitychange',\n        didVisibilityChange.bind(this, disconnectPerfObserversHidden),\n      );\n    }\n    const navigationTiming = getNavigationTiming();\n    // Log Navigation Timing\n    logData('navigationTiming', navigationTiming);\n    if (navigationTiming.timeToFirstByte) {\n      logMetric(navigationTiming.timeToFirstByte, 'ttfb');\n    }\n    // Log Network Information\n    logData('networkInformation', getNetworkInformation());\n    // Let's estimate our storage capacity\n    if (WN && WN.storage && typeof WN.storage.estimate === 'function') {\n      WN.storage.estimate().then(reportStorageEstimate);\n    }\n  }\n\n  /**\n   * Start performance measurement\n   */\n  start(markName: string): void {\n    if (!isPerformanceSupported() || metrics[markName]) {\n      return;\n    }\n    metrics[markName] = true;\n    // Creates a timestamp in the browser's performance entry buffer\n    WP.mark(`mark_${markName}_start`);\n    // Reset hidden value\n    visibility.isHidden = false;\n  }\n\n  /**\n   * End performance measurement\n   */\n  end(markName: string, customProperties = {}, doLogData = true): void {\n    if (!isPerformanceSupported() || !metrics[markName]) {\n      return;\n    }\n    // End Performance Mark\n    WP.mark(`mark_${markName}_end`);\n    delete metrics[markName];\n    const measure = performanceMeasure(markName);\n    if (doLogData) {\n      logData(markName, roundByFour(measure), customProperties);\n    }\n  }\n\n  /**\n   * End performance measurement after first paint from the beging of it\n   */\n  endPaint(markName: string, customProperties?: object): void {\n    setTimeout(() => {\n      this.end(markName, customProperties);\n    });\n  }\n\n  /**\n   * Removes the named mark from the browser's performance entry buffer.\n   */\n  clear(markName: string): void {\n    delete metrics[markName];\n    // Mobile Safari v13 and UC Browser v11\n    // don't support clearMarks yet\n    if (!WP.clearMarks) {\n      return;\n    }\n    WP.clearMarks(`mark_${markName}_start`);\n    WP.clearMarks(`mark_${markName}_end`);\n  }\n\n  /**\n   * NTBT = Navigation Total Blocking Time\n   *\n   * This metric measures the amount of time the application may be blocked\n   * from processing code during the 2s window after a user navigates\n   * from page A to page B.\n   *\n   * Because this library is navigation agnostic, we have this method\n   * to mark when the navigation starts.\n   *\n   * The NTBT metric is the summation of the blocking time of all long tasks\n   * in the 2s window after this method is invoked.\n   *\n   * If this method is called before the 2s window ends; it will trigger a new\n   * NTBT measurement and interrupt the previous one.\n   *\n   * Credit: Thank you Steven Lam for helping with this!\n   */\n  markNTBT(): void {\n    this.start('ntbt');\n    // Reset NTBT value\n    ntbt.value = 0;\n    clearTimeout(ntbtTimeoutID);\n    // @ts-ignore\n    ntbtTimeoutID = setTimeout(() => {\n      this.end('ntbt', {}, false);\n      logMetric(ntbt.value, `ntbt`);\n      ntbt.value = 0;\n    }, 2000);\n  }\n}\n","import { WP } from './constants';\nimport { isPerformanceSupported } from './isSupported';\nimport { IPerfumeNavigationTiming } from './types';\n\n/**\n * Navigation Timing API provides performance metrics for HTML documents.\n * w3c.github.io/navigation-timing/\n * developers.google.com/web/fundamentals/performance/navigation-and-resource-timing\n */\nexport const getNavigationTiming = (): IPerfumeNavigationTiming => {\n  if (!isPerformanceSupported()) {\n    return {};\n  }\n  // There is an open issue to type correctly getEntriesByType\n  // github.com/microsoft/TypeScript/issues/33866\n  const n = WP.getEntriesByType('navigation')[0] as any;\n  // In Safari version 11.2 Navigation Timing isn't supported yet\n  if (!n) {\n    return {};\n  }\n  const responseStart = n.responseStart;\n  const responseEnd = n.responseEnd;\n  // We cache the navigation time for future times\n  return {\n    // fetchStart marks when the browser starts to fetch a resource\n    // responseEnd is when the last byte of the response arrives\n    fetchTime: responseEnd - n.fetchStart,\n    // Service worker time plus response time\n    workerTime: n.workerStart > 0 ? responseEnd - n.workerStart : 0,\n    // Request plus response time (network only)\n    totalTime: responseEnd - n.requestStart,\n    // Response time only (download)\n    downloadTime: responseEnd - responseStart,\n    // Time to First Byte (TTFB)\n    timeToFirstByte: responseStart - n.requestStart,\n    // HTTP header size\n    headerSize: n.transferSize - n.encodedBodySize || 0,\n    // Measuring DNS lookup time\n    dnsLookupTime: n.domainLookupEnd - n.domainLookupStart,\n    // redirects could add latency to requests\n    redirectTime: n.redirectEnd - n.redirectStart,\n  };\n};\n","import { WP } from './constants';\n\n/**\n * Get the duration of the timing metric or -1\n * if there a measurement has not been made by the User Timing API\n */\nexport const performanceMeasure = (measureName: string): number => {\n  WP.measure(\n    measureName,\n    `mark_${measureName}_start`,\n    `mark_${measureName}_end`,\n  );\n  const entry = WP.getEntriesByName(measureName).pop();\n  if (entry && entry.entryType === 'measure') {\n    return entry.duration;\n  }\n  return -1;\n};\n","const Perfume = require('perfume.js');\nconst { trackMetric, sendMetrics, getMetricsCollected } = require('../collector');\nconst {\n  LCP_FINAL, CLS_FINAL, LCP, CLS, TBT, WORKER_TIME, TOTAL_TIME, TTFB,\n  HEADER_SIZE, FETCH_TIME, DOWNLOAD_TIME, DNS_LOOKUP_TIME, TBT_FINAL,\n} = require('../../constants/metrics');\n\nmodule.exports = (settings, initiative) => {\n  let perfumeSent = false;\n\n  // eslint-disable-next-line no-new\n  return new Perfume({\n    analyticsTracker: (options) => {\n      if (perfumeSent) {\n        return;\n      }\n\n      const { metricName, data } = options;\n      if (metricName === LCP_FINAL) trackMetric(LCP, data);\n      if (metricName === CLS_FINAL) trackMetric(CLS, data);\n      if (metricName === TBT_FINAL) trackMetric(TBT, data);\n      if (metricName === 'navigationTiming' && data && typeof data === 'object') {\n        trackMetric(DNS_LOOKUP_TIME, data.dnsLookupTime);\n        trackMetric(DOWNLOAD_TIME, data.downloadTime);\n        trackMetric(FETCH_TIME, data.fetchTime);\n        trackMetric(HEADER_SIZE, data.headerSize);\n        trackMetric(TTFB, data.timeToFirstByte);\n        trackMetric(TOTAL_TIME, data.totalTime);\n        trackMetric(WORKER_TIME, data.workerTime);\n      }\n      trackMetric(metricName, data);\n\n      perfumeSent = sendMetrics(initiative, settings, getMetricsCollected());\n    },\n  });\n};\n","const { trackMetric } = require('../collector');\nconst { supportsEnvironment, supportsMatchMediaApi } = require('../support');\nconst {\n  D2ID, DARK_MODE, REDUCED_MOTION, REDUCED_COLOR, URL,\n} = require('../../constants/metrics');\n\nconst D2ID_REGEXP = /(?:_d2id=)([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})/;\nfunction extractD2id(cookies) {\n  if (!cookies) {\n    return null;\n  }\n  const match = cookies.match(D2ID_REGEXP);\n  return match ? match[1] : match;\n}\n\nconst browserInformationMonitor = () => {\n  const d2id = extractD2id(typeof document !== 'undefined' && document.cookie);\n  if (d2id) {\n    trackMetric(D2ID, `${d2id}`);\n  }\n  if (supportsEnvironment()) {\n    trackMetric(URL, `${window.location.origin}${window.location.pathname}`);\n  }\n  if (supportsMatchMediaApi()) {\n    trackMetric(DARK_MODE, window.matchMedia('(prefers-color-scheme: dark)').matches);\n\n    const isReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches === true\n      || window.matchMedia('(prefers-reduced-motion: reduce)').matches === true;\n    trackMetric(REDUCED_MOTION, isReduced);\n\n    // https://github.com/w3c/csswg-drafts/issues/6036\n    // eslint-disable-next-line max-len\n    const contrastPrefers = window.matchMedia('(prefers-contrast: custom), (prefers-contrast: less), (prefers-contrast: more)').matches === true\n      || window.matchMedia('(forced-colors: active)').matches === true;\n    trackMetric(REDUCED_COLOR, contrastPrefers);\n  }\n};\n\nmodule.exports = browserInformationMonitor;\n","const { trackMetric } = require('../collector');\nconst { supportsPreloadState, supportsWeakSet } = require('../support');\nconst { INITIAL_CONTENT_SIZE } = require('../../constants/metrics');\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Cyclic_object_value#examples\nconst getCircularReplacer = () => {\n  const seen = new WeakSet();\n  return (key, value) => {\n    if (typeof value === 'object' && value !== null) {\n      if (seen.has(value)) {\n        return;\n      }\n      seen.add(value);\n    }\n    // eslint-disable-next-line consistent-return\n    return value;\n  };\n};\n\nconst documentContentMonitor = () => {\n  try {\n    if (supportsPreloadState() && supportsWeakSet()) {\n      const psString = JSON.stringify(window.__PRELOADED_STATE__, getCircularReplacer());\n      trackMetric(INITIAL_CONTENT_SIZE, psString.length);\n    }\n    // eslint-disable-next-line no-empty\n  } catch (e) {}\n};\n\nmodule.exports = documentContentMonitor;\n","const deviceInformationMonitor = require('../monitors/device-info');\nconst connectionInformationMonitor = require('../monitors/connection-info');\nconst navigationTimingMonitor = require('../monitors/navigation-timing');\nconst perfumeMonitor = require('../monitors/perfume');\nconst { prepareConfiguration } = require('../config');\nconst browserInformationMonitor = require('../monitors/browser-info');\nconst documentContentMonitor = require('../monitors/document-content');\n\nconst {\n  supportsPerformanceApi,\n  supportsBeaconOrFetch,\n} = require('../support');\n\nconst start = (args, initiative) => {\n  const settings = prepareConfiguration(args);\n  if (!settings) {\n    return;\n  }\n\n  try {\n    if (supportsPerformanceApi() && supportsBeaconOrFetch()) {\n      perfumeMonitor(settings, initiative);\n      deviceInformationMonitor();\n      connectionInformationMonitor();\n      browserInformationMonitor();\n      navigationTimingMonitor();\n      documentContentMonitor();\n    }\n    // eslint-disable-next-line no-empty\n  } catch (e) {}\n};\n\nmodule.exports = {\n  start,\n};\n","const commands = {\n  SET_COOKIE: 'set-cookie',\n};\n\nconst endpoint = 'https://events.mercadolibre.com/v2/client-cookies';\n\nmodule.exports = {\n  commands,\n  endpoint,\n};\n","const { CLIENT_COOKIES } = require('../../constants/initiatives');\nconst {\n  commands,\n  endpoint,\n} = require('../../constants/client-cookies');\nconst { subscribe } = require('../subscriptions');\nconst { beaconWithFetchFallback } = require('../utils/send');\nconst { objectOperator } = require('../utils/spread');\nconst {\n  prepareClientInfo,\n  prepareTags,\n} = require('../builder/commons');\n\nlet cookies = [];\n\nconst getSingleValue = (values) => {\n  if (values.length !== 1 || !values[0]) {\n    throw new Error();\n  }\n  return values[0];\n};\n\nconst metadata = {\n  path: getSingleValue,\n  domain: getSingleValue,\n  expires: getSingleValue,\n  samesite: getSingleValue,\n  'max-age': values => {\n    const parsed = parseInt(getSingleValue(values), 10);\n    if (Number.isNaN(parsed)) {\n      throw new Error();\n    }\n    return parsed;\n  },\n  secure: values => {\n    if (values.length) {\n      throw new Error();\n    }\n    return true;\n  },\n};\n\nconst addToUnknownData = (data, metadataString) => {\n  data['unknown-metadata'] = `${(data['unknown-metadata'] ? `${data['unknown-metadata']};` : '')}${metadataString}`;\n};\n\nconst getCookieData = (cookieString) => {\n  if (!cookieString) {\n    return null;\n  }\n\n  const data = cookieString\n    .split(';')\n    .reduce((temporalData, value, index) => {\n      const trimmedValue = value.trim();\n\n      // discard empty parts\n      if (!trimmedValue) {\n        return temporalData;\n      }\n\n      const assignmentParts = trimmedValue\n        .split('=')\n        .map(part => part.trim());\n\n      const key = assignmentParts[0];\n\n      if (!index) {\n        // Cookie key = cookie value\n        if (key && assignmentParts.length === 2) {\n          temporalData.name = key;\n        }\n        return temporalData;\n      }\n\n      const lowercasedKey = key.toLowerCase();\n      const metadataFormatter = metadata[lowercasedKey];\n      if (metadataFormatter) {\n        try {\n          temporalData[lowercasedKey] = metadataFormatter(assignmentParts.slice(1));\n        } catch (e) {\n          addToUnknownData(temporalData, value);\n        }\n      } else {\n        addToUnknownData(temporalData, value);\n      }\n\n      return temporalData;\n    }, {\n      name: null,\n      path: null,\n      domain: null,\n      'max-age': null,\n      expires: null,\n      samesite: null,\n      secure: null,\n      'unknown-metadata': null,\n    });\n\n  return data.name\n    ? data\n    : null;\n};\n\nconst getRequestIdleCallback = window.requestIdleCallback || (callback => setTimeout(callback, 200));\n\nlet subscribedToPageUnload = false;\nconst subscribeToPageUnload = (settings) => {\n  const visibilityChangeHandler = () => {\n    if (window.document.visibilityState === 'hidden') {\n      const clientInfo = prepareClientInfo();\n      const tags = prepareTags(settings);\n      beaconWithFetchFallback(endpoint, objectOperator({ clientInfo, tags, cookies }));\n      cookies = [];\n\n      window.document.removeEventListener('visibilitychange', visibilityChangeHandler);\n      subscribedToPageUnload = false;\n    }\n  };\n\n  if (!subscribedToPageUnload) {\n    // TODO - listen to pagehide on safari? https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilitychange_event\n    window.document.addEventListener('visibilitychange', visibilityChangeHandler);\n    subscribedToPageUnload = true;\n  }\n};\n\nconst setCookieHandler = (cookieValue, settings) => {\n  const data = getCookieData(cookieValue);\n  if (data) {\n    cookies.push(data);\n    subscribeToPageUnload(settings);\n  }\n};\n\nconst commandHandlers = {\n  [commands.SET_COOKIE]: setCookieHandler,\n};\n\nconst monitor = (settings) => {\n  subscribe(CLIENT_COOKIES, (commandData) => {\n    if (commandData && commandHandlers[commandData.type]) {\n      getRequestIdleCallback(() => commandHandlers[commandData.type](commandData.data, settings));\n    }\n  });\n};\n\nmodule.exports = monitor;\n","const clientCookiesMonitor = require('../triggers/client-cookies');\nconst { supportsBeaconOrFetch } = require('../support');\n\nconst start = settings => {\n  try {\n    if (supportsBeaconOrFetch()) {\n      clientCookiesMonitor(settings);\n    }\n    // eslint-disable-next-line no-empty\n  } catch (e) {}\n};\n\nmodule.exports = {\n  start,\n};\n","const { PAGE_RENDER } = require('../../constants/initiatives');\nconst { trackMetric, sendMetrics, getMetricsCollected } = require('../collector');\nconst { subscribe } = require('../subscriptions');\n\nconst getRequestIdleCallback = window.requestIdleCallback || (callback => setTimeout(callback, 200));\n\nconst eventName = 'pageRenderEvent';\nlet subscribedToPageUnload = false;\nconst subscribeToPageUnload = (settings) => {\n  const pageRenderEventHandler = () => {\n    if (window.document.visibilityState === 'hidden') {\n      sendMetrics({ id: PAGE_RENDER }, settings, getMetricsCollected());\n\n      window.document.removeEventListener(eventName, pageRenderEventHandler);\n      subscribedToPageUnload = false;\n    }\n  };\n\n  if (!subscribedToPageUnload) {\n    // TODO - listen to pagehide on safari? https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilitychange_event\n    window.document.addEventListener(eventName, pageRenderEventHandler);\n    subscribedToPageUnload = true;\n  }\n\n  const visibilityChangeHandler = () => {\n    const event = new window.Event(eventName);\n    window.document.dispatchEvent(event);\n  };\n  window.document.addEventListener('visibilitychange', visibilityChangeHandler);\n};\n\nconst setPageRenderHandler = (commandData, settings) => {\n  commandData.forEach((data) => {\n    trackMetric(data.metric, data.value);\n  });\n  subscribeToPageUnload(settings);\n};\n\nconst monitor = (settings) => {\n  subscribe(PAGE_RENDER, (commandData) => {\n    if (commandData) {\n      getRequestIdleCallback(() => setPageRenderHandler(commandData, settings));\n    }\n  });\n};\n\nmodule.exports = monitor;\n","const pageRenderMonitor = require('../triggers/page-render');\nconst deviceInformationMonitor = require('../monitors/device-info');\nconst connectionInformationMonitor = require('../monitors/connection-info');\nconst { prepareConfiguration } = require('../config');\nconst browserInformationMonitor = require('../monitors/browser-info');\nconst { supportsBeaconOrFetch } = require('../support');\n\nconst start = args => {\n  const settings = prepareConfiguration(args);\n  if (!settings) {\n    return;\n  }\n\n  try {\n    if (supportsBeaconOrFetch()) {\n      deviceInformationMonitor();\n      connectionInformationMonitor();\n      pageRenderMonitor(settings);\n      browserInformationMonitor();\n    }\n    // eslint-disable-next-line no-empty\n  } catch (e) {}\n};\n\nmodule.exports = {\n  start,\n};\n","const { arrayOperator } = require('./spread');\nconst strReplaceAll = require('./replace-all');\n\n// eslint-disable-next-line max-len\nconst characters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];\nconst ignoredTags = {\n  STYLE: true,\n  IFRAME: true,\n  SCRIPT: true,\n  svg: true,\n  path: true,\n};\nconst suppressByClassNames = {\n  'data-hj-suppress': true,\n  'data-hj-suppressed': true,\n  'data-hj-masked': true,\n  'data-pii-mask': true,\n  'nav-header-username': true,\n};\nconst suppressFields = {\n  address: true,\n  address1: true,\n  address2: true,\n  addressline1: true,\n  addressline2: true,\n  cell: true,\n  cellphone: true,\n  dateofbirth: true,\n  dob: true,\n  email: true,\n  familyname: true,\n  firstname: true,\n  fullname: true,\n  lastname: true,\n  firstName: true,\n  fullName: true,\n  lastName: true,\n  phone: true,\n  postalcode: true,\n  postcode: true,\n  surname: true,\n  tel: true,\n  telephone: true,\n  username: true,\n  zip: true,\n  zipcode: true,\n  nationalinsurancenumber: true,\n  nin: true,\n  ppsn: true,\n  security: true,\n  securitynum: true,\n  socialsec: true,\n  socialsecuritynumber: true,\n  socsec: true,\n  ssn: true,\n  authpw: true,\n  contrasena: true,\n  contrasenya: true,\n  pass: true,\n  passord: true,\n  password: true,\n  passwort: true,\n  pw: true,\n  pwd: true,\n  pword: true,\n  pwrd: true,\n  sapwd: true,\n  senha: true,\n  userpw: true,\n  userpwd: true,\n  cc: true,\n  cccsc: true,\n  cccvc: true,\n  cccvv: true,\n  ccexp: true,\n  ccexpiry: true,\n  ccexpmonth: true,\n  ccexpyear: true,\n  ccname: true,\n  ccnum: true,\n  ccnumber: true,\n  cctype: true,\n  creditcard: true,\n  csc: true,\n  cvc: true,\n  cvv: true,\n  exp: true,\n  accountnum: true,\n  accountnumber: true,\n  bic: true,\n  iban: true,\n  ibanaccountnum: true,\n  ibanaccountnumber: true,\n  pin: true,\n  pinnum: true,\n  secq: true,\n  secret: true,\n  secretq: true,\n  secretquestion: true,\n  securityq: true,\n  securityquestion: true,\n  sortcode: true,\n  swift: true,\n  buyerEmail: true,\n  nickname: true,\n  buyerFullName: true,\n  buyerPhone: true,\n  buyerId: true,\n  sellerId: true,\n  first_name: true,\n  last_name: true,\n  secure_email: true,\n  issuerName: true,\n  expirationMonth: true,\n  expirationYear: true,\n  lastFourDigits: true,\n};\n\nconst tagAttributes = {\n  A: ['href'],\n  INPUT: ['value', 'placeholder'],\n  TEXTAREA: ['value', 'placeholder'],\n  OPTION: ['label', 'value'],\n  PROGRESS: ['value'],\n  OPTGROUP: ['label'],\n  IMG: ['alt'],\n  DIV: ['title'],\n  DEFAULT: ['textContent'],\n};\n\nconst escapeRegExpFind = /[.*+?^${}()|[\\]\\\\]/g;\nconst escapeRegExpReplace = '\\\\$&';\nconst escapeRegExp = (string) => string.replace(escapeRegExpFind, escapeRegExpReplace);\n\nconst generateRandomText = (size) => {\n  const result = [];\n\n  // eslint-disable-next-line no-plusplus\n  for (let i = 0; i < size; i++) {\n    result.push(characters[Math.floor(Math.random() * characters.length)]);\n  }\n\n  return result.join('');\n};\n\nconst hasSuppressClassName = (el) => arrayOperator([el.classList || []]).some((className) => suppressByClassNames[className]);\n\nconst hasSuppressedNameOrIdRegEx = new RegExp('[\\\\s_-]+', 'g');\nconst hasSuppressedNameOrId = (el) => [el.name, el.id]\n  .map((value) => (value ? value.replace(hasSuppressedNameOrIdRegEx, '').toLowerCase() : value))\n  .some((field) => suppressFields[field]);\n\nconst hasCCNumOrSSNRegEx = /([+(]{0,2}\\d[-_ ()/]{0,4}){9,}/;\nconst hasCCNumOrSSN = (elValue) => hasCCNumOrSSNRegEx.test(elValue);\n\nconst hasDigitSequenceRegEx = /\\d+/;\nconst hasDigitSequence = (elValue) => hasDigitSequenceRegEx.test(elValue);\n\nconst hasEmailRegEx = /[^@\\s]+@[^@\\s]+\\.[^@\\s]+/;\nconst hasEmail = (elValue) => elValue.indexOf('@') > -1 && hasEmailRegEx.test(elValue);\n\nconst hasIPAddressRegExA = /(?:\\d{1,3}\\.){3}\\d{1,3}/;\nconst hasIPAddressRegExB = /(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/;\nconst hasIPAddress = (elValue) => hasIPAddressRegExA.test(elValue) || hasIPAddressRegExB.test(elValue);\n\nconst shouldSuppressData = (el, elValue = '') => hasSuppressClassName(el)\n  || hasSuppressedNameOrId(el)\n  || hasDigitSequence(elValue)\n  || hasCCNumOrSSN(elValue)\n  || hasEmail(elValue)\n  || hasIPAddress(elValue);\n\nconst extractMessages = (nodeList) => {\n  const messages = [];\n  arrayOperator([nodeList]).forEach((el) => {\n    if (ignoredTags[el.tagName]) return;\n    if ((el.children || []).length > 0) return;\n\n    const attrs = arrayOperator([tagAttributes.DEFAULT, (tagAttributes[el.tagName] || [])]);\n    const elementAttributes = attrs.reduce((list, attr) => {\n      const elAttr = el[attr];\n      const shouldSuppress = shouldSuppressData(el, elAttr);\n\n      if (elAttr && shouldSuppress) {\n        list.push(elAttr);\n      }\n\n      return list;\n    }, []);\n\n    if (elementAttributes.length) {\n      messages.push({\n        el: el.outerHTML,\n        attrs: elementAttributes,\n      });\n    }\n  });\n\n  return messages;\n};\n\nconst translationRegEx = new RegExp(/[a-zA-Z0-9.]/, 'i');\nconst getTranslation = (message) => (message.startsWith('http') ? '#' : message\n  .split(' ')\n  .map((chunk) => (\n    translationRegEx.test(chunk)\n      ? generateRandomText(chunk.length)\n      : chunk))\n  .join(' '));\n\nconst generateTranslations = (messages) => {\n  const translations = [\n    { original: '<iframe.*?>.*<\\\\/iframe>', translated: '' },\n    { original: '<noscript.*?>.*<\\\\/noscript>', translated: '' },\n    { original: '\"(addresses)\":+\\\\s*[[][\\\\s\\\\S]*?[]],*', translated: '' }, // Remove array elements\n    { original: '\"(phone|address|address|alternative_phone|identification)\":+\\\\s*[{][\\\\s\\\\S]*?[}],*', translated: '' }, // Remove string elements\n    { original: '(user)+\\\\s*:\\\\s*[{]+[\\\\s\\\\S]*?[}]+?', translated: '$1: {}' }, // Replace JS elements\n    { original: '[a-z0-9.+-]+@+[a-z0-9.+-]+', translated: 'removed@domain.now' }, // Replace email elements\n    { original: `\"(${Object.keys(suppressFields).join('|')})\"+\\\\s*:\\\\s*\"+[a-z0-9.+-\\\\s]+\"+?`, translated: '\"$1\":\"abc123\"' }, // Replace string elements\n    { original: `\"(${Object.keys(suppressFields).join('|')})\"+\\\\s*:\\\\s*[^\"][0-9]+`, translated: '\"$1\":123987546' }, // Replace numeric elements\n  ];\n  return messages.reduce((translationList, message) => {\n    const original = message.el;\n    message.attrs.forEach(attr => {\n      message.el = message.el.replace(attr, getTranslation(attr));\n    });\n    translationList.push({ original: escapeRegExp(original), translated: escapeRegExp(message.el) });\n    return translationList;\n  }, translations);\n};\n\nconst getElements = (selectors = '*') => document.body.querySelectorAll(selectors);\n\nconst anonymizeDOM = (dom) => {\n  const messages = extractMessages(getElements());\n  const translations = generateTranslations(messages);\n\n  return strReplaceAll(translations, dom);\n};\n\nmodule.exports = {\n  anonymizeDOM,\n  generateRandomText,\n  shouldSuppressData,\n  extractMessages,\n  generateTranslations,\n};\n","const { A11Y } = require('../../constants/initiatives');\nconst { WINDOW_DOM } = require('../../constants/metrics');\nconst { trackMetric, sendFormData, getMetricsCollected } = require('../collector');\nconst { anonymizeDOM } = require('../utils/anonymize-dom');\n\nconst getRequestIdleCallback = window.requestIdleCallback || (callback => setTimeout(callback, 200));\n\nlet subscribedToA11ySendEvent = false;\nconst subscribeToA11ySendEvent = (settings) => {\n  const a11ySendEventHandler = () => sendFormData({ id: A11Y }, settings, getMetricsCollected());\n\n  if (!subscribedToA11ySendEvent) {\n    subscribedToA11ySendEvent = a11ySendEventHandler();\n  }\n};\n\nconst prepareDOM = () => {\n  const { document } = window;\n  if (!document || !document.documentElement || !document.documentElement.outerHTML) {\n    throw new Error('DOM not found');\n  }\n  const dom = anonymizeDOM(document.documentElement.outerHTML);\n  trackMetric(WINDOW_DOM, dom);\n};\n\nconst setA11yHandler = (settings) => {\n  try {\n    prepareDOM();\n    subscribeToA11ySendEvent(settings);\n  } catch (e) {\n    // eslint-disable-next-line no-empty\n  }\n};\n\nconst monitor = (settings) => {\n  getRequestIdleCallback(() => setA11yHandler(settings));\n};\n\nmodule.exports = monitor;\n","const { trackMetric } = require('../collector');\nconst { WINDOW_HEIGHT, WINDOW_WIDTH } = require('../../constants/metrics');\n\nconst windowInformationMonitor = () => {\n  const { innerWidth, innerHeight } = window;\n\n  if (innerWidth) {\n    trackMetric(WINDOW_WIDTH, `${innerWidth}`);\n  }\n\n  if (innerHeight) {\n    trackMetric(WINDOW_HEIGHT, `${innerHeight}`);\n  }\n};\n\nmodule.exports = windowInformationMonitor;\n","const a11yMonitor = require('../monitors/a11y');\nconst deviceInformationMonitor = require('../monitors/device-info');\nconst connectionInformationMonitor = require('../monitors/connection-info');\nconst browserInformationMonitor = require('../monitors/browser-info');\nconst windowInformationMonitor = require('../monitors/window-info');\nconst { prepareConfiguration } = require('../config');\nconst { supportsFetchApi } = require('../support');\n\nconst start = args => {\n  const settings = prepareConfiguration(args);\n  if (!settings) {\n    return;\n  }\n\n  try {\n    if (supportsFetchApi()) {\n      deviceInformationMonitor();\n      connectionInformationMonitor();\n      windowInformationMonitor();\n      a11yMonitor(settings);\n      browserInformationMonitor();\n    }\n    // eslint-disable-next-line no-empty\n  } catch (e) {}\n};\n\nmodule.exports = {\n  start,\n};\n","const { AVAILABILITY } = require('../../constants/initiatives');\nconst { AVAILABILITY_FAILURE, AVAILABILITY_TRANSFER_SIZE } = require('../../constants/metrics');\nconst { appendMetric, sendMetrics, getMetricsCollected } = require('../collector');\nconst { subscribe } = require('../subscriptions');\n\nconst getRequestIdleCallback = window.requestIdleCallback || (callback => setTimeout(callback, 200));\n\nconst eventName = 'availabilityEvent';\nlet subscribedToPageUnload = false;\nconst subscribeToPageUnload = (settings) => {\n  const availabilityEventHandler = () => {\n    if (window.document.visibilityState === 'hidden') {\n      sendMetrics({ id: AVAILABILITY }, settings, getMetricsCollected());\n\n      window.document.removeEventListener(eventName, availabilityEventHandler);\n      subscribedToPageUnload = false;\n    }\n  };\n\n  if (!subscribedToPageUnload) {\n    // TODO - listen to pagehide on safari? https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilitychange_event\n    window.document.addEventListener(eventName, availabilityEventHandler);\n    subscribedToPageUnload = true;\n  }\n\n  const visibilityChangeHandler = () => {\n    const event = new window.Event(eventName);\n    window.document.dispatchEvent(event);\n  };\n  window.document.addEventListener('visibilitychange', visibilityChangeHandler);\n};\n\nconst setAvailabilityHandler = (settings) => {\n  subscribeToPageUnload(settings);\n};\n\nconst monitor = (settings) => {\n  subscribe(AVAILABILITY_FAILURE, (commandData) => {\n    if (commandData) {\n      appendMetric(AVAILABILITY_FAILURE, commandData);\n    }\n  });\n\n  subscribe(AVAILABILITY_TRANSFER_SIZE, (commandData) => {\n    if (commandData) {\n      appendMetric(AVAILABILITY_TRANSFER_SIZE, commandData);\n    }\n  });\n\n  getRequestIdleCallback(() => setAvailabilityHandler(settings));\n};\n\nmodule.exports = monitor;\n","const { AVAILABILITY_FAILURE } = require('../../constants/metrics');\nconst { queue } = require('../subscriptions');\n\nconst availabilityResourcesMonitor = () => {\n  const { _pfl } = window;\n  (_pfl || []).forEach((entry) => {\n    const [initiator, filename] = entry;\n\n    queue(AVAILABILITY_FAILURE, {\n      filename,\n      initiator,\n      value: 1,\n    });\n  });\n};\n\nmodule.exports = availabilityResourcesMonitor;\n","const { appendMetric } = require('../collector');\nconst { supportsPerformanceApi } = require('../support');\nconst { AVAILABILITY_TRANSFER_SIZE } = require('../../constants/metrics');\nconst { thresholdEntries, fileSupport } = require('../../constants/availability');\n\nconst getExtension = (filename) => filename.substring(filename.lastIndexOf('.') + 1, filename.length);\n\nconst getFileType = (filename) => {\n  const extension = getExtension(filename);\n  return Object.keys(fileSupport).find((type) => fileSupport[type].some((el) => el === extension));\n};\n\nconst getPerformanceResourceTimings = () => {\n  if (!supportsPerformanceApi()) return [];\n  const { performance } = window;\n  const extensionsSupported = Object.keys(fileSupport)\n    .reduce((list, type) => list.concat(fileSupport[type]), []);\n\n  return performance.getEntries()\n    .filter((entry) => extensionsSupported.some((el) => el === getExtension(entry.name)))\n    .filter((entry, index, arr) => arr.findIndex(el => (el.name === entry.name)) === index)\n    .map((entry) => {\n      const value = entry.encodedBodySize && entry.encodedBodySize > 0 ? entry.encodedBodySize : entry.transferSize;\n      return {\n        name: entry.name,\n        type: getFileType(entry.name),\n        value,\n      };\n    });\n};\n\nconst checkTransferSizeAvailability = (entry) => {\n  const { type, value, name } = entry;\n  const threshold = thresholdEntries[type] || 0;\n\n  if (value > threshold) {\n    appendMetric(AVAILABILITY_TRANSFER_SIZE, {\n      filename: name,\n      initiator: type,\n      value,\n    });\n  }\n};\n\nconst availabilityEntriesMonitor = () => {\n  const entries = getPerformanceResourceTimings();\n  entries.forEach(checkTransferSizeAvailability);\n};\n\nmodule.exports = availabilityEntriesMonitor;\n","const availabilityMonitor = require('../triggers/availability');\nconst deviceInformationMonitor = require('../monitors/device-info');\nconst connectionInformationMonitor = require('../monitors/connection-info');\nconst { prepareConfiguration } = require('../config');\nconst browserInformationMonitor = require('../monitors/browser-info');\nconst availabilityResourcesMonitor = require('../monitors/availability-resources');\nconst availabilityEntriesMonitor = require('../monitors/availability-entries');\nconst { supportsBeaconOrFetch } = require('../support');\n\nconst start = args => {\n  const settings = prepareConfiguration(args);\n  if (!settings) {\n    return;\n  }\n\n  try {\n    if (supportsBeaconOrFetch()) {\n      deviceInformationMonitor();\n      connectionInformationMonitor();\n      availabilityMonitor(settings);\n      availabilityResourcesMonitor();\n      availabilityEntriesMonitor();\n      browserInformationMonitor();\n    }\n    // eslint-disable-next-line no-empty\n  } catch (e) {}\n};\n\nmodule.exports = {\n  start,\n};\n","const { CDN_HEALTH } = require('../../constants/initiatives');\nconst { AVAILABILITY_FAILURE } = require('../../constants/metrics');\nconst { appendMetric, sendMetrics, getMetricsCollected } = require('../collector');\nconst { subscribe } = require('../subscriptions');\n\nconst getRequestIdleCallback = window.requestIdleCallback || (callback => setTimeout(callback, 200));\n\nconst eventName = 'cdnHealthEvent';\nlet subscribedToPageUnload = false;\nconst subscribeToPageUnload = (settings) => {\n  const cdnHealthEventHandler = () => {\n    if (window.document.visibilityState === 'hidden') {\n      sendMetrics({ id: CDN_HEALTH }, settings, getMetricsCollected());\n\n      window.document.removeEventListener(eventName, cdnHealthEventHandler);\n      subscribedToPageUnload = false;\n    }\n  };\n\n  if (!subscribedToPageUnload) {\n    // TODO - listen to pagehide on safari? https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilitychange_event\n    window.document.addEventListener(eventName, cdnHealthEventHandler);\n    subscribedToPageUnload = true;\n  }\n\n  const visibilityChangeHandler = () => {\n    const event = new window.Event(eventName);\n    window.document.dispatchEvent(event);\n  };\n  window.document.addEventListener('visibilitychange', visibilityChangeHandler);\n};\n\nconst setCDNHealthHandler = (settings) => {\n  subscribeToPageUnload(settings);\n};\n\nconst monitor = (settings) => {\n  subscribe(AVAILABILITY_FAILURE, (commandData) => {\n    if (commandData) {\n      appendMetric(AVAILABILITY_FAILURE, commandData);\n    }\n  });\n\n  getRequestIdleCallback(() => setCDNHealthHandler(settings));\n};\n\nmodule.exports = monitor;\n","const { trackMetric } = require('../collector');\nconst { supportsFetchApi } = require('../support');\nconst { getWithFetch } = require('../utils/send');\nconst { X_CDN } = require('../../constants/metrics');\n\nconst xCDN = {\n  g: 'google',\n  a: 'akamai',\n};\n\nconst pixelInformationMonitor = () => {\n  if (!supportsFetchApi()) {\n    return null;\n  }\n  return getWithFetch('https://http2.mlstatic.com/cdn/ping.gif')\n    .then((res) => {\n      if (res.headers.has('x-cdn')) {\n        const cdn = res.headers.get('x-cdn');\n        trackMetric(X_CDN, xCDN[cdn]);\n      }\n    })\n    .catch(error => error);\n};\n\nmodule.exports = pixelInformationMonitor;\n","const { trackMetric } = require('../collector');\nconst { supportsPerformanceApi } = require('../support');\nconst { toFixedNumber } = require('../utils/number');\nconst { DURATION_SUM, RESOURCE_SIZE } = require('../../constants/metrics');\n\nconst firstPartyDomain = 'http2.mlstatic.com';\n\nconst durationInformationMonitor = () => {\n  if (!supportsPerformanceApi()) {\n    return;\n  }\n  // First party Only\n  const resources = window.performance.getEntriesByType('resource')\n    // eslint-disable-next-line security/detect-non-literal-regexp\n    .filter((entry) => (new RegExp(firstPartyDomain)).test(entry.name));\n\n  const durationSum = resources.reduce((a, c) => {\n    // eslint-disable-next-line no-param-reassign\n    a += c.duration;\n    return a;\n  }, 0);\n\n  trackMetric(DURATION_SUM, toFixedNumber(durationSum));\n  trackMetric(RESOURCE_SIZE, resources.length);\n};\n\nmodule.exports = durationInformationMonitor;\n","const cdnHealthTrigger = require('../triggers/cdn-health');\nconst pixelInformationMonitor = require('../monitors/pixel-info');\nconst deviceInformationMonitor = require('../monitors/device-info');\nconst connectionInformationMonitor = require('../monitors/connection-info');\nconst { prepareConfiguration } = require('../config');\nconst browserInformationMonitor = require('../monitors/browser-info');\nconst availabilityResourcesMonitor = require('../monitors/availability-resources');\nconst durationInformationMonitor = require('../monitors/duration-info');\nconst { supportsBeaconOrFetch } = require('../support');\n\nconst start = args => {\n  const settings = prepareConfiguration(args);\n  if (!settings) {\n    return;\n  }\n\n  try {\n    if (supportsBeaconOrFetch()) {\n      pixelInformationMonitor();\n      availabilityResourcesMonitor();\n      cdnHealthTrigger(settings);\n      durationInformationMonitor();\n      deviceInformationMonitor();\n      connectionInformationMonitor();\n      browserInformationMonitor();\n    }\n    // eslint-disable-next-line no-empty\n  } catch (e) {}\n};\n\nmodule.exports = {\n  start,\n};\n","const { objectOperator } = require('../utils/spread');\nconst { AVAILABILITY, CDN_HEALTH } = require('../../constants/initiatives');\nconst { start: cdnHealthInitiative } = require('./cdn-health');\nconst { start: availabilityInitiative } = require('./availability');\n\nconst start = args => {\n  cdnHealthInitiative(objectOperator({ args, id: CDN_HEALTH }));\n  availabilityInitiative(objectOperator({ args, id: AVAILABILITY }));\n};\n\nmodule.exports = {\n  start,\n};\n","const {\n  WEB_VITALS,\n  CLIENT_COOKIES,\n  PAGE_RENDER,\n  A11Y,\n  AVAILABILITY,\n  CDN_HEALTH,\n  TRAFFIC_HEALTH,\n} = require('../../constants/initiatives');\nconst webVitals = require('./web-vitals');\nconst clientCookies = require('./client-cookies');\nconst pageRender = require('./page-render');\nconst a11y = require('./a11y');\nconst availability = require('./availability');\nconst cdnHealth = require('./cdn-health');\nconst trafficHealth = require('./traffic-health');\n\nmodule.exports = {\n  [WEB_VITALS]: webVitals,\n  [CLIENT_COOKIES]: clientCookies,\n  [PAGE_RENDER]: pageRender,\n  [A11Y]: a11y,\n  [AVAILABILITY]: availability,\n  [CDN_HEALTH]: cdnHealth,\n  [TRAFFIC_HEALTH]: trafficHealth,\n};\n","const { supportsEnvironment } = require('./support');\nconst { queue } = require('./subscriptions');\nconst { agentKey } = require('../constants/agent');\nconst initiatives = require('./initiatives');\n\nconst settings = {};\n\nconst initialize = () => (settings.initiatives || [])\n  .forEach((initiative) => {\n    if (initiative && initiative.id && initiatives[initiative.id]) {\n      initiatives[initiative.id].start(settings, initiative);\n    }\n  });\n\nconst deferInitialization = () => {\n  // eslint-disable-next-line no-unused-expressions\n  window.requestIdleCallback\n    ? window.requestIdleCallback(initialize, { timeout: 2000 })\n    : setTimeout(initialize, 500);\n};\n\nlet started = false;\nconst start = () => {\n  if (started || !supportsEnvironment()) {\n    return;\n  }\n  started = true;\n\n  if (window.document.readyState === 'complete') {\n    deferInitialization();\n  } else {\n    window.addEventListener('load', deferInitialization);\n  }\n};\n\nconst commands = {\n  set: (key, val) => {\n    settings[key] = val;\n  },\n  queue,\n  send: (cmd) => {\n    if (cmd in commands) {\n      commands[cmd]();\n    }\n  },\n  start,\n};\n\nconst executeCommand = (args) => {\n  try {\n    const action = args[0];\n    const actionInCommands = commands[action];\n    if (action && actionInCommands) {\n      // eslint-disable-next-line prefer-spread\n      actionInCommands.apply(null, [].slice.call(args, 1));\n    }\n  // eslint-disable-next-line no-empty\n  } catch (e) {\n  }\n};\n\nconst patchCommands = () => {\n  window[agentKey] = (args) => executeCommand(args);\n};\n\nconst perfill = () => {\n  const commandsQueue = (window[agentKey] || {}).q || [];\n  patchCommands();\n  try {\n    commandsQueue.forEach(executeCommand);\n  // eslint-disable-next-line no-empty\n  } catch (e) {\n  }\n};\n\nmodule.exports = perfill;\n","module.exports = {\n  agentKey: '_perfill',\n};\n","module.exports = require('./agent')();\n"],"names":["isBrowserEnvironment","window","supportsFetchApi","supportsNavigatorApi","support","supportsEnvironment","supportsPerformanceApi","supportsBeaconOrFetch","navigator","supportsMatchMediaApi","matchMedia","supportsPreloadState","supportsWeakSet","initiativeData","initiativeDataSubscribers","subscriptions","subscribe","initiativeKey","callback","push","map","data","queue","subscribers","forEach","subscriber","length","initiatives","CLIENT_COOKIES","WEB_VITALS","PAGE_RENDER","A11Y","AVAILABILITY","CDN_HEALTH","TRAFFIC_HEALTH","commons","endpoint","deviceInfoMetrics","connectionInfoMetrics","clientInfo","tags","browserInfoMetrics","webVitals","require$$0","pageRender","spread","arrayOperator","chunks","reduce","acc","chunk","concat","objectOperator","Object","keys","key","Array","isArray","assign","availability","thresholdEntries","img","script","style","fileSupport","cdnHealth","a11y","pick_1","source","hasOwnProperty","metrics","AVAILABILITY_FAILURE","AVAILABILITY_TRANSFER_SIZE","WINDOW_DOM","D2ID","NETWORK_TYPE","NETWORK_SPEED","USER_AGENT","RAM_SIZE","WINDOW_WIDTH","WINDOW_HEIGHT","LCP","CLS","FCP","FID","TBT","TBT_FINAL","LCP_FINAL","CLS_FINAL","TTFB","DNS_LOOKUP_TIME","DOWNLOAD_TIME","FETCH_TIME","HEADER_SIZE","TOTAL_TIME","WORKER_TIME","HYDRATE_COMPLETE","HYDRATE_DURATION","REDIRECT_COUNT","DOM_COMPLETE","DOM_INTERACTIVE","DOM_CONTENT_LOADED_END","DOM_CONTENT_LOADED_START","DOM_CONTENT_LOADED","ONLOAD","ONLOAD_END","ONLOAD_START","REQUEST_START","RESPONSE_START","RESPONSE_END","RESPONSE_TIME","NAVIGATION_TYPE","INITIAL_CONTENT_SIZE","DARK_MODE","REDUCED_MOTION","REDUCED_COLOR","URL","X_CDN","DURATION_SUM","RESOURCE_SIZE","RESOURCE_FAILURE","RESOURCE_SUCCESS","require$$1","requiredMetrics","_","webVitalsMetrics","pick","Error","webVitalsMetricsKeys","every","metric","indexOf","name","settings","pageRenderMetrics","replaceAll","needles","haystack","replacedText","needle","replace","RegExp","original","translated","config","WEB_VITALS$3","PAGE_RENDER$4","A11Y$5","AVAILABILITY$6","CDN_HEALTH$6","config_1","prepareConfiguration","args","platform","site","device","application","scope","webview","i","sent","getConfiguration","initiative","defaultValue","COMMONS","nativeApp","androidAlt","prepareTags","prepareDeviceType","deviceData","isWebview","ua","deviceParsed","exec","deviceNative","strReplaceAll","toLowerCase","prepareEventTags","prepareDeviceInfo","prepareClientInfo","version","prepareConnectionInfo","prepareBrowserInfo","require$$2","require$$3","require$$4","metricsCollected","a11yMetrics","client_name","client_version","formData","blob","Blob","type","collection","AVAILABILITY_FAILURE$4","AVAILABILITY_TRANSFER_SIZE$2","collectionKeys","failures","success","initiativesEnabled","WEB_VITALS$2","builder","PAGE_RENDER$3","A11Y$3","AVAILABILITY$4","CDN_HEALTH$4","prepareInitiativePayload","id","getInitiative","preparePayload","eventInfo","initiativePayload","e","prepareEventInfo","deviceInfo","connectionInfo","browserInfo","prepareFormData","FormData","field","value","filename","append","sendWithFetch","url","payload","keepalive","fetch","method","body","then","response","text","catch","error","send","beaconWithFetchFallback","payloadString","JSON","stringify","sendBeacon","getWithFetch","options","webVitalsEndpoint","pageRenderEndpoint","availabilityEndpoint","cdnHealthEndpoint","a11yEndpoint","require$$5","require$$6","require$$7","endpoints","WEB_VITALS$1","PAGE_RENDER$2","A11Y$2","AVAILABILITY$3","CDN_HEALTH$3","collector","trackMetric","appendMetric","getMetricsCollected","sendMetrics","sendFormData","deviceMemory","hardwareConcurrency","connection","effectiveType","downlink","saveData","rtt","userAgent","number","toFixedNumber","fractionDigits","Number","isNaN","isInteger","parseFloat","toFixed","BIGQUERY_MAX_DECIMALS","navigationTiming","performance","getEntriesByType","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","loadEventEnd","loadEventStart","redirectCount","requestStart","responseStart","responseEnd","navigationType","t","o","W","C","console","D","document","WN","WP","getDM","getHC","isPerformanceSupported","now","mark","et","sd","getIsLowEndDevice","getIsLowEndExperience","visibility","u","didVisibilityChange","cb","hidden","isHidden","roundByFour","num","convertToKB","bytes","Math","pow","fcpScore","lcpScore","clsScore","webVitalsScore","ttfb","fp","fcp","lcp","lcpFinal","fid","cls","clsFinal","tbt","ntbt","getVitalsScore","measureName","reportPerf","customProperties","analyticsTracker","metricName","eventProperties","navigatorInformation","serviceWorkerStatus","serviceWorker","controller","isLowEndDevice","isLowEndExperience","vitalsScore","requestIdleCallback","timeout","logData","logMetric","duration","duration2Decimal","maxTime","rt","beacon","css","other","total","xmlhttprequest","initLayoutShift","performanceEntries","lastEntry","pop","hadRecentInput","perfObservers","po","eventType","perfObserver","PerformanceObserver","entryList","getEntries","observe","buffered","warn","poDisconnect","observer","disconnect","initFirstInputDelay","processingStart","startTime","performanceEntry","takeRecords","setTimeout","initTotalBlockingTime","entry","blockingTime","initFirstPaint","initLargestContentfulPaint","renderTime","loadTime","initElementTiming","identifier","initResourceTiming","isResourceTiming","decodedBodySize","initiatorType","bodySize","disconnectPerfObserversHidden","reportStorageEstimate","storageInfo","estimateUsageDetails","usageDetails","quota","usage","caches","indexedDB","serviceWorkerRegistrations","ntbtTimeoutID","J","this","l","resourceTiming","isElementTiming","elementTiming","maxMeasureTime","addEventListener","bind","n","fetchTime","fetchStart","workerTime","workerStart","totalTime","downloadTime","timeToFirstByte","headerSize","transferSize","encodedBodySize","dnsLookupTime","domainLookupEnd","domainLookupStart","redirectTime","redirectEnd","redirectStart","dataConnection","storage","estimate","Perfume","markName","doLogData","measure","getEntriesByName","entryType","prototype","endPaint","_this","end","clearMarks","start","clearTimeout","D2ID_REGEXP","d2id","cookies","match","extractD2id","cookie","location","origin","pathname","matches","isReduced","contrastPrefers","documentContent","psString","__PRELOADED_STATE__","seen","WeakSet","has","add","getCircularReplacer","perfumeSent","perfumeMonitor","deviceInformationMonitor","connectionInformationMonitor","browserInformationMonitor","navigationTimingMonitor","documentContentMonitor","clientCookies","commands","SET_COOKIE","getSingleValue","values","metadata","path","domain","expires","samesite","parsed","parseInt","secure","addToUnknownData","metadataString","getRequestIdleCallback","subscribedToPageUnload","commandHandlers","cookieValue","cookieString","split","temporalData","index","trimmedValue","trim","assignmentParts","part","lowercasedKey","metadataFormatter","slice","getCookieData","visibilityChangeHandler","visibilityState","removeEventListener","subscribeToPageUnload","commandData","clientCookiesMonitor","eventName","setPageRenderHandler","pageRenderEventHandler","event","Event","dispatchEvent","pageRenderMonitor","characters","ignoredTags","STYLE","IFRAME","SCRIPT","svg","suppressByClassNames","suppressFields","address","address1","address2","addressline1","addressline2","cell","cellphone","dateofbirth","dob","email","familyname","firstname","fullname","lastname","firstName","fullName","lastName","phone","postalcode","postcode","surname","tel","telephone","username","zip","zipcode","nationalinsurancenumber","nin","ppsn","security","securitynum","socialsec","socialsecuritynumber","socsec","ssn","authpw","contrasena","contrasenya","pass","passord","password","passwort","pw","pwd","pword","pwrd","sapwd","senha","userpw","userpwd","cc","cccsc","cccvc","cccvv","ccexp","ccexpiry","ccexpmonth","ccexpyear","ccname","ccnum","ccnumber","cctype","creditcard","csc","cvc","cvv","exp","accountnum","accountnumber","bic","iban","ibanaccountnum","ibanaccountnumber","pin","pinnum","secq","secret","secretq","secretquestion","securityq","securityquestion","sortcode","swift","buyerEmail","nickname","buyerFullName","buyerPhone","buyerId","sellerId","first_name","last_name","secure_email","issuerName","expirationMonth","expirationYear","lastFourDigits","tagAttributes","A","INPUT","TEXTAREA","OPTION","PROGRESS","OPTGROUP","IMG","DIV","DEFAULT","escapeRegExpFind","escapeRegExp","string","generateRandomText","size","result","floor","random","join","hasSuppressedNameOrIdRegEx","hasCCNumOrSSNRegEx","hasDigitSequenceRegEx","hasEmailRegEx","hasIPAddressRegExA","hasIPAddressRegExB","shouldSuppressData","el","elValue","classList","some","className","hasSuppressClassName","hasSuppressedNameOrId","test","hasDigitSequence","hasCCNumOrSSN","hasEmail","hasIPAddress","extractMessages","nodeList","messages","tagName","children","elementAttributes","list","attr","elAttr","shouldSuppress","outerHTML","attrs","translationRegEx","generateTranslations","translations","translationList","message","startsWith","getTranslation","anonymizeDom","anonymizeDOM","dom","selectors","querySelectorAll","getElements","subscribedToA11ySendEvent","subscribeToA11ySendEvent","setA11yHandler","documentElement","prepareDOM","windowInfo","innerWidth","innerHeight","windowInformationMonitor","a11yMonitor","setAvailabilityHandler","availabilityEventHandler","availabilityResources","_pfl","initiator","getExtension","substring","lastIndexOf","getFileType","extension","find","checkTransferSizeAvailability","availabilityEntries","extensionsSupported","filter","arr","findIndex","getPerformanceResourceTimings","availabilityMonitor","availabilityResourcesMonitor","availabilityEntriesMonitor","setCDNHealthHandler","cdnHealthEventHandler","xCDN","g","a","pixelInfo","res","headers","cdn","get","durationInfo","resources","durationSum","c","pixelInformationMonitor","cdnHealthTrigger","durationInformationMonitor","cdnHealthInitiative","availabilityInitiative","trafficHealth","agentKey","initialize","deferInitialization","started","set","val","cmd","readyState","executeCommand","action","actionInCommands","apply","call","commandsQueue","q"],"mappings":"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"}