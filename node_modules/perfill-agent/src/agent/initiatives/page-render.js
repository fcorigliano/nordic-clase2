const pageRenderMonitor = require('../triggers/page-render');
const deviceInformationMonitor = require('../monitors/device-info');
const connectionInformationMonitor = require('../monitors/connection-info');
const { prepareConfiguration } = require('../config');
const browserInformationMonitor = require('../monitors/browser-info');
const { supportsBeaconOrFetch } = require('../support');

const start = args => {
  const settings = prepareConfiguration(args);
  if (!settings) {
    return;
  }

  try {
    if (supportsBeaconOrFetch()) {
      deviceInformationMonitor();
      connectionInformationMonitor();
      pageRenderMonitor(settings);
      browserInformationMonitor();
    }
    // eslint-disable-next-line no-empty
  } catch (e) {}
};

module.exports = {
  start,
};
