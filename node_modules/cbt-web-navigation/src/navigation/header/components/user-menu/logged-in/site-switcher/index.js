const React = require('react');
const PropTypes = require('prop-types');
const SiteSwitcherWidget = require('../../../../../widgets/site-switcher');
const SiteSwitcherOption = require('./option');
const siteSwitcherOptionProps = require('./option/props');
const types = require('../../../../../types');

const nameSpace = 'nav-header-cbt';

const SiteSwitcherOptions = (props) => {
  const { siteUsers, currentSiteId, logisticType } = props;

  return (
    <div id={`${nameSpace}__switcher`}>
      {
        siteUsers.map((siteUser, index) => (
          <SiteSwitcherOption {...siteSwitcherOptionProps(siteUser, index === siteUsers.length - 1, props)} />))
      }
      <SiteSwitcherWidget currentSite={`${currentSiteId}-${logisticType}`} />
    </div>
  );
};

SiteSwitcherOptions.propTypes = {
  siteUsers: PropTypes.arrayOf(PropTypes.shape(types.siteUserType)).isRequired,
  currentSiteId: PropTypes.string.isRequired,
  logisticType: PropTypes.string.isRequired,
  sites: PropTypes.objectOf(PropTypes.shape(types.siteType)).isRequired,
  logisticTypes: PropTypes.shape(types.logisticType).isRequired,
};

module.exports = SiteSwitcherOptions;
