const React = require('react');
const PropTypes = require('prop-types');
const Script = require('frontend-script');
const GroupedMenu = require('./grouped-menu');
const readClientFile = require('../../../utils/read-client-file');

const scriptContent = readClientFile('footer-access.js');

const namespace = 'nav-footer-access';
const FooterAccess = (props) => {
  const { title, groups } = props;

  /* eslint-disable react/no-array-index-key */
  return groups.length > 0 && (
    <>
      <input type="checkbox" id={`${namespace}-switch`} defaultChecked />
      <div className={namespace}>
        <label htmlFor={`${namespace}-switch`}>
          {title} <i className="nav-icon-chevron-up" />
        </label>

        <div className={`${namespace}-content`}>
          <div className="nav-bounds">
            {
              groups.map((group, index) => <GroupedMenu key={`group-${index}`} {...group} />)
            }
          </div>
        </div>

        <Script>
          {scriptContent}
        </Script>
      </div>
    </>
  );
};

FooterAccess.propTypes = {
  groups: PropTypes.array,
  title: PropTypes.string.isRequired,
};

FooterAccess.defaultProps = {
  groups: [],
};

module.exports = FooterAccess;
