const { getValue } = require('classified-navigation-config');
const logoProps = require('./components/logo/props');
const meliLabProps = require('./components/meli-lab/props');
const userMenuProps = require('./components/user-menu/props');
const searchboxProps = require('./components/searchbox/props');

const headerProps = (props) => {
  const {
    platform,
    type,
    cdn,
    internal,
    req,
  } = props;

  const iconsForLinks = getValue({
    key: 'mobileHeaderMenuIcons',
    platform,
    req,
  });

  return {
    type,
    internal,
    siteId: platform.siteId,
    isMobile: props.device.mobile || false,
    isDesktop: props.device.desktop || false,
    cdnLink: cdn.link,
    logo: logoProps(props),
    melilab: meliLabProps(props),
    userMenu: userMenuProps({
      ...props,
      icons: iconsForLinks,
    }),
    searchbox: searchboxProps(props),
  };
};

module.exports = headerProps;
