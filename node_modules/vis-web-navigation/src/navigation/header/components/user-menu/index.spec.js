const React = require('react');
const ShallowRenderer = require('react-test-renderer/shallow');
const UserMenu = require('.');

const baseProps = {
  navMenuSwitchId: 'nav-menu-header-switch',
  isMobile: true,
  isUserLoggedIn: true,
  user: {},
  loggedInMenu: {
    mobile: {
      userLinksSections: {
        links: [
          {
            link: {
              href: 'https://www.tucarro.com.ve',
            },
            name: 'Inicio',
            icon: 'nav-home-icon',
            selected: false,
            id: 'home',
          },
          {
            link: {
              href: 'https://www.tucarro.com.ve/ofertas',
            },
            name: 'Ofertas',
            icon: 'nav-deals-icon',
            selected: false,
            id: 'deals',
          },
        ] },
      welcome: {
        show: true,
        showAvatar: true,
        avatar: {},
        type: 'full',
        nickname: 'Test',
        fallbackMenu: {
          links: [{
            link: {
              href: 'https://www.tucarro.com.ve',
            },
            name: 'Inicio',
            icon: 'nav-home-icon',
            selected: false,
            id: 'home',
          },
          {
            link: {
              href: 'https://www.tucarro.com.ve/ofertas',
            },
            name: 'Ofertas',
            icon: 'nav-deals-icon',
            selected: false,
            id: 'deals',
          }],
        },
      },
    },
  },
};

describe('Classifieds Navigation', () => {
  describe('User Menu Component', () => {
    it('matches the default snapshot for user menu, in mobile and logged in user', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <UserMenu
          {...baseProps}
        />
      );

      expect(renderer.render(component)).toMatchSnapshot();
    });

    it('matches the default snapshot for user menu, in mobile and guest user', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <UserMenu
          {...baseProps}
          isUserLoggedIn={false}
          guestMenu={{
            mobile: {
              welcome: {},
              userLinksSections: {},
            },
          }}
        />
      );

      expect(renderer.render(component)).toMatchSnapshot();
    });

    it('matches the default snapshot for user menu, in desktop and logged in user', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <UserMenu
          {...baseProps}
          isDesktop
        />
      );

      expect(renderer.render(component)).toMatchSnapshot();
    });

    it('matches the default snapshot for user menu, in desktop and guest user', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <UserMenu
          {...baseProps}
          isDesktop
          isUserLoggedIn={false}
          guestMenu={{
            mobile: {
              welcome: {},
              userLinksSections: {},
            },
            desktop: {
              userLinks: {},
            },
          }}
        />
      );

      expect(renderer.render(component)).toMatchSnapshot();
    });
  });
});
