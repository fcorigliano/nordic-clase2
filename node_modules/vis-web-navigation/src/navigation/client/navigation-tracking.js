/* eslint-disable no-underscore-dangle */
/* eslint-disable camelcase */
/* globals meli_ga, melidata */
function track(options) {
  if (options.analytics && typeof meli_ga !== 'undefined') {
    meli_ga('send', {
      hitType: options.analytics.hitType,
      eventCategory: options.analytics.category,
      eventAction: options.analytics.action,
      eventLabel: options.analytics.label,
    });
  }
  if (options.melidata && typeof melidata !== 'undefined') {
    const { data } = options.melidata;
    melidata('cleanAndSend', options.melidata.type, { path: options.melidata.path, data });
  }
}

function navigationEventTracking(selector, event, options) {
  function handleEvent() {
    track(options);
  }

  const element = document.querySelector(selector);
  if (element) element.addEventListener(event, handleEvent);
}

window.__navigation_tracking__ = navigationEventTracking;
window.__navigation_track__ = track;
