const userPictures = require('@frontend-navigations/commons/user-pictures');
const cropUsername = require('../../utils/crop-username');

const userWidgetProps = (props) => {
  const { cdn, urls, user, platform, navigationPIIData, browser } = props;

  return {
    userId: user.id,
    platformId: platform.id,
    siteId: platform.siteId,
    domain: urls.mainDomain.link,
    baseUrl: cdn.link,
    email: navigationPIIData.email,
    show: props.device.desktop || false,
    title: `Â¡Hola, ${cropUsername(navigationPIIData.preferredName || user.nickname)}!`,
    userPicture: userPictures.getUserPicture(user, 'large', { browser }),
    myAccount: urls.myAccount,
    myQuotations: urls.myQuotations,
    history: urls.history,
    logout: urls.logout,
  };
};

module.exports = userWidgetProps;
