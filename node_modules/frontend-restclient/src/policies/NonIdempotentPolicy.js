const RetryPolicy = require('./RetryPolicy');

/**
* Implements the non idempotent policy. This policy retries if the method is one of the non idempotent
* @extends RetryPolicy
*/
class NonIdempotentPolicy extends RetryPolicy {
  static methods = [
    'post',
    'lock',
    'patch',
    'delete',
  ]

  /**
  * Define if the given error is valid candidate for retry
  * @summary If the requested method is one of the non idempotent methods it will retry
  * @param {error} Object - The error object
  * @returns {boolean} Indicates if should retry or not
  */
  static hasToRetry({ config }) {
    return this.methods.includes(config.method.toLowerCase());
  }
}


module.exports = NonIdempotentPolicy;
