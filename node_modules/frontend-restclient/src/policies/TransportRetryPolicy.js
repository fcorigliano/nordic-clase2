const RetryPolicy = require('./RetryPolicy');
const IdempotentTimeoutPolicy = require('./IdempotentTimeoutPolicy');
const ServerError = require('./ServerError');

/**
* Implements the transport policy. This policy is a combination of IdempotentTimeoutPolicy and ServerError. It's behavior follows this logic: IdempotentTimeoutPolicy.hasToRetry || IdempotentTimeoutPolicy.hasToRetry.
* @extends RetryPolicy
*/
class TransportRetryPolicy extends RetryPolicy {
  /**
  * Define if the given error is valid candidate for retry
  * @summary If the received error is a idempotent timeout or server error it should retry
  * @param {error} Object - The error object
  * @returns {boolean} Indicates if should retry or not
  */
  static hasToRetry(error) {
    return IdempotentTimeoutPolicy.hasToRetry(error) || ServerError.hasToRetry(error);
  }
}

module.exports = TransportRetryPolicy;
