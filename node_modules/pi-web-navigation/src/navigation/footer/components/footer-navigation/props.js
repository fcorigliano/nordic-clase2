/* eslint-disable security/detect-non-literal-fs-filename */
/* eslint-disable security/detect-object-injection */
const { getValue } = require('pi-navigation-config');

const navigationProps = (props) => {
  const {
    navigationUrls,
    platform,
    device,
    req,
  } = props;
  const footerLinksKey = device.mobile ? 'mobileSecondaryFooterLinks' : 'desktopFooterLinks';
  const footerItems = getValue({
    key: footerLinksKey,
    platform,
    req,
  }) || [];

  const links = [];

  footerItems.forEach((item) => {
    const itemId = typeof item.link === 'string' ? item.link : item;
    const urlForItem = navigationUrls[itemId];

    if (urlForItem) {
      links.push({
        href: urlForItem.link,
        name: urlForItem.name,
        id: itemId,
      });
    }
  });

  return {
    links,
    isMobile: device.mobile,
  };
};

module.exports = navigationProps;
