/* eslint-disable security/detect-object-injection */
const React = require('react');
const PropTypes = require('prop-types');
const Image = require('frontend-image');
const LinkTag = require('../../../common/link-tag');

const classNameWithIcon = icon => (icon && icon.image ? 'nav-footer-mobile-link-icon' : undefined);

const MobileFooterLinks = ({
  links,
  linkTags,
}) => (
  <div className="nav-footer-mobile-links-bounds">
    <div className="nav-footer-mobile-links">
      {
        links.map(link => (
          <a
            {...link.link}
            key={link.id}
            className={classNameWithIcon(link.icon)}
          >
            { link.name }
            { link.icon && link.icon.image
              && (
                <>
                  {/* nbsp; in chrome makes word wrapping weaker than spaces.
                  Eg.: "Mi cuenta {icon}" will brake on "Mi cuenta" and "{icon}"
                  while "Mi cuenta&nbsp{icon}" breaks on "Mi" and "cuenta&nbsp;{icon}" */}
                  &nbsp;
                  <Image
                    className="nav-footer-access-icon"
                    src={link.icon.image}
                    srcSet={`${link.icon.image2x} 2x`}
                    title={link.name}
                    alt={link.name}
                    width={link.icon.width}
                    height={link.icon.height}
                    onload="off"
                  />
                </>
              )}
            {linkTags[link.id] && (
              <>
                {/* nbsp; in chrome makes word wrapping weaker than spaces.
                Eg.: "Mi cuenta {icon}" will brake on "Mi cuenta" and "{icon}"
                while "Mi cuenta&nbsp{icon}" breaks on "Mi" and "cuenta&nbsp;{icon}" */}
                &nbsp;&nbsp;
                <LinkTag {...linkTags[link.id]} />
              </>
            )}
          </a>
        ))
      }
    </div>
  </div>
);

MobileFooterLinks.propTypes = {
  links: PropTypes.array.isRequired,
  linkTags: PropTypes.object,
};

MobileFooterLinks.defaultProps = {
  linkTags: {},
};

module.exports = MobileFooterLinks;
