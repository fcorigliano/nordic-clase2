# Webviews Middleware

This module groups and manage the middlewares to generated an quality webview.
There are two middlewares in this module
  1. **Deeplink**: you can configurate a deeplink for specific url.
  2. **Middleware CSR Prerender**: improve performance in webviews, using skeleton or static content [documentation here](https://github.com/mercadolibre/fury_frontend-csr-prerender/tree/develop#client-side-rendering-csr-pre-rendering)

**By default both middlewares are disabled**

## Instalation
```
npm install frontend-webviews-middleware
```

### Configuration
For use these middlewares we need enable it in the configuration

```js
middlewares: {
    deeplink: true,
    csrPrerender: true,
  },
```
You can generate an custom configuration to set a deeplink and / or the configuration of CSR PreRender middleware, the configuration should be a `function` and recive in params the request and response for make rigth decitions, this function should return an object.

`deeplink`: (`object`): Return url in the paramater `deeplink`
`csrPrerender`: [documentation](https://github.com/mercadolibre/fury_frontend-csr-prerender/tree/develop#configuraci%C3%B3n)

## Use

```js
/**
 * Module dependencies
 */
const webview = require('frontend-webviews-middleware');

const configWebview = {
  middlewares: {
    deeplink: true,
    csrPrerender: true,
  },
  deeplink: (req, res) => {
    return {
      deeplink: 'meli://deeplink',
    };
  },
  csrPrerender: (req, res) => ({
    prefetches: ['https://www.url.com.ar'],
    preloads: ['https://www.url.com.ar'],
  }),
};

router.get('/', webview(configWebview), render);

/**
 * Expose router
 */
module.exports = router;
```

## License

Copyright Â© 2019.
