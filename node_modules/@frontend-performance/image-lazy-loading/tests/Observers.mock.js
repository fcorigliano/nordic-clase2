class IntersectionObserver {
  constructor(callback, options) {
    this.callback = callback;
    this.options = options;
    this.observed = [];
  }

  observe(element) {
    this.observed.push(element);
  }

  unobserve(element) {
    // eslint-disable-next-line security/detect-object-injection
    delete this.observed[element];
  }

  triggerIntersection() {
    const intersections = this.observed.map((obs, i) => ({
      isIntersecting: i % 2 === 0,
      target: obs,
    }));

    this.callback(intersections, this);
  }
}

const IntersectionObserverEntry = {
  prototype: {
    isIntersecting: true,
  },
};

module.exports = {
  IntersectionObserver,
  IntersectionObserverEntry,
};
