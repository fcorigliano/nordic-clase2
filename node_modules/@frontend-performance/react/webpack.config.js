/**
 * Module dependencies
 */
const path = require('path');
const nodeExternals = require('webpack-node-externals');
const { CleanWebpackPluginÂ } = require('clean-webpack-plugin');
const babel = require('frontend-building_blocks/babel');
const {
  createConfig,
  customConfig,
  entryPoint,
  setOutput,
  addPlugins } = require('frontend-building_blocks');

/**
 * Config
 */
module.exports = createConfig([
  entryPoint({
    react_performance: './react-performance.js',
  }),
  babel(),
  customConfig({
    target: 'node',
    externals: [
      nodeExternals(),
    ],
  }),
  addPlugins([
    new CleanWebpackPlugin(),
  ]),
  setOutput({
    libraryTarget: 'commonjs2',
    library: '[name]',
    path: path.resolve(__dirname, './lib'),
    filename: '[name].js',
  }),
]);
