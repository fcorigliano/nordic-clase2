const { PAGES_PATH } = require('../../constants');

/**
   * Validates if more than one base hook file exists in the directory root
   * based on the baseHooksInRoot length. If more than one exists, it is reported.
   * @param {Array<string>} baseHooksInRoot - List of base hook files in route
   *
   * @examples
   * const baseHooksInRoot = [
   *  '_hooks.server.js',
   *  '_hooks.server.ts',
   * ];
   *
   * validateIfExistMoreThanOneBaseHookFileInRoot(baseHooksInRoot)
   * throws: More than one base hook file in directory root
   */
function validateIfExistMoreThanOneBaseHookFileInRoot(baseHooksInRoot) {
  if (baseHooksInRoot?.length > 1) {
    const errorMessage = 'Expected to find a single Nordic Pages base server hooks file '
      + `in the root of ${PAGES_PATH}.\n`
      + `Base server hooks files found:\n- ${baseHooksInRoot.join('\n- ')}`;

    throw new Error(errorMessage);
  }
}

module.exports = {
  validateIfExistMoreThanOneBaseHookFileInRoot,
};
exports = module.exports;
