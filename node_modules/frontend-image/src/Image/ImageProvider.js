const React = require('react');
const PropTypes = require('prop-types');

/**
 * ImageContext
 * Saves the Image instance that is used by the provider
 */
const ImageContext = React.createContext({});

/**
  * useImage
  * Hook to access the Image context
  */
const useImage = () => React.useContext(ImageContext);

/**
 * ImagesProvider
 */
const ImageProvider = ({ children, prefix }) => (
  <ImageContext.Provider value={{ images: { prefix } }}>
    {React.Children.only(children)}
  </ImageContext.Provider>
);

/**
 * childContextTypes
 */
ImageProvider.childContextType = {
  // eslint-disable-next-line react/forbid-prop-types
  images: PropTypes.object,
  children: PropTypes.element.isRequired,
};

/**
 * Expose ImagesProvider
 */
module.exports = ImageProvider;
exports = module.exports;
exports.ImageProvider = ImageProvider;
exports.useImage = useImage;
