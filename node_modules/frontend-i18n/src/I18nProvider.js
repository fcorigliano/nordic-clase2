/**
 * Module dependencies
 */
const React = require('react');
const PropTypes = require('prop-types');
const { I18nContext, useI18n } = require('./I18nContext');

/**
 * I18nProvider
 */
const I18nProvider = ({ children, i18n }) => (
  <I18nContext.Provider value={{ i18n }}>
    { React.Children.only(children) }
  </I18nContext.Provider>
);

const injectI18n = (Component) => {
  const InjectI18n = (props) => {
    const i18n = useI18n();

    return (
      <Component {...props} {...i18n} />
    );
  };

  return InjectI18n;
};

/**
 * propTypes
 */
I18nProvider.propTypes = {
  i18n: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types
  children: PropTypes.element.isRequired,
};

/**
 * Expose I18nProvider
 */
module.exports = I18nProvider;
exports = module.exports;
exports.I18nProvider = I18nProvider;
exports.injectI18n = injectI18n;
exports.I18nContext = I18nContext;
exports.useI18n = useI18n;
