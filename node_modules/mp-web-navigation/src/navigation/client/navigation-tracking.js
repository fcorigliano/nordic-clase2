(function() {
  const navHeaderParent = document.querySelector('.nav-header-menu-container');
  const navFooterParent = document.querySelector('.nav-footer-mp');

  if (navHeaderParent !== null) {
    navHeaderParent.addEventListener('click', function() {
      const activeElement = document.activeElement;
      if (!navHeaderParent.contains(activeElement)) {
        return;
      }

      // eslint-disable-next-line camelcase
      if (hasMeliGATrackingInfo(activeElement.dataset) && window.meli_ga) {
        window.meli_ga('send', {
          hitType: activeElement.dataset.trackHitType || 'event',
          eventCategory: 'MP-HEADER-PUBLIC-NAVIGATION',
          eventAction: activeElement.dataset.trackAction,
          eventLabel: `NAV-HEADER-LINK-${activeElement.dataset.trackId.toUpperCase()}`,
        });
      }

      if (hasMelidataTrackingInfo(activeElement.dataset) && window.melidata) {
        window.melidata('send', 'event', {
          path: '/navigation/navbar/link',
          event_data: {
            id: activeElement.dataset.trackId,
            hierarchy: activeElement.dataset.trackHierarchy,
          },
        });
      }
    });
  }

  if (navFooterParent !== null) {
    navFooterParent.addEventListener('click', function() {
      const activeElement = document.activeElement;
      if (!navFooterParent.contains(activeElement)) {
        return;
      }

      // eslint-disable-next-line camelcase
      if (hasMeliGATrackingInfo(activeElement.dataset) && window.meli_ga) {
        window.meli_ga('send', {
          hitType: activeElement.dataset.trackHitType || 'event',
          eventCategory: 'MP-FOOTER-PUBLIC-NAVIGATION',
          eventAction: activeElement.dataset.trackAction,
          eventLabel: `NAV-FOOTER-LINK-${activeElement.dataset.trackId.toUpperCase()}`,
        });
      }

      if (hasMelidataTrackingInfo(activeElement.dataset) && window.melidata) {
        window.melidata('send', 'event', {
          path: '/navigation/footer/link',
          event_data: {
            id: activeElement.dataset.trackId,
          },
        });
      }
    });
  }

  function hasMeliGATrackingInfo(dataset) {
    return dataset
      && dataset.trackAction;
  }

  function hasMelidataTrackingInfo(dataset) {
    return dataset
      && dataset.trackId;
  }
})();
