const propsModule = require('./props');

const defaultProps = {
  platform: {
    id: 'some-platform-id',
    siteId: 'some-site-id',
  },
  cdn: {},
  req: 'some-request',
  favicons: ['some-favicon.png'],
};

jest.mock('mp-navigation-config', () => ({
  getValue: jest.fn().mockReturnValue('1.2.3'),
}));

describe('Mercado Pago Navigation', () => {
  describe('Favicons', () => {
    describe('props', () => {
      it('should return expected props', () => {
        const result = propsModule(defaultProps);

        // Assert return factory result
        expect(result.platformId).toBe(defaultProps.platform.id);
        expect(result.siteId).toBe(defaultProps.platform.siteId);
        expect(result.cdn).toBe(defaultProps.cdn);
        expect(result.uiNavigationVersion).toBe('1.2.3');
        expect(result.favicons).toBe(defaultProps.favicons);
        expect(result.appName).toBe('mp-web-navigation');
      });

      it('should return undefined platform id if there\'s no platform object', () => {
        const props = {
          ...defaultProps,
          platform: null,
        };
        const result = propsModule(props);

        // Assert return factory result
        expect(result.platformId).toBeUndefined();
      });

      it('should return undefined platform id if there\'s no id on platform object', () => {
        const props = {
          ...defaultProps,
          platform: {},
        };
        const result = propsModule(props);

        // Assert return factory result
        expect(result.platformId).toBeUndefined();
      });

      it('should return undefined site id if there\'s no platform object', () => {
        const props = {
          ...defaultProps,
          platform: null,
        };
        const result = propsModule(props);

        // Assert return factory result
        expect(result.siteId).toBeUndefined();
      });

      it('should return undefined site id if there\'s no siteId on platform object', () => {
        const props = {
          ...defaultProps,
          platform: {},
        };
        const result = propsModule(props);

        // Assert return factory result
        expect(result.siteId).toBeUndefined();
      });
    });
  });
});
