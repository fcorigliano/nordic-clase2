const React = require('react');
const ShallowRenderer = require('react-test-renderer/shallow');
const Header = require('.');

const props = {
  logo: {
    url: 'https://www.mercadopago.com.ar',
    label: 'Mercado Pago',
  },
  userMenu: {
    guestMenu: {
      links: [
        {
          className: 'option-register',
          key: 'registration',
          name: 'Creá tu cuenta',
          target: '_self',
          link:
            'https://registration.mercadopago.com.ar/registration-mp?confirmation_url=https%3A%2F%2Fdev.mercadopago.com.ar%3A8443%2F',
          showIcon: false,
        },
        {
          className: 'option-help-tablet',
          key: 'helpMain',
          target: '_blank',
          name: 'Ayuda',
          link: 'https://www.mercadopago.com.ar/ayuda',
          showIcon: false,
        },
        {
          className: 'option-login',
          key: 'login',
          target: '_self',
          name: 'Ingresá',
          link:
            'https://www.mercadolibre.com/jms/mla/lgz/login?platform_id=MP&go=https%3A%2F%2Fdev.mercadopago.com.ar%3A8443%2F&loginType=explicit',
          showIcon: false,
        },
        {
          className: 'option-register-tablet',
          key: 'registration',
          target: '_self',
          name: 'Creá tu cuenta',
          link:
            'https://registration.mercadopago.com.ar/registration-mp?confirmation_url=https%3A%2F%2Fdev.mercadopago.com.ar%3A8443%2F',
          showIcon: false,
        },
        {
          className: 'option-help',
          key: 'helpMain',
          icon: 'nav-icon-help',
          target: '_blank',
          name: 'Ayuda',
          link: 'https://www.mercadopago.com.ar/ayuda',
          showIcon: true,
        },
      ],
      navigation: {
        links: [
          {
            key: 'summary',
            target: '_blank',
            name: 'Mi cuenta',
            link: 'https://www.mercadopago.com.ar/summary',
            showIcon: false,
          },
          {
            key: 'helpMain',
            target: '_blank',
            name: 'Ayuda',
            link: 'https://www.mercadopago.com.ar/ayuda',
            showIcon: false,
          },
          {
            key: 'logout',
            target: '_self',
            name: 'Salir',
            link:
              'https://www.mercadolibre.com/jms/mla/lgz/logout?go=https://www.mercadopago.com.ar?go=https%3A%2F%2Fdev.mercadopago.com.ar%3A8443%2F',
            showIcon: false,
          },
        ],
        isLoggedIn: true,
        userInfo: {
          greeting: 'hola',
          brandTitle: 'Mi Mercado Pago',
          redirect: { link: 'wwww.mercadolibre.com.ar' },
          fullName: 'firstName lastName',
          userAvatar: {
            avatar: 'one-image.jpg',
            avatarAlt: 'first name last name',
          },
        },
        siteId: 'MLA',
        deviceType: 'desktop',
        landingNavigationVersion: '0.0.0',
        uiNavigationVersion: '1.2.3',
      },
      siteId: 'MLA',
      deviceType: 'desktop',
      uiNavigationVersion: '1.2.3',
      landingNavigation: {
        siteId: 'MLA',
        structure: {},
        translations: {},
        urls: {},
        icons: {},
        collapsibleItemLabel: {
          see_more: 'Ver más',
          see_less: 'Ver menos',
        },
      },
    },
    loggedInMenu: {
      welcome: {
        links: [
          {
            className: 'option-register',
            key: 'registration',
            name: 'Creá tu cuenta',
            target: '_self',
            link:
              'https://registration.mercadopago.com.ar/registration-mp?confirmation_url=https%3A%2F%2Fdev.mercadopago.com.ar%3A8443%2F',
            showIcon: false,
          },
          {
            className: 'option-help-tablet',
            key: 'helpMain',
            target: '_blank',
            name: 'Ayuda',
            link: 'https://www.mercadopago.com.ar/ayuda',
            showIcon: false,
          },
          {
            className: 'option-login',
            key: 'login',
            target: '_self',
            name: 'Ingresá',
            link:
              'https://www.mercadolibre.com/jms/mla/lgz/login?platform_id=MP&go=https%3A%2F%2Fdev.mercadopago.com.ar%3A8443%2F&loginType=explicit',
            showIcon: false,
          },
          {
            className: 'option-register-tablet',
            key: 'registration',
            target: '_self',
            name: 'Creá tu cuenta',
            link:
              'https://registration.mercadopago.com.ar/registration-mp?confirmation_url=https%3A%2F%2Fdev.mercadopago.com.ar%3A8443%2F',
            showIcon: false,
          },
          {
            className: 'option-help',
            key: 'helpMain',
            icon: 'nav-icon-help',
            target: '_blank',
            name: 'Ayuda',
            link: 'https://www.mercadopago.com.ar/ayuda',
            showIcon: true,
          },
        ],
        userAvatar: {
          avatar: 'one-image.jpg',
          avatarAlt: 'first name last name',
        },
        siteId: 'MLA',
        deviceType: 'desktop',
        landingNavigation: {
          siteId: 'MLA',
          structure: {},
          translations: {},
          urls: {},
          icons: {},
          collapsibleItemLabel: {
            see_more: 'Ver más',
            see_less: 'Ver menos',
          },
        },
      },
      navigation: {
        links: [
          {
            key: 'summary',
            target: '_blank',
            name: 'Mi cuenta',
            link: 'https://www.mercadopago.com.ar/summary',
            showIcon: false,
          },
          {
            key: 'helpMain',
            target: '_blank',
            name: 'Ayuda',
            link: 'https://www.mercadopago.com.ar/ayuda',
            showIcon: false,
          },
          {
            key: 'logout',
            target: '_self',
            name: 'Salir',
            link:
              'https://www.mercadolibre.com/jms/mla/lgz/logout?go=https://www.mercadopago.com.ar?go=https%3A%2F%2Fdev.mercadopago.com.ar%3A8443%2F',
            showIcon: false,
          },
        ],
        isLoggedIn: true,
        userInfo: {
          greeting: 'hola',
          brandTitle: 'Mi Mercado Pago',
          redirect: { link: 'wwww.mercadolibre.com.ar' },
          fullName: 'firstName lastName',
          userAvatar: {
            avatar: 'one-image.jpg',
            avatarAlt: 'first name last name',
          },
        },
        siteId: 'MLA',
        deviceType: 'desktop',
        landingNavigationVersion: '0.0.0',
        uiNavigationVersion: '1.2.3',
      },
    },
    isLoggedIn: false,
  },
};

describe('Mercado Pago Navigation', () => {
  describe('Header', () => {
    it('matches the default snapshot and returns plus header since type is plus', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <Header
          type="full"
          {...props}
        />
      );

      const renderedComponent = renderer.render(component);

      expect(renderedComponent).toMatchSnapshot();
      expect(renderedComponent.type.name).toEqual('HeaderPlus');
    });

    it('matches the default snapshot and returns clean header since type is clean', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <Header
          type="clean"
          {...props}
        />
      );

      const renderedComponent = renderer.render(component);

      expect(renderedComponent).toMatchSnapshot();
      expect(renderedComponent.type.name).toEqual('HeaderClean');
    });

    it('returns plus header since type could not be found and defaults to plus', () => {
      const renderer = new ShallowRenderer();
      const component = (
        <Header
          type="non-existent-header-type"
          {...props}
        />
      );

      const renderedComponent = renderer.render(component);

      expect(renderedComponent).toMatchSnapshot();
      expect(renderedComponent.type.name).toEqual('HeaderPlus');
    });
  });
});
