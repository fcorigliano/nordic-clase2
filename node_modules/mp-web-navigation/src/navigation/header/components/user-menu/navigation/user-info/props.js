const { getValue } = require('mp-navigation-config');

const userAvatarProps = require('../../logged-in/user-avatar/props');

const userInfoProps = (props) => {
  const {
    user,
    navigationUrls,
    platform,
    req,
    navigationPIIData,
  } = props;

  const navHeader = getValue({
    key: 'navHeader',
    req,
    platform,
  });

  if (!navHeader) return {};

  const data = {
    ...navHeader.userInfo,
    redirect: navigationUrls[navHeader.userInfo.redirect],
    firstName: navigationPIIData.preferredName || user.nickname,
    userAvatar: userAvatarProps(props),
  };

  return data;
};

module.exports = userInfoProps;
