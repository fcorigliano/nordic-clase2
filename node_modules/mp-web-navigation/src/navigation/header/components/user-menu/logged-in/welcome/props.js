const { getValue } = require('mp-navigation-config');
const getNavHeaderItems = require('../../../../../utils/get-navheader-items');
const mapLinksToUrls = require('../../../../../utils/map-links-to-urls');
const userAvatarProps = require('../user-avatar/props');
const landingNavigationProps = require('../../navigation/landing-navigation/props');

const welcomeProps = (props) => {
  const {
    navigationUrls,
    platform,
    req,
    device,
  } = props;
  const navHeader = getValue({
    key: 'navHeader',
    platform,
    req,
  });

  if (!navHeader) return {};

  const links = mapLinksToUrls({
    urls: navigationUrls,
    items: getNavHeaderItems(navHeader, device.type, 'logged'),
  });

  return {
    userAvatar: userAvatarProps(props),
    links,
    siteId: platform.siteId,
    deviceType: device.type,
    landingNavigation: landingNavigationProps(props),
  };
};

module.exports = welcomeProps;
