const log = require('frontend-logger')('melidata');

class ExperimentConfiguration {
  constructor(experimentName, variantId, configMap = {}) {
    this.experimentName = experimentName;
    this.variantId = variantId;
    this.configMap = configMap;
  }

  getExperimentName() {
    return this.experimentName;
  }

  getVariantId() {
    return this.variantId;
  }

  getConfig(configKey, defaultValue) {
    // eslint-disable-next-line no-prototype-builtins
    if (configKey && this.configMap && this.configMap.hasOwnProperty(configKey)) {
      return this.configMap[configKey];
    }
    this.variantId = 'DEFAULT';
    log.warn(`ConfigKey ${configKey} doesn't exist for experiment ${this.experimentName}. VariantId changed to DEFAULT and default value returned`);
    return defaultValue;
  }
}

module.exports = ExperimentConfiguration;
