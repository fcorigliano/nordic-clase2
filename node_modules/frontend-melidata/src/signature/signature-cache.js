const SignatureApiCalls = require('./signature-api-calls');

const RELOAD_INTERVAL = 60000 * 60 * 24; // 1 dia

class SignatureCache {
  constructor() {
    this.apiService = new SignatureApiCalls();
    this.signatureKey = null;
    this.run();
  }

  getSignatureKey() {
    return this.signatureKey;
  }

  run() {
    setInterval(() => this.exec(), RELOAD_INTERVAL);
    this.exec();
  }

  exec() {
    this.apiService.getSignatureKey()
      .then(response => {
        if (response) {
          this.signatureKey = response.signature_key;
        }
      });
  }
}

module.exports = SignatureCache;
