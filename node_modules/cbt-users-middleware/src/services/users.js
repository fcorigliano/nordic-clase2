const { PRODUCTION } = require('frontend-env');
const restclient = require('frontend-restclient');

class UsersService {
    constructor() {
        this.request = restclient({
            timeout: PRODUCTION ? 500 : 5000,
            retry: {
                maxRetries: 2,
                delay: 0,
            },
        });
    }

    get(userId, context) {
        return this.request.get(`/users/${userId}?caller.id=${userId}&api_version=2`, {context: context})
            .then(response => response.data)
            .catch(err => Promise.reject(new Error(err.response.data.message)));
    }
}

module.exports = UsersService;
