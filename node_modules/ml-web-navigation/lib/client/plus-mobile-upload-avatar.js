"use strict";!function(e){var t=document.querySelector("#nav-header-mobile-avatar-upload");if(t){var a=document.querySelector("#nav-header-mobile-avatar-form").getAttribute("action"),r=function(t,a){e&&e.emit&&e.emit(t,a)},n=function(e){},o=function(){var e=new XMLHttpRequest;return e.open("POST",a,!0),e.onload=function(){var t,a,n,o,s=JSON.parse(e.response||e.responseText);200===e.status?(t=s.picture_url,a="nav-header-mobile-user-avatar",n=document.querySelector("#".concat(a)),(o=document.createElement("img")).src=t,o.setAttribute("id",a),n.parentNode.replaceChild(o,n),r("snackbar:show",{message:s.message,type:"success"})):r("snackbar:show",{message:s.message,type:"error"})},e.onerror=n,e.ontimeout=n,e.timeout=3e4,e.withCredentials=!0,e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e};t.addEventListener("change",(function(){var e,a,r;t.files.length>0&&(e=o(),a=new FormData,r=t.files[0],a.append("file",r,r.name),e.send(a))}))}}(window.freya||window.meli);
