// Improve the #nav-footer-access-content behavior by scrolling to
// the bottom when users open this section
(function (win, doc) {
  var el = doc.getElementById('nav-footer-access-switch');
  if (!win.addEventListener || !el) { return; }

  function scrollToBottom() {
    var scrollInterval = setInterval(function() {
      try {
        var bodyHeight = Math.max(
          doc.body.scrollHeight,
          doc.body.offsetHeight,
          doc.documentElement.clientHeight,
          doc.documentElement.scrollHeight,
          doc.documentElement.offsetHeight
        );
        var currentScroll = win.pageYOffset || doc.documentElement.scrollTop || doc.body.scrollTop || 0;

        // If the body height is equal to window height + current scroll
        if (win.innerHeight + currentScroll >= bodyHeight) {
          clearInterval(scrollInterval);
        } else {
          // move scroll 20px each time
          win.scrollBy(0, 20);
        }
      } catch (e) {
        clearInterval(scrollInterval);
      }
    }, 15);
  }

  // User interaction
  el.addEventListener('change', function () {
    if (!this.checked) {
      setTimeout(scrollToBottom, 200);
    }
  });
}(window, document));
