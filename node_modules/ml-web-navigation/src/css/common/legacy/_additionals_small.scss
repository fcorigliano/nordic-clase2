@use 'sass:math';

//
// New search style
//
input[type='text'].nav-search-input,
input[type='search'].nav-search-input {
  background-color: $small-search-input-bg-color;
  border: none;
  position: relative;
  box-sizing: border-box;
  z-index: $z-index-base + 15;

  &:focus {
    border: none;

    .nav-header-has-search-active & {
      color: #666;
      box-shadow: none;
    }
  }

  &::placeholder {
    color: $small-search-input-placeholder-color;
    font-size: $search-input-text-size;
    font-weight: 400;
  }

  .nav-header-has-search-active & {
    padding-right: $header-menu-switch-width;
  }
}

button.nav-search-btn,
button.nav-search-btn:focus {
  left: -6px;
  right: initial;
  z-index: $z-index-base + 20;

  span {
    display: none;
  }

  .nav-header-has-search-active & {
    display: none;
  }
}

.nav-search-btn {
  .nav-icon-search {
    font-size: 19px; //$search-btn-icon-size

    &:before {
      content: '\EA15';
      vertical-align: bottom;
    }
  }
}

//
// New menu style
//

.nav-header {
  .nav-header-btn {
    position: absolute;
    top: $small-header-title-top;
    left: 0;
    padding: $bounds-hpadding*2;
    text-indent: -200%;
    border: 0;
    box-shadow: none;
    background: none;

    &:before {
      @extend .nav-icon-back-o;
      font-family: navigation;
      font-size: $header-menu-icon-width;
      line-height: 1;
      color: $small-header-menu-text-color;
      position: absolute;
      left: $bounds-hpadding;
      top: $bounds-hpadding;
      text-indent: 0;
    }
  }

  .nav-header-btn--no-arrow {
    text-indent: 0;
    border: 1px solid rgba(0, 0, 0, .15);
    padding: 0 10px;
    left: 10px;
    top: 10px;

    &:before {
      display: none;
    }
  }

  .nav-cart {
    color: $header-text-color;
  }
}

.nav-search {
  z-index: $z-index-base + 10;
  will-change: left;
  transition: left .15s ease-out;

  &:before {
    content: '';
    display: none;
    position: absolute;
    top: 0;
    left: -10px;
    right: -10px;
    height: 100%;
    background-color: #fff;
    opacity: 0;
    will-change: opacity;
    transition: opacity .15s ease-out;

    .nav-header-has-search-active & {
      display: block;
    }

    .nav-header--is-enter & {
      opacity: 1;
    }

    .nav-header--is-leave & {
      opacity: 0;
    }
  }

  .nav-category {
    z-index: $z-index-base + 17;
  }
}

.nav-search-close-btn,
.nav-search-close-btn:focus,
.nav-search-clear-btn,
.nav-search-clear-btn:focus {
  font-size: $search-btn-icon-size;
  line-height: 1;
  color: $small-header-menu-text-color;
  border: 0;
  background: none;
  display: none;
  position: absolute;
  top: 0;
  z-index: $z-index-base + 20;
  height: $small-header-height;
  padding: 0;
  width: $small-search-btn-width;
}

.nav-search-close-btn,
.nav-search-close-btn:focus {
  top: 1px;
  left: -4px;
  opacity: 0;
  will-change: opacity;
  transition: opacity .15s ease-out;

  &:before {
    content: '\EA01';
    font-family: navigation;
  }

  .nav-header-has-search-active & {
    display: block;
  }

  .nav-header--is-enter & {
    opacity: 1;
  }

  .nav-header--is-leave & {
    opacity: 0;
  }
}

.nav-search-clear-btn,
.nav-search-clear-btn:focus {
  right: -4px;
}

.nav-search-clear-btn {
  &:before {
    content: '\EA1D';
    font-family: 'navigation';
    vertical-align: bottom;
  }

  .nav-search--has-text & {
    display: block;
  }

  .nav-header--is-leave & {
    display: none;
  }
}

// Default state
#nav-header-menu-switch {
  // Opened state

  &:checked + .nav-header-menu-wrapper,
  &:checked ~ header .nav-header-menu-wrapper {
    .hamburger-top-bread {
      transform: translate(0, $header-menu-icon-height * 4) rotate(40deg);
    }

    .hamburger-bottom-bread {
      transform: translate(0, $header-menu-icon-height * -4) rotate(-40deg);
    }
  }
}

.hamburger-top-bread {
  margin-top: ($header-menu-icon-height * -3) - math.div($header-menu-icon-height, 3);
}

.hamburger-patty {
  margin-top: - math.div($header-menu-icon-height, 3);
}

.hamburger-bottom-bread {
  margin-top: ($header-menu-icon-height * 3) - math.div($header-menu-icon-height, 3);
}

#nav-header-menu-switch {
  &:checked + .nav-header-menu-wrapper,
  &:checked ~ header .nav-header-menu-wrapper {
    .hamburger-top-bread {
      transform: translate(0, $header-menu-icon-height * 3) rotate(40deg);
    }

    .hamburger-patty {
      transform: scale(0, 0);
    }

    .hamburger-bottom-bread {
      transform: translate(0, $header-menu-icon-height * -3) rotate(-40deg);
    }
  }
}

#nav-header-menu {
  padding: $small-header-menu-vpadding 0;

  a {
    padding: $small-header-menu-option-padding;
    height: $small-header-menu-option-height;
    line-height: $small-header-menu-option-height;
    border: none;

    &.notifications-widget,
    &.option-help,
    &.option-register,
    &.bookmarks-widget {
      border-left: none;
    }

    &.option-my-account {
      &:after {
        @include nav-icon-user-o;
      }
    }

    &.option-notifications {
      &:after {
        @include nav-icon-notifications-o;
      }
    }

    &.option-logout {
      &:after {
        @include nav-icon-logout-o;
      }
    }

    &.option-bookmarks {
      &:after {
        @include nav-icon-bookmarks-o;
      }
    }

    &.option-sell {
      &:after {
        @include nav-icon-sell-o;
      }
    }

    &.option-help {
      &:after {
        @include nav-icon-help-o;
      }
    }

    &.option-login {
      &:after {
        @include nav-icon-login-o;
      }
    }

    &.option-register {
      &:after {
        @include nav-icon-register-o;
      }
    }

    &:after {
      left: $small-header-menu-icon-left;
      font-size: $small-header-menu-icon-size;
    }
  }
}

.nav-bounds {

  &.nav-bounds-with-cart {
    [for='nav-header-menu-switch'] {
      right: $header-menu-switch-width;
    }
  }
}

.nav-bounds-with-cart {
  #nav-header-menu {
    &:before {
      @if $header-menu-cone-render {
        right: math.div($header-menu-switch-width * 3 - $header-menu-cone-size, 2);
      }
    }

    &:after {
      @if $header-menu-cone-render {
        right: math.div($header-menu-switch-width * 3 - $header-menu-cone-size, 2) + 1;
      }
    }
  }
}

.nav-cart {
  display: none;

  &.nav-cart-full {
    .nav-icon-cart:before {
      @include nav-icon-cart-full-small;
    }
  }

  &.nav-cart-empty {
    .nav-icon-cart:before {
      @include nav-icon-cart-empty-small;
    }
  }
}

.nav-bounds {
  &.nav-bounds-with-cart {
    .nav-cart {
      display: block;
      position: absolute;
      right: 0;
      top: 0;
      height: $small-header-height;
      width: $header-menu-switch-width;
      text-align: center;

      :before {
        font-size: 18px;
        line-height: 50px;
      }

      .nav-icon-cart {
        margin-left: -8px;
      }

      .nav-icon-cart-quantity {
        position: absolute;
        right: 14px;
        top: 11px;
        font-size: 11px;
        line-height: 15px;
        width: 20px;
        text-align: center
      }

      &.nav-cart-empty {
        .nav-icon-cart-quantity {
          display: none;
        }
      }
    }
  }
}

#mlMsg {
  margin: 0 auto;
  box-sizing: border-box;
  max-width: 1220px;

  .content {
    padding-right: 20px;
  }

  p {
    margin: 0;
  }

  #mlMsgRemove {
    width: 15px;
    height: 16px;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    right: 12px;
    cursor: pointer;
  }
}
