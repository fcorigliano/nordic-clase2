const prepareToRender = require('./index');

const baseRequest = {
  platform: {
    id: 'ML',
    siteId: 'MLA',
  },
  device: {
    mobile: false,
  },
  cookies: {},
  headers: {
    cookie: '',
  },
  query: {},
};

const baseResponse = {};
const baseParams = {
  type: 'plus',
  urls: {
    mainDomain: {
      link: 'mercadolibre.com.ar',
    },
  },
  configSchema: {
    headerMenu: [],
  },
  features: {
    loansMessages: true,
  },
};

describe('Mercado Libre - Prepare to render', () => {
  it('returns the different results for the required services', (done) => {
    prepareToRender(baseParams, baseRequest, baseResponse).then((results) => {
      expect(results.exhibitorInfo).toBeDefined();
      expect(results.cartInfo).toBeDefined();
      expect(results.userInfo).toBeDefined();
      expect(results.cpInfo).toBeDefined();
      expect(results.notificationsInfo).toBeDefined();
      expect(results.loansInfo).toBeDefined();
      expect(results.downloadApp).toBeDefined();
      done();
    });
  });
});
