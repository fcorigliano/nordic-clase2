const React = require('react');
const PropTypes = require('prop-types');
const UserLink = require('../../../nav-link');
const ModelessBox = require('../../../../../widgets/modeless-box');

const UserLinks = (props) => {
  const { links, modelessBox } = props;

  const userLinks = [];
  const modelessBoxCallbacks = [];

  links.forEach((link) => {
    if (link.modelessBoxCallback) {
      modelessBoxCallbacks.push(link.modelessBoxCallback);
    }

    userLinks.push(<UserLink key={link.id} {...link} type="user-menu-link" />);
  });

  return (
    <>
      { modelessBox && <ModelessBox {...modelessBox} callbacks={modelessBoxCallbacks} /> }
      { userLinks }
    </>
  );
};

UserLinks.propTypes = {
  links: PropTypes.arrayOf(PropTypes.shape({
    id: PropTypes.string.isRequired,
  })).isRequired,
  modelessBox: PropTypes.object,
};

UserLinks.defaultProps = {
  modelessBox: null,
};

module.exports = UserLinks;
