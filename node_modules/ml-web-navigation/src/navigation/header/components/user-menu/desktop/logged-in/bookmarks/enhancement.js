/* eslint-disable security/detect-non-literal-fs-filename */
const React = require('react');
const classNames = require('classnames');
const BookmarksName = require('./name');

const id = 'bookmarks';
const bookmarksWidget = 'bookmarks-widget';

const bookmarksEnhancement = (url, props) => {
  const newUrl = { ...url,
    link: { ...url.link, className: classNames(url.link.className, bookmarksWidget) },
    name: (<BookmarksName name={url.name} />),
    modelessBoxCallback: `
      window.layoutBookmarks = new Bookmarks({
        trigger: document.querySelector('.${bookmarksWidget}'),
        hostname: mainDomain,
        fixed: ${props.fixed},
        bus: window.freya,
        isHover: true
      });
    ` };

  return newUrl;
};

module.exports = {
  id,
  enhance: bookmarksEnhancement,
};
