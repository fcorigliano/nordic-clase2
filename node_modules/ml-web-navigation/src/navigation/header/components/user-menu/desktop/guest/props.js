const { mapLinksToUrls } = require('../../../../../utils/links');
const { isClean, isPlus, isLite } = require('../../../../../../layout-type-detection');

// TODO: move to conf
const guestUserMenuLinks = [
  'registration',
  'login',
];
const purchasesLink = 'purchases';
const help = 'helpMain';

const guestUserMenuProps = (props) => {
  const { navigationUrls, actualLocation, type } = props;

  let userMenuLinks = [];

  if (isClean(type)) {
    userMenuLinks.push(help);
  } else {
    userMenuLinks = [...guestUserMenuLinks];

    if (isPlus(type)) {
      userMenuLinks.push(purchasesLink);
    }

    if (isLite(type)) {
      userMenuLinks.push(help);
    }
  }

  const links = mapLinksToUrls({
    links: userMenuLinks,
    urls: navigationUrls,
    currentUrl: actualLocation,
    originalProps: props,
    hash: 'nav-header',
    addLinkIdAttribute: true,
  });

  return {
    userLinks: {
      links,
    },
  };
};

module.exports = guestUserMenuProps;
