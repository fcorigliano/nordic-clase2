/* eslint-disable security/detect-object-injection */
const { getValue } = require('ml-navigation-config');
const mapSectionsLinksToUrls = require('../../../../../utils/map-sections-links-to-urls');
const userLinkEnhancements = require('../user-link/enhancements');

const userLinksSectionsProps = (props, type = 'guest') => {
  const {
    req,
    navigationUrls,
    platform,
    actualLocation,
  } = props;

  const mobileHeaderMenu = getValue({
    key: 'mobileHeaderMenuLinks',
    platform,
    req,
  });

  return {
    sectionsLinks: mapSectionsLinksToUrls({
      sectionsLinks: mobileHeaderMenu[type],
      urls: navigationUrls,
      currentUrl: actualLocation,
      originalProps: props,
      enhancements: userLinkEnhancements,
      hash: 'menu-user',
    }),
  };
};

module.exports = userLinksSectionsProps;

