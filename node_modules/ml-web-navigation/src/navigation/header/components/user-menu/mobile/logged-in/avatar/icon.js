const React = require('react');
const PropTypes = require('prop-types');

const LoyaltyPercentageIcon = (props) => {
  const { percentage, level } = props;
  // eslint-disable-next-line no-restricted-globals
  const hasPercentage = percentage && !isNaN(percentage) && isFinite(percentage);
  const fullCircle = 250;
  const percentageCircle = hasPercentage ? (fullCircle * percentage).toFixed(0) : fullCircle;

  return (
    <svg viewBox="0 0 100 100">
      <path
        strokeLinecap="round"
        strokeWidth="3"
        stroke="#eee"
        fill="none"
        d="M50 10 a 40 40 0 0 1 0 80 a 40 40 0 0 1 0 -80"
      />
      <path
        className={`nav-header-mobile-loyalty-level-${level}`}
        strokeLinecap="round"
        strokeWidth="3"
        strokeDasharray={`${percentageCircle},999`}
        fill="none"
        d="M50 10 a 40 40 0 0 1 0 80 a 40 40 0 0 1 0 -80"
      />
    </svg>
  );
};

LoyaltyPercentageIcon.propTypes = {
  percentage: PropTypes.number,
  level: PropTypes.number.isRequired,
};

LoyaltyPercentageIcon.defaultProps = {
  percentage: null,
};

module.exports = LoyaltyPercentageIcon;
