const React = require('react');
const PropTypes = require('prop-types');
const Script = require('frontend-script');
const CPMobile = require('./cp.mobile');
const CPDesktop = require('./cp.desktop');

const readClientFile = require('../../../utils/read-client-file');

const clientFileContent = readClientFile('cp-tracking.js');

const CP = ({ isDesktop, application, show, ...props }) => (
  show
  && (
    <>
      { isDesktop ? <CPDesktop {...props} /> : <CPMobile {...props} /> }
      <Script on="now">
        {clientFileContent}
      </Script>
    </>
  )
);

CP.propTypes = {
  isDesktop: PropTypes.bool.isRequired,
  show: PropTypes.bool.isRequired,
};

module.exports = CP;
