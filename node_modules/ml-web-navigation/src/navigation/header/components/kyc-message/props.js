const { getValue } = require('ml-navigation-config');
const loanMessagesProps = require('../../../widgets/loan-message/props');

const kycProps = (props) => {
  const { platform, req, kycInfo } = props || {};
  const { options } = kycInfo || {};
  const { ml_front_navigation: mlFrontNavigation } = options || {};
  const { message } = mlFrontNavigation || {};
  const existsKycMessages = message === true;

  if (!existsKycMessages) {
    return {};
  }

  const { show } = loanMessagesProps(props) || {};
  const existsLoanMessages = show === true;

  const baseProps = {
    text: null,
  };

  if (!existsLoanMessages) {
    const kycConfig = getValue({
      key: 'kyc',
      req,
      platform,
    });
    const { uif } = kycConfig || {};
    baseProps.text = uif && uif.message;
    baseProps.cta = uif && uif.cta;
  }

  return baseProps;
};

module.exports = kycProps;
