/* eslint-disable security/detect-object-injection */
const { getValue } = require('ml-navigation-config');
const { mapLinksToUrls } = require('../../../utils/links');
const isDesktop = require('../../../utils/is-desktop');
const navMenuEnhancements = require('./enhancements');

const navMenuProps = (props, linkTagsProps) => {
  const {
    platform,
    req,
    navigationUrls,
    actualLocation,
  } = props;

  const headerMenu = getValue({
    key: 'headerMenuLinks',
    platform,
    req,
  });

  return {
    links: mapLinksToUrls({
      links: headerMenu,
      urls: navigationUrls,
      currentUrl: actualLocation,
      originalProps: props,
      hash: 'nav-header',
      className: 'nav-menu-item-link',
      enhancements: navMenuEnhancements,
    }),
    show: isDesktop(props),
    ...linkTagsProps,
  };
};

module.exports = navMenuProps;

