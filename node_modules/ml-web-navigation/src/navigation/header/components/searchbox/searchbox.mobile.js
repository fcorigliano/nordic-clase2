const React = require('react');
const PropTypes = require('prop-types');
const Script = require('frontend-script');
const SearchboxBase = require('./searchbox-base');
const Category = require('./searchbox-category');
const readClientFile = require('../../../utils/read-client-file');

const clientFileContent = readClientFile('searchbox-webmobile-input.js');

const SearchboxMobile = ({ placeholderMobile, closeTitle, clearTitle, category, ...props }) => [
  <SearchboxBase {...props} placeholder={placeholderMobile} searchType="search">
    { /* eslint-disable-next-line jsx-a11y/control-has-associated-label */ }
    <button className="nav-search-clear-btn" type="button" title={clearTitle} />
    { /* eslint-disable-next-line jsx-a11y/control-has-associated-label */ }
    <button className="nav-search-close-btn" type="button" title={closeTitle} />
    {category && <Category {...category} />}
  </SearchboxBase>,
  <Script on="now">
    {clientFileContent}
  </Script>,
];

SearchboxMobile.propTypes = {
  placeholderMobile: PropTypes.string.isRequired,
  clearTitle: PropTypes.string.isRequired,
  closeTitle: PropTypes.string.isRequired,
};

module.exports = SearchboxMobile;
