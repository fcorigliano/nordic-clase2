// eslint-disable-next-line max-len
const mapNavMenuLinksToUrls = require('./map-nav-menu-links-to-urls');
const icons = require('./icons');

const originalProps = {
  device: {
    osName: 'android',
  },
  platform: {
    id: 'ML',
    siteId: 'MLA',
  },
};
icons.inject(originalProps);


describe('Mercado Libre Navigation', () => {
  describe('Map Nav Menu Links To Urls', () => {
    it('returns a valid links list with the parsed information', () => {
      const links = [{ link: 'home' }];
      const urls = {
        home: {
          link: 'https://www.mercadolibre.com.ar',
          name: 'Inicio',
        },
      };
      const actualLocation = 'https://www.mercadolibre.com.ar';

      const navMenuUrls = mapNavMenuLinksToUrls({ links, urls, currentUrl: actualLocation, originalProps });

      expect(navMenuUrls).toHaveLength(1);
    });

    it('returns a valid links list minus one that is not a valid link', () => {
      const links = [{ link: 'home' }, { link: 'discounts' }];
      const urls = {
        home: {
          link: 'https://www.mercadolibre.com.ar',
          name: 'Inicio',
        },
        discounts: {
          link: null,
          name: 'Ofertas',
        },
      };
      const actualLocation = 'https://www.mercadolibre.com.ar';

      const navMenuUrls = mapNavMenuLinksToUrls({ links, urls, currentUrl: actualLocation, originalProps });

      expect(navMenuUrls).toHaveLength(1);
      expect(navMenuUrls[0].name).toBe('Inicio');
      expect(navMenuUrls[0].id).toBe('home');
      expect(navMenuUrls[0].link.href).toBe('https://www.mercadolibre.com.ar');
    });
  });
});
