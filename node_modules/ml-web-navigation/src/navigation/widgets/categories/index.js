const React = require('react');
const PropTypes = require('prop-types');
const Script = require('frontend-script');

const Categories = ({ domain, baseUrl, version }) => (
  <Script src={`${baseUrl}/frontend-assets/nav-widget-ml-categories/v${version}/categories.js`}>
    {`
      (function(win, freya) {
        if (win.CategoriesWidget && typeof freya !== 'undefined') {
          new CategoriesWidget({
            bus: freya,
            endpoint: '${domain}/menu/departments',
          });
        }
      })(window, window.freya);
    `}
  </Script>
);

Categories.propTypes = {
  domain: PropTypes.string.isRequired,
  baseUrl: PropTypes.string.isRequired,
  version: PropTypes.string,
};

Categories.defaultProps = {
  version: '1.4.1',
};

module.exports = Categories;
