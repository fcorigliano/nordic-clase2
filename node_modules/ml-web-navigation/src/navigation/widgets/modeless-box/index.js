const React = require('react');
const PropTypes = require('prop-types');
const Script = require('frontend-script');
const Style = require('frontend-style');

const ModelessBox = ({ baseUrl, version, callbacks, mainDomain }) => {
  const modelessBoxBaseUrl = `${baseUrl}/frontend-assets/nav-widget-ml-modeless-box/v${version}`;

  const joinedCallbacks = callbacks && callbacks.length > 0 ? callbacks.join('') : '';
  return (
    <>
      <Style href={`${modelessBoxBaseUrl}/modeless-box.css`} />
      <Script src={`${modelessBoxBaseUrl}/modeless-box.js`}>
        {`
          var mainDomain = '${mainDomain}';
          ${joinedCallbacks}
        `}
      </Script>
    </>
  );
};

ModelessBox.propTypes = {
  callbacks: PropTypes.arrayOf(
    PropTypes.string.isRequired,
  ).isRequired,
  baseUrl: PropTypes.string.isRequired,
  mainDomain: PropTypes.string.isRequired,
  version: PropTypes.string,
};

ModelessBox.defaultProps = {
  version: '3.11.0',
};

module.exports = ModelessBox;
