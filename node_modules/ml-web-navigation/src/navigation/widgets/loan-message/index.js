const React = require('react');
const PropTypes = require('prop-types');
const Script = require('frontend-script');
const readClientFile = require('../../utils/read-client-file');

const clientFileContent = readClientFile('loans-tracking.js');

const uiMessage = 'ui-message';
const LoansMessages = (props) => {
  const { show, text, callToActionText, link } = props;

  return show && (
    <a id="nav-header-overdue-loans" href={link}>
      <div className={`${uiMessage} ${uiMessage}--has-icon ${uiMessage}--error ${uiMessage}--overdue-loans`}>
        <div className={`${uiMessage}--bounds`}>
          <p className={`${uiMessage}__text`}>{text}</p>
          <span className={`${uiMessage}--overdue-loans-cta`}>{callToActionText}</span>
        </div>
      </div>
      <Script on="now">
        {clientFileContent}
      </Script>
    </a>
  );
};

LoansMessages.propTypes = {
  show: PropTypes.bool,
  text: PropTypes.string,
  callToActionText: PropTypes.string,
  link: PropTypes.string,
};

LoansMessages.defaultProps = {
  show: false,
  text: '',
  callToActionText: 'Pagar',
  link: '',
};

module.exports = LoansMessages;
