/* eslint-disable func-names, no-var, no-param-reassign, one-var, vars-on-top, prefer-template, no-useless-escape */
/* global window, navigator, XMLHttpRequest */
(function (window) {
  var host = window.location.hostname.substr(window.location.hostname.indexOf('.'), window.location.hostname.length);

  if (host.indexOf('mercadolibre') !== -1 || host.indexOf('mercadolivre') !== -1 || host.indexOf('mercadopago') !== -1) {
    var mattUrl = 'https://matt' + host;

    var go = window.location.href;
    mattUrl = mattUrl.concat('?go=').concat(encodeURIComponent(go));

    if (navigator && navigator.sendBeacon) {
      /* eslint-disable no-undef, no-restricted-globals, no-global-assign */
      status = navigator.sendBeacon(mattUrl);
      /* eslint-disable no-undef, no-restricted-globals, no-global-assign */
    } else {
      var Http = new XMLHttpRequest();
      Http.open('GET', mattUrl);
      Http.send();
    }
  }
}(window));
