/* eslint-disable func-names, no-var, no-param-reassign, one-var, vars-on-top, prefer-template, no-useless-escape */
/* eslint-disable no-undef, no-restricted-globals, no-global-assign, prefer-destructuring */
/* global window, navigator, XMLHttpRequest */
(function (window) {
  var host = window.location.hostname.substr(window.location.hostname.indexOf('.'), window.location.hostname.length);

  if (host.indexOf('mercadolibre') !== -1 || host.indexOf('mercadolivre') !== -1 || host.indexOf('mercadopago') !== -1) {
    var referrer = window.document.referrer;
    var mattUrl = 'https://matt' + host;
    mattUrl = mattUrl.concat('?referrer=').concat(encodeURIComponent(referrer));
    var go = window.location.protocol + '//' + window.location.host + window.location.pathname;
    mattUrl = mattUrl.concat('&go=').concat(encodeURIComponent(go));

    if (navigator && navigator.sendBeacon) {
      status = navigator.sendBeacon(mattUrl);
    } else {
      var Http = new XMLHttpRequest();
      Http.open('GET', mattUrl);
      Http.send();
    }
  }
}(window));
