const SEO = {
  'twitter.com': true,
  't.co': true,
  'facebook.com': true,
  'google.com': true,
  'google.com.ar': true,
  'images.google.com': true,
  'images.google.com.ar': true,
  'plus.url.google.com': true,
  'plus.google.com': true,
  'search.yahoo.com': true,
  'msn.com': true,
  'ubbi.com': true,
  'dmoz.org': true,
  'uol.com.ar': true,
  'buscar.terra.com.ar': true,
  'americaonline.com.ar': true,
  'grippo.com.ar': true,
  'caraygaray.com': true,
  'ahijuna.com.ar': true,
  'pergaminovirtual.com.ar': true,
  'orkut.com.br': true,
  'orkut.com': true,
  'google.com.br': true,
  'images.google.com.br': true,
  'msn.com.br': true,
  'cade.search.yahoo.com': true,
  'terra.com.br': true,
  'uol.com.br': true,
  'ig.com.br': true,
  'altavista.com': true,
  'ibest.com.br': true,
  'globo.com': true,
  'achei.com.br': true,
  'aonde.com.br': true,
  'search.live.com': true,
  'bing.com': true,
  'hi5.com': true,
  'google.com.mx': true,
  'images.google.com.mx': true,
  't1msn.com.mx': true,
  'hispavista.com': true,
  'aol.com.mx': true,
  'yahoo.net': true,
  'todito.com': true,
  'terra.com.mx': true,
  'google.com.co': true,
  'lalupa.com': true,
  'infoguia.net': true,
  'images.google.com.co': true,
  'yahoo.com': true,
  'conexcol.com': true,
  'quehubo.com': true,
  'colombialink.com': true,
  'iencuentra.com': true,
  'google.co.cr': true,
  'images.google.co.cr': true,
  'auyantepuy.com': true,
  'google.com.ec': true,
  'images.google.com.ec': true,
  'google.cl': true,
  'images.google.cl': true,
  'todocl.cl': true,
  'ai.cl': true,
  'huifa.cl': true,
  'guiawebchile.cl': true,
  'antena.cl': true,
  'google.com.uy': true,
  'images.google.com.uy': true,
  'google.co.ve': true,
  'google.com.ve': true,
  'images.google.com.ve': true,
  'images.google.co.ve': true,
  'google.com.pa': true,
  'images.google.com.pa': true,
  'google.com.pe': true,
  'images.google.com.pe': true,
  'google.pt': true,
  'images.google.pt': true,
  'google.com.do': true,
  'images.google.com.do': true,
};


const extractHostname = function extractHostname(url) {
  if (url) {
    let hostname = url.indexOf('//') > -1 ? url.split('/')[2] : url.split('/')[0];
    hostname = hostname.split(':')[0]; // eslint-disable-line prefer-destructuring
    hostname = hostname.split('?')[0]; // eslint-disable-line prefer-destructuring
    hostname = hostname.replace('www.', '');
    return hostname;
  }

  return null;
};

const isSeo = function isSeo(referrer) {
  return SEO[referrer] !== undefined;
};


const getMattParams = function getMattParams(url) {
  const params = {};
  try {
    /* eslint-disable no-undef */
    const urlSearch = new URL(url);
    urlSearch.searchParams.forEach((value, key) => {
      if (key && value && (key === 'gclid' || key === 'tool' || key === 'word' || key.includes('matt_') || key === 'gbraid' || key === 'wbraid')) {
        params[key] = value;
      }
    });
  } catch (error) {
    // error handling
  }
  return params;
};

module.exports = {
  extractHostname,
  isSeo,
  getMattParams,
};
