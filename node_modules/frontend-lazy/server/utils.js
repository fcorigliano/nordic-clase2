const path = require('path');
const fs = require('fs');
const defaultConfig = require('../config/default');

function getExtractorStats(options = {}) {
  const config = { ...defaultConfig, ...options.loadable };
  const statsFile = path.join(process.cwd(), config.buildPath, config.statsFilename);
  let stats;
  try {
    if (fs.existsSync(statsFile)) {
      stats = JSON.parse(fs.readFileSync(statsFile).toString('utf8'));
    }
  } catch (err) {
    console.error(err); // eslint-disable-line
    stats = false;
  }
  return stats;
}

module.exports = { getExtractorStats };
