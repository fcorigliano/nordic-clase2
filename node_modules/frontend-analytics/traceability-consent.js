const log = require('./src/utils/logger');

module.exports = async function fetchTraceabilityConsent(req) {
  if (req?.meliCookies?.userConsentCookieCategory) {
    try {
      return await req.meliCookies.userConsentCookieCategory('traceability');
    } catch (err) {
      log.info(`Failed to get traceability user consent from middleware: ${err}`);
      return false;
    }
  } else {
    log.info('Failed to get traceability user consent from middleware: Middleware is not available');
    return false;
  }
};
