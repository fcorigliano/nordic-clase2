/**
 * Module dependencies
 */
const morgan = require('morgan');
const logger = require('frontend-logger')('ragnar');
const { PRODUCTION } = require('frontend-env');
/**
 * Expose logger middleware
 */
function loggerMiddleware() {
  if (PRODUCTION) {
    return morgan('combined', {
      skip: function skipMorganLog(req, res) {
        return res.statusCode < 500;
      },
    });
  }
  return morgan('dev');
}

/**
 * Expose a logger instance
 */
exports = module.exports = logger; // eslint-disable-line no-multi-assign

/**
 * Expose a logger middleware
 */
exports.loggerMiddleware = loggerMiddleware;
