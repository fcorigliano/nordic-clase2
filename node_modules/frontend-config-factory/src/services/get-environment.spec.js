const getEnvironmentService = require('./get-environment');
const { production } = require('../constants/environment-variables');

describe('getEnvironment test', () => {
  test('getEnvironment and get production', () => {
    const env = getEnvironmentService({});
    expect(env).toBe(production);
  });
  test('getEnvironment by req', () => {
    const env = getEnvironmentService({
      req: {
        cookies: {
          meliLab: true,
        },
        headers: {
          TEST_VERSION: '4.4.4',
        },
      },
      environmentHeader: 'TEST_VERSION',
    });
    expect(env).toBe('4.4.4');
  });
  test('getEnvironment by environment string', () => {
    const env = getEnvironmentService({ environment: '4.4.4' });
    expect(env).toBe('4.4.4');
  });
});
