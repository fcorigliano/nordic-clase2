const appConfig = require('frontend-config');
const { deepMerge } = require('frontend-config/src/utils');
const env = require('frontend-env');

const defaultConfig = require('./default');
const developmentConfig = require('./development');

const config = () => {
  let mergedConfig = defaultConfig;
  if (env.DEVELOPMENT) {
    mergedConfig = deepMerge(defaultConfig, developmentConfig);
  }
  if (appConfig.mshopsDetection) {
    mergedConfig.features = deepMerge(mergedConfig.features, appConfig.mshopsDetection);
  }
  return mergedConfig;
};

module.exports = config();
