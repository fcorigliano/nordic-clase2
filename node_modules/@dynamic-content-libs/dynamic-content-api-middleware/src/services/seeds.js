const { seedSources } = require('../constants/experiments');
const { getD2Id } = require('./d2id');
const { getUserId } = require('./users');

const getSeed = ({
  seedSource,
  req,
  headers,
  cookies,
  userId,
}) => {
  if (seedSource === seedSources.uid) {
    return getD2Id({
      req,
      headers,
      cookies,
    });
  }

  if (seedSource === seedSources.userId) {
    return userId || (req && getUserId(req)) || null;
  }

  return null;
};

module.exports = {
  getSeed,
};
