const { d2id: d2idHeader } = require('../constants/headers');
const { d2id: d2idCookie } = require('../constants/cookies');

const replaceRegEx = /-n$/g;

const getD2Id = ({ req, headers, cookies }) => (headers || (req && req.headers) || {})[d2idHeader]
  || ((cookies || (req && req.cookies) || {})[d2idCookie] || '').replace(replaceRegEx, '') || null;

module.exports = {
  getD2Id,
};
