const logger = require('frontend-logger')('@dynamic-content-libs/dynamic-content-api-middleware');
const env = require('frontend-env');

const error = (message, { req, error: errorParam }) => {
  const logMessage = `${message}: ${(errorParam && errorParam.message) || 'No error message'}`;
  const platformWithDefault = (req || {}).platform || {};
  const tags = {
    applicationId: env.APPLICATION || null,
    scopeId: env.SCOPE || null,
    platformId: platformWithDefault.id || null,
    siteId: platformWithDefault.siteId || null,
    domain: platformWithDefault.domain || null,
  };

  logger.error(logMessage, tags);
};

module.exports = {
  error,
};
