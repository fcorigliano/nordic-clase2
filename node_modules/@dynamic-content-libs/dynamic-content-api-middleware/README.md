# @dynamic-content-libs/dynamic-content-api-middleware

> A middleware that provides helper methods to get dynamic content to inject into a response.

## Getting Started

### Usage

This middleware is available by default in [Ragnar](https://github.com/mercadolibre/fury_frontend-ragnar#middlewares) since v2.4.0 or above.

```
router.get('/path-to-awesome', (req, res, next) => {
    ...
    req.dynamicContent.getDynamicContent().then((data) => {
        // do something awesome
    }).catch((err) => {
        // Ouch! something happens
    });
});
```

##### Resolve data

Exists 2 response types `html` with an array of data `none` when no results.

With type `html`
```
{
    "type": "html",
    "data": [
        {
            "markup": "<div role=\"region\" class=\"cookie-consent-banner\">...</div>",
            "styles": [
                {
                    "renderChildrenInPlace": false,
                    "code": ".cookie-consent-banner{position:fixed;..."
                }
            ],
            "scripts": [
                {
                    "code": "(function(){var ccb=function(e)..."
                }
            ],
            "cookies": [],
            "position": "bottom"
        }
    ]
}
```

With type `none`

```
{
    "type": "none"
}
```

## Running the tests

Run tests in main package

```
npm run test
```

## Support

If you have any question related to this module please contact us on the [#team-frontendcore](https://meli.slack.com/archives/CS9E8LJ8Z) slack channel or via email [frontendcore@mercadolibre.com](mailto:frontendcore@mercadolibre.com)

## Versioning

Please check [README.md](../../README.md) in the project root.

## Contributing

In order to contribute to this library, you must read [this guide](https://github.com/mercadolibre/fury_frontend-nordic/blob/master/docs/contributing.md#contributing-guidelines) first.

## Changelog

We keep changes to our codebase [here](../../CHANGELOG.md)

## License

Â© 2021 Mercado Libre
