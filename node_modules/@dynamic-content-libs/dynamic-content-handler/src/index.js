const { getDynamicContent: getCookiesContent } = require('@frontend-cookies-manager/cookies-consent-banner');
const {
  HTML,
  NONE,
} = require('@dynamic-content-libs/common/src/constants/response-types');

const noneResponse = {
  type: NONE,
};

const getDynamicContent = ({
  mocks,
  ...data
}) => {
  const cookiesConsentGetter = (((mocks || {}).cookiesConsent || {}).getDynamicContent) || getCookiesContent;
  const cookiesData = cookiesConsentGetter(data);

  const value = cookiesData
    ? {
      type: HTML,
      data: [cookiesData],
    }
    : noneResponse;

  return Promise.resolve(value);
};

module.exports = {
  getDynamicContent,
};
